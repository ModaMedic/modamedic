{"version":3,"sources":["first_logo.png","ImagesOrth/ACL.jpg","ImagesOrth/REVERSETSR.jpg","ImagesOrth/Hip.png","ImagesOrth/Ankle.jpg","ImagesOrth/Elbow.jpg","ImagesOrth/Back.jpg","ImagesOrth/Neck.jpg","ImagesOrth/INSTRUCTIONS.PNG","Logo.js","Search.js","ExportCSV.js","Table.js","TableComp.js","TableAns.js","Graph.js","TablePer.js","SleepGraph.js","GraphAns.js","PatientData.js","CompGraph.js","DisplayButton.js","PatientSearch.js","NavBar.js","MessagesPage.js","Questionnaire/SurveyComponent.jsx","Questionnaire/QuestionnaireManger.js","PatientSearchNew.js","InstructionsSurgery.js","ExercisesPage.js","App.js","AddUser.js","Login.js","HomeLogin.js","Home.js","serviceWorker.js","index.js"],"names":["module","exports","Logo","src","require","style","height","marginleft","marginRight","alt","Popup","Component","className","onClick","this","props","closePopup","id","text","React","ExportCSV","csvData","fileName","e","wb","Sheets","XLSX","json_to_sheet","SheetNames","excelBuffer","bookType","type","data","Blob","FileSaver","exportToCSV","Table","state","steps","distance","calories","weather","sleep","dataArr","table","exportCSV","handleChange","bind","event","target","name","value","checked","setState","ready","i","noData","length","values","j","dateOStr","week","dates","weekly","day","Date","date","getDay","sun","sat","getTime","toLocaleDateString","month","monthly","avgO","צעדים","מרחק","קלוריות","light","deep","total","sum","counter","showDaily","ValidTime","dateStr","replace","push","firstTime","k","time","dayOfWeek","sunday","saturday","sort","arr","Object","entries","key","key1","last","Math","min","d","setHours","num","floor","toFixed","o","sundayO","firstDay","getFullYear","getMonth","firstDayO","line","width","align","TableComp","finish","endsWith","docs","TableAns","dateO","slice","includes","Graph","sort_by_key","array","a","b","x","y","points","oDay","Data","year","valueOf","dataX","download","TablePer","dic","QuestionnaireID","Score","SleepGraph","pointsD","pointsL","pointsT","lineD","lineL","lineT","colors","GraphAns","PatientData","q2","q3","q4","q5","user","showPopup","showPopupQ","new_date","Questionnaires","quest1","quest2","quest3","quest4","quest5","quest6","changeDate","togglePopup","handleSubmit","togglePopupQ","handleSubmitQ","preventDefault","axios","post","UserID","DateOfSurgery","changedSurgeryDate","headers","sessionStorage","getItem","then","res","window","alert","bmi","parseFloat","sDate","undefined","weekday","gender","pNumber","smoke","sType","weight","today","birthday","age","first","charAt","substring","onSubmit","onChange","PopupQ","CompGraph","beforeRecords","Before","afterRecords","After","pointsCompere","lineCompere","avgCompO","DisplayButton","graph","styleLabel","fontSize","color","margin","clean","tempDic","temp","arrSteps","arrDis","arrCal","arrWeat","arrSleep","arrCompSteps","arrCompDis","arrCompCal","arr1","arr2","arr3","arr4","arr5","arr6","High","concat","periodicAnswers","CaloriesIncludeCompere","StepsIncludeCompere","DistanceIncludeCompere","dailyA","dailyQ","perQ","NavBar","userInfo","pass","pass2","diff","isLogOut","isMessage","isPatientInfo","isInstructions","isExercises","isEdit","logout","change","privateInfoShow","changeToEdit","updateUser","isQuestionnaires","url","response","token","message","getInfo","get","currUser","removeItem","localStorage","toggleUserInfo","iconType","location","pathname","isDoctor","class","size","Navbar","bg","variant","fixed","goToSearch","goToQuestionnaires","goToMessages","goToExercises","goToInstructions","to","NavDropdown","title","Item","as","Brand","required","DoctorInfo","userName","fName","First_Name","lName","Last_Name","bday","BirthDate","phone","Phone_Number","handleChangeInfo","handleSubmitInfo","bDay","now","dateOfSurgery","height_double","Number","String","pow","put","bDate","toISOString","split","substr","Card","Header","ListGroup","onReset","handleReset","maxLength","pattern","max","float","position","UserInfo","Gender","Smoke","surgeryType","SurgeryType","education","Education","Height","Weight","BMI","onSelectGender","onSelectSmoke","onSelectSurgeryType","onSelectEducation","selectedIndex","options","1","2","3","4","5","6","surgeryDateDisplay","patientListItems","genderOptions","surgeryOptions","smokeOptions","educationOptions","surgeryDate","MessagesPage","messages","content","fetchMessagesPatient","fetchMessagesDoctor","prevProps","prevState","snapshot","patientUserId","reverse","patientId","encodeURIComponent","mId","console","log","MessageId","delete","count","dt2","forEach","dt1","FromFirstName","FromLastName","UTC","getDate","addMessage","placeholder","marginLeft","striped","bordered","hover","map","toLocaleString","textAlign","Content","removeMessage","borderColor","Survey1","applyTheme","SurveyComponent","json","questionnaireId","match","params","$","getQuestionnaire","sendAnswersToServer","sendParsedResultToServer","QuestionnaireEnglishText","description","QuestionnaireText","questions","Questions","elements","singleQuestion","QuestionText","Type","isRequired","choices","Answers","answer","answerID","answerText","hasNone","colCount","result","showID","showWrongUser","showQ","showChange","register","wrongA","serveryResult","parseInt","totalAnswers","prototype","hasOwnProperty","call","question","QuestionID","answers","Array","isArray","AnswerID","widgets","survey","onComplete","add","JSON","stringify","model","showQuestionNumbers","QuestionnaireManger","questionnairesArr","questionnairesArrDoctor","presentQuestionnaire","extractQuestionnaires","questionnairesArrTemp","changedQuestionnaires","q","alignRight","alignLeft","textWeight","scope","changeQuest","findBMIGroup","findGenderGroup","findSmokeGroup","PatientSearchNew","first_date","setMonth","three_month","end_date","start_date","sleeping_hours","todayDate","comp","getRequest","selectUser","getCompereRequest","compAfterRequests","getStartAndEndTimeByInterval","findHowManyDaysAfter","getDoctorRequest","getPatientRequest","userId","getUrl","start_time","end_time","numOfUsers","beforeOrAfter","interval","times","searchStartByInterval","searchEndByInterval","genderGroup","smokeGroup","bmiGroup","ranges","groupId","range","indexOf","lastIndexOf","da","questionnaire","startsWith","todayTimestamp","after5To10Days","numOfDaysAfterSurgery","after10To35Days","after35To90Days","after90To1800Days","after180Days","responseQ","display","htmlFor","MAP","areas","shape","coords","preFillColor","fillColor","lineWidth","InstructionsSurgery","onFileChange","selectedFile","files","downloadFile","instruction","InstructionId","method","responseType","URL","createObjectURL","link","document","createElement","href","setAttribute","Title","body","appendChild","click","onFileUpload","FormData","append","fileData","instructions","instructionsForGrid","headerNames","categoryToImage","instructionsByCategory","showInstructions","newInstructionCategory","newInstructionTitle","categories","area","getInstructions","changePdfToShow","getInitialState","load","clicked","clickedOutside","moveOnImage","enterArea","leaveArea","moveOnArea","getTipPosition","selectFile","upload","uploadFile","onSelectCategoryChosen","hoveredArea","msg","moveMsg","category","focusOnInstructions","getElementById","scrollIntoView","evt","nativeEvent","layerX","layerY","currArea","top","center","left","respone","instructionsArr","groupArrayOfObjects","list","reduce","rv","pdfToShow","label","file","onUploadProgress","formData","selectedFiles","currentFile","progress","round","loaded","catch","eId","confirm","optionItems","keys","role","aria-valuenow","aria-valuemin","aria-valuemax","disabled","Grid","container","spacing","item","xs","renderUploadFile","onLoad","onMouseMove","_","onImageMouseMove","strokeColor","CardMedia","component","image","Category","removeInstruction","ExercisesPage","exercises","exercisesGrid","newExerciseUrl","newExerciseCategory","getExercises","exercisesForGrid","addExercise","urlId","searchParams","Video","group","r","opts","playerVars","autoplay","backgroundColor","keyName","keyIndex","exercise","videoId","onReady","_onReady","removeExercise","ExerciseId","pdfjs","GlobalWorkerOptions","workerSrc","version","App","optionsPName","namesDiv","isFetchingNames","users","pName","encrypName","fetchNamesForResearch","handlePName","names","trim","uniqueNames","from","Set","usersByName","cards","Body","checkIfNotSearchNeeded","searchPatient","getActiveComponent","initialState","password","questionsID","questionsText","answerUserQuestion","quesionChosen","code","questionnairesID","questionnairesText","questionnairesChosen","AddUser","questionnaires","selected","onSelectQuesionChosen","onSelectQuestionnairesChosen","setSelected","chosen","selectQuestionnaire","initialQuestions","initQuestionsID","initQuestionsText","fetch","results","obj","initQuestionnairesID","initQuestionnairesText","initQuestionnaires","Password","Code","VerificationQuestion","VerificationAnswer","reload","BMI_NUMBER","componentDidMount","questionnairesOption","Button","floatButtom","isPatient","for","minLength","minlength","Tooltip","IconButton","labelledBy","Login","ID","wrong","doctor","patient","remember","setItem","sumbit","forget","handle","changePass","qID","response1","dateLong","HomeLogin","path","Home","basename","exact","render","Boolean","hostname","ReactDOM","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.45bbc530.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/first_logo.4c4417d4.png\";","module.exports = __webpack_public_path__ + \"static/media/ACL.b8e24ffb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/REVERSETSR.fd7b932b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Hip.b1fa9622.png\";","module.exports = __webpack_public_path__ + \"static/media/Ankle.717456b8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Elbow.986fd0d7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Back.b7b8521b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Neck.363fa28f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/INSTRUCTIONS.a467ee60.PNG\";","import React from \"react\"\r\n\r\nfunction Logo(){\r\n    const style ={\r\n        height: \"25vmin\"\r\n    };\r\n\r\n    return (\r\n        <img src={require(\"./first_logo.png\")} style={{ height: \"25vmin\", marginleft: \"center\",marginRight: \"center\"}} alt=\"logo\" />\r\n    )\r\n}\r\n\r\nexport default Logo","import React, {Component} from \"react\"\r\nimport axios from 'axios';\r\nimport Card from 'react-bootstrap/Card'\r\n\r\nclass SearchPatient extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            optionsPName: [],\r\n            namesDiv: [],\r\n            isFetchingNames: false,\r\n            users: [],\r\n            pName:'',\r\n            showPopup: false\r\n        };\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.fetchNames = this.fetchNames.bind(this);\r\n        this.handlePName = this.handlePName.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchNames()\r\n            .then(() => console.log(\"Fetch names successfully\"));\r\n    }\r\n\r\n    async fetchNames(){\r\n        var list = [];\r\n        var users = [];\r\n        var namesDiv = [];\r\n        this.setState({isFetchingNames: true});\r\n        var response = await axios.get(\r\n            \"  https://icc.ise.bgu.ac.il/njsw18auth/doctors/metrics/getUsers\",\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n        if(response.data.data){\r\n            var names = [];\r\n            for(var i = 0; i < response.data.data.length; i++){\r\n                let user = response.data.data[i];\r\n                namesDiv.push({first: user.First_Name, last: user.Last_Name});\r\n                users.push(user);\r\n                names.push(user.First_Name.trim() + \" \" + user.Last_Name.trim())\r\n            }\r\n            names = names.sort();\r\n            var uniqueNames = Array.from(new Set(names));\r\n            for(i = 0; i < uniqueNames.length; i++){\r\n                list.push(<option key={uniqueNames[i]}>{uniqueNames[i]}</option>);\r\n            }\r\n        }\r\n        this.setState({\r\n            isFetchingNames: false,\r\n            optionsPName: list,\r\n            namesDiv: namesDiv,\r\n            users: users\r\n        });\r\n    }\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    handlePName(event) {\r\n        this.setState({pName: event.target.value});\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        if(event){\r\n            event.preventDefault()\r\n        }\r\n\r\n        let usersByName = [];\r\n        this.state.users.forEach(user => {\r\n            if(this.state.pName.toLocaleLowerCase() === `${user.First_Name.trim()} ${user.Last_Name.trim()}`.toLocaleLowerCase()) {\r\n                console.log(`found user ${user}`);\r\n                usersByName.push(user);\r\n            }\r\n        });\r\n        let cards = [];\r\n        for(let i = 0; i < usersByName.length; i++){\r\n            let user = usersByName[i];\r\n            let dateC = new Date(user.BirthDate).toLocaleDateString('en-GB', {day: 'numeric', month: 'numeric', year:\"numeric\"});\r\n            cards.push(\r\n                <Card className=\"card\" key={user.UserID}  onClick={() => {\r\n                    sessionStorage.setItem(\"patientUserId\", user.UserID);\r\n                    this.togglePopup();\r\n                }}>\r\n                    <Card.Body className=\"cardBody\">שם מלא: {this.state.pName.trim()} </Card.Body>\r\n                    <Card.Body className=\"cardBody\">תאריך לידה: {dateC}</Card.Body>\r\n                </Card>\r\n            );\r\n        }\r\n        this.setState({\r\n            text: cards\r\n        });\r\n        this.togglePopup();\r\n    }\r\n\r\n    render() {\r\n        require(\"./search.css\");\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <datalist id=\"first-list\">{this.state.optionsPName}</datalist>\r\n                    <div className=\"search\">\r\n                        <label className=\"lSearch\">\r\n                            חפש מטופל:\r\n                        </label>\r\n                        <input className=\"iSearch\"\r\n                               id=\"pname\"\r\n                               type=\"text\"\r\n                               name=\"pName\"\r\n                               value={this.state.pName}\r\n                               placeholder=\"שם פרטי ומשפחה\"\r\n                               onChange={this.handlePName}\r\n                               list=\"first-list\"\r\n                               required\r\n                        />\r\n                        <button className=\"bSearch\">\r\n                            חפש\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n                <br />\r\n                {this.state.showPopup ?\r\n                    <Popup\r\n                        text={this.state.text}\r\n                        closePopup={this.togglePopup.bind(this)}\r\n                    /> : null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SearchPatient\r\n\r\nclass Popup extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className='popup'>\r\n                <div className='popup_inner' >\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                    <h4>:אנא בחר מבין הרשומות הבאות</h4>\r\n                    {this.props.text}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react'\r\n//import Button from 'react-bootstrap/Button';\r\nimport * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nimport \"./ExportCSV.css\"\r\n\r\nexport const ExportCSV = ({csvData, fileName}) => {\r\n\r\n    const fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n    const fileExtension = '.xlsx';\r\n\r\n    const exportToCSV = (csvData, fileName) => {\r\n        const ws = XLSX.utils.json_to_sheet(csvData);\r\n        const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n        const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n        const data = new Blob([excelBuffer], {type: fileType});\r\n        FileSaver.saveAs(data, fileName + fileExtension);\r\n    }\r\n\r\n    return (\r\n        <button className=\"b\" onClick={(e) => exportToCSV(csvData,fileName)}>יצא לאקסל</button>\r\n    )\r\n}","import React, {Component} from \"react\";\r\nimport {ExportCSV} from \"./ExportCSV\";\r\n\r\nclass Table extends Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            steps: props.steps,\r\n            distance : props.distance,\r\n            calories: props.calories,\r\n            weather: props.weather,\r\n            sleep: props.sleep,\r\n            dataArr: props.dataArr,\r\n            table: [],\r\n            exportCSV: []\r\n        }\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n\r\n    render() {\r\n        require(\"./Table.css\");\r\n        if(this.props.ready){\r\n            var noData = true;\r\n            var i\r\n            for(i = 0; i < this.props.dataArr.length; i++){\r\n                if(this.props.dataArr[i].values.length > 0){\r\n                    noData = false\r\n                }\r\n            }\r\n            if(!noData){\r\n                var table = {};\r\n                var j, week = false;\r\n                var dates = [];\r\n                var dateO, dateOStr;\r\n                if(this.props.weekly){\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var avgO = {};\r\n                avgO[\"before\"] = {צעדים: {}, מרחק: {}, קלוריות: {}, weather: {}, light: {}, deep: {}, total: {}};\r\n                avgO[\"after\"] = {צעדים: {}, מרחק: {}, קלוריות: {}, weather: {}, light: {}, deep: {}, total: {}};\r\n                avgO[\"before\"][\"צעדים\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"מרחק\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"קלוריות\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"weather\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"light\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"deep\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"total\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"צעדים\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"מרחק\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"קלוריות\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"weather\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"light\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"deep\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"total\"] = {sum: 0, counter: 0};\r\n                for(i = 0; i < this.props.dataArr.length; i++){\r\n                    for(j = 0; j < this.props.dataArr[i].values.length; j++){\r\n                        if(this.props.showDaily){\r\n                            var date = new Date(this.props.dataArr[i].values[j].ValidTime);\r\n                            var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-');\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(this.props.dataArr[i].values[j].ValidTime);\r\n                            }\r\n                            if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                            var deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                for(var k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                    if(k === 0){\r\n                                        firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    }\r\n                                    else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                        break;\r\n                                    }\r\n                                    var time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    time = time / 3600000;\r\n                                    if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                        light = light + time;\r\n                                    }\r\n                                    else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                        deep = deep + time;\r\n                                    }\r\n                                    total = total + time;\r\n                                }\r\n                                if(!table[dateStr]){\r\n                                    table[dateStr] = {};\r\n                                }\r\n                                table[dateStr][\"light\"] = light;\r\n                                table[dateStr][\"deep\"] = deep;\r\n                                table[dateStr][\"total\"] = total;\r\n                                continue;\r\n                            }\r\n                            table[dateStr][this.props.dataArr[i].name] = this.props.dataArr[i].values[j];\r\n                        }\r\n                        else if(this.props.weekly){\r\n                            date = new Date(this.props.dataArr[i].values[j].ValidTime);\r\n                            var dayOfWeek = date.getDay();\r\n                            var sunday = new Date(this.props.dataArr[i].values[j].ValidTime - dayOfWeek * 86400000);\r\n                            var saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            if(dateOStr === dateStr){\r\n                                if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                    let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                    for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                        if(k === 0){\r\n                                            firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        }\r\n                                        else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                            break;\r\n                                        }\r\n                                        time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        time = time / 3600000;\r\n                                        if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                            light = light + time;\r\n                                        }\r\n                                        else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                            deep = deep + time;\r\n                                        }\r\n                                        total = total + time;\r\n                                    }\r\n                                    if(this.props.dataArr[i].values[j].ValidTime < this.props.date){\r\n                                        avgO[\"before\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"before\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"before\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"before\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    else{\r\n                                        avgO[\"after\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"after\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"after\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"after\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    continue;\r\n                                }\r\n                                if(this.props.dataArr[i].values[j].ValidTime < this.props.date){\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"before\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"before\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                else{\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"after\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"after\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                if(!week){\r\n                                    dates.push(this.props.dataArr[i].values[j].ValidTime);\r\n                                    week = true;\r\n                                }\r\n                                continue;\r\n                            }\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(this.props.dataArr[i].values[j].ValidTime);\r\n                            }\r\n                            if(table[dateStr][this.props.dataArr[i].name] == null){\r\n                                table[dateStr][this.props.dataArr[i].name] = {};\r\n                                table[dateStr][this.props.dataArr[i].name][\"counter\"] = 0;\r\n                                table[dateStr][this.props.dataArr[i].name][\"sum\"] = 0;\r\n                            }\r\n                            if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                    if(k === 0){\r\n                                        firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    }\r\n                                    else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                        break;\r\n                                    }\r\n                                    time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    time = time / 3600000;\r\n                                    if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                        light = light + time;\r\n                                    }\r\n                                    else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                        deep = deep + time;\r\n                                    }\r\n                                    total = total + time;\r\n                                }\r\n                                if(!table[dateStr]){\r\n                                    table[dateStr] = {};\r\n                                }\r\n                                if(!table[dateStr][\"total\"]){\r\n                                    table[dateStr][\"light\"] = {};\r\n                                    table[dateStr][\"deep\"] = {};\r\n                                    table[dateStr][\"total\"] = {};\r\n                                    table[dateStr][\"light\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"total\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"light\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"total\"][\"sum\"] = 0;\r\n                                }\r\n                                table[dateStr][\"light\"][\"sum\"] += light;\r\n                                table[dateStr][\"deep\"][\"sum\"] += deep;\r\n                                table[dateStr][\"total\"][\"sum\"] += total;\r\n                                table[dateStr][\"light\"][\"counter\"]++;\r\n                                table[dateStr][\"deep\"][\"counter\"]++;\r\n                                table[dateStr][\"total\"][\"counter\"]++;\r\n                                continue;\r\n                            }\r\n                            table[dateStr][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                            table[dateStr][this.props.dataArr[i].name][\"counter\"]++;\r\n                        }\r\n                        else if(this.props.monthly){\r\n                            date = new Date(this.props.dataArr[i].values[j].ValidTime);;\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                            if(dateOStr === dateStr){\r\n                                if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                    let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                    for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                        if(k === 0){\r\n                                            firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        }\r\n                                        else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                            break;\r\n                                        }\r\n                                        time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        time = time / 3600000;\r\n                                        if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                            light = light + time;\r\n                                        }\r\n                                        else  if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                            deep = deep + time;\r\n                                        }\r\n                                        total = total + time;\r\n                                    }\r\n                                    if(this.props.dataArr[i].values[j].ValidTime < this.props.date){\r\n                                        avgO[\"before\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"before\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"before\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"before\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    else{\r\n                                        avgO[\"after\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"after\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"after\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"after\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    continue;\r\n                                }\r\n                                if(this.props.dataArr[i].values[j].ValidTime < this.props.date){\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"before\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"before\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                else{\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"after\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"after\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                if(!week){\r\n                                    dates.push(this.props.dataArr[i].values[j].ValidTime);\r\n                                    week = true;\r\n                                }\r\n                                continue;\r\n                            }\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(this.props.dataArr[i].values[j].ValidTime );\r\n                            }\r\n                            if(table[dateStr][this.props.dataArr[i].name] == null){\r\n                                table[dateStr][this.props.dataArr[i].name] = {};\r\n                                table[dateStr][this.props.dataArr[i].name][\"counter\"] = 0;\r\n                                table[dateStr][this.props.dataArr[i].name][\"sum\"] = 0;\r\n                            }\r\n                            if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                    if(k === 0){\r\n                                        firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    }\r\n                                    else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                        break;\r\n                                    }\r\n                                    time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    time = time / 3600000;\r\n                                    if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                        light = light + time;\r\n                                    }\r\n                                    else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                        deep = deep + time;\r\n                                    }\r\n                                    total = total + time;\r\n                                }\r\n                                if(!table[dateStr]){\r\n                                    table[dateStr] = {};\r\n                                }\r\n                                if(!table[dateStr][\"total\"]){\r\n                                    table[dateStr][\"light\"] = {};\r\n                                    table[dateStr][\"deep\"] = {};\r\n                                    table[dateStr][\"total\"] = {};\r\n                                    table[dateStr][\"light\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"total\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"light\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"total\"][\"sum\"] = 0;\r\n                                }\r\n                                table[dateStr][\"light\"][\"sum\"] += light;\r\n                                table[dateStr][\"deep\"][\"sum\"] += deep;\r\n                                table[dateStr][\"total\"][\"sum\"] += total;\r\n                                table[dateStr][\"light\"][\"counter\"]++;\r\n                                table[dateStr][\"deep\"][\"counter\"]++;\r\n                                table[dateStr][\"total\"][\"counter\"]++;\r\n                                continue;\r\n                            }\r\n                            table[dateStr][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                            table[dateStr][this.props.dataArr[i].name][\"counter\"]++;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                var arr = [];\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (let [key,] of Object.entries(table)) {\r\n                        for (let [key1,] of Object.entries(table[key])) {\r\n                            table[key][key1][\"Data\"] = table[key][key1][\"sum\"] / table[key][key1][\"counter\"];\r\n                        }\r\n                    }\r\n                }\r\n                var exportCSV = [];\r\n                var last = Math.min();\r\n                for(i = 0; i < dates.length; i++){\r\n                    date = new Date(dates[i]);\r\n                    dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-')\r\n                    if(this.props.showDaily){\r\n                        var d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        var num = Math.floor((d.getTime() - this.props.date) / 86400000);\r\n                        if(num < 0){\r\n                            num++;\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        table[dateStr][\"num\"] = num;\r\n                        arr.push(\r\n                            <tr key={dateStr}>\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                { this.props.steps ? (table[dateStr][\"צעדים\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.distance ? (table[dateStr][\"מרחק\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.calories ? (table[dateStr][\"קלוריות\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.weather ? (table[dateStr][\"מזג האוויר\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.sleep ? (table[dateStr][\"light\"] >= 0 ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"light\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"light\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.sleep ? (table[dateStr][\"deep\"] >= 0 ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"deep\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"deep\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.sleep ? (table[dateStr][\"total\"] >= 0 ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"total\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"total\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                            </tr>\r\n                        )\r\n                    }\r\n                    else if(this.props.weekly || this.props.monthly){\r\n                        var o = new Date(this.props.date);\r\n                        d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        if(this.props.weekly){\r\n                            var sundayO = new Date(o.getTime() - o.getDay() * 86400000);\r\n                            sundayO.setHours(0,0,0,0);\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            sunday.setHours(0,0,0,0);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            num = Math.floor((sunday.getTime() - sundayO.getTime()) / 604800000);\r\n                        }\r\n                        else{\r\n                            var firstDay = new Date(d.getFullYear(), d.getMonth(), 1);\r\n                            var firstDayO = new Date(o.getFullYear(), o.getMonth(), 1);\r\n                            num = Math.floor((firstDay.getTime() - firstDayO.getTime()) / 2419200000);\r\n                            if(num < 0){\r\n                                num++;\r\n                            }\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            arr.push(\r\n                                <tr key={dateStr + \"before\"}>\r\n                                    <td className=\"before\">{0}</td>\r\n                                    <td className=\"before\">{dateStr}</td>\r\n                                    { this.props.steps ? (avgO[\"before\"][\"צעדים\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"צעדים\"][\"sum\"] / avgO[\"before\"][\"צעדים\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.distance ? (avgO[\"before\"][\"מרחק\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"מרחק\"][\"sum\"] / avgO[\"before\"][\"מרחק\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.calories ? (avgO[\"before\"][\"קלוריות\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"קלוריות\"][\"sum\"] / avgO[\"before\"][\"קלוריות\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.weather ? (avgO[\"before\"][\"weather\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"weather\"][\"sum\"] / avgO[\"before\"][\"weather\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"before\"][\"light\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"light\"][\"sum\"] / avgO[\"before\"][\"light\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"before\"][\"deep\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"deep\"][\"sum\"] / avgO[\"before\"][\"deep\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"before\"][\"total\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"total\"][\"sum\"] / avgO[\"before\"][\"total\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                </tr>\r\n                            )\r\n                            arr.push(\r\n                                <tr key={dateStr + \"after\"}>\r\n                                    <td className=\"after\">{0}</td>\r\n                                    <td className=\"after\">{dateStr}</td>\r\n                                    { this.props.steps ? (avgO[\"after\"][\"צעדים\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"צעדים\"][\"sum\"] / avgO[\"after\"][\"צעדים\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.distance ? (avgO[\"after\"][\"מרחק\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"מרחק\"][\"sum\"] / avgO[\"after\"][\"מרחק\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.calories ? (avgO[\"after\"][\"קלוריות\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"קלוריות\"][\"sum\"] / avgO[\"after\"][\"קלוריות\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.weather ? (avgO[\"after\"][\"weather\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"weather\"][\"sum\"] / avgO[\"after\"][\"weather\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"after\"][\"light\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"light\"][\"sum\"] / avgO[\"after\"][\"light\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"after\"][\"deep\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"deep\"][\"sum\"] / avgO[\"after\"][\"deep\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"after\"][\"total\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"total\"][\"sum\"] / avgO[\"after\"][\"total\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                </tr>\r\n                            )\r\n                        }\r\n                        else{\r\n                            table[dateStr][\"num\"] = num;\r\n                            arr.push(\r\n                                <tr key={dateStr}>\r\n                                     {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                    {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                    { this.props.steps ? (table[dateStr][\"צעדים\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.distance ? (table[dateStr][\"מרחק\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.calories ? (table[dateStr][\"קלוריות\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.weather ? (table[dateStr][\"מזג האוויר\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.sleep ? (table[dateStr][\"light\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"light\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"light\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.sleep ? (table[dateStr][\"deep\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"deep\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"deep\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.sleep ? (table[dateStr][\"total\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"total\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"total\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                </tr>\r\n                            )\r\n                        }\r\n                    }\r\n                    var line = {};\r\n                    line[\"תאריך\"] = dateStr;\r\n                    var z = 0;\r\n                    if(dateStr === dateOStr){\r\n                        if(this.props.date){\r\n                            if(this.props.weekly){\r\n                                line[\"מספר שבוע\"] = z;\r\n                            }\r\n                            else{\r\n                                line[\"מספר חודש\"] = z;\r\n                            }\r\n                        }\r\n                        if(this.props.steps && avgO[\"before\"][\"צעדים\"][\"counter\"]){\r\n                            line[\"צעדים\"] = (avgO[\"before\"][\"צעדים\"][\"sum\"] / avgO[\"before\"][\"צעדים\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.distance && avgO[\"before\"][\"מרחק\"][\"counter\"]){\r\n                            line[\"מרחק\"] = (avgO[\"before\"][\"מרחק\"][\"sum\"] / avgO[\"before\"][\"מרחק\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.calories && avgO[\"before\"][\"קלוריות\"][\"counter\"]){\r\n                            line[\"קלוריות\"] = (avgO[\"before\"][\"קלוריות\"][\"sum\"] / avgO[\"before\"][\"קלוריות\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.weather && avgO[\"before\"][\"weather\"][\"counter\"]){\r\n                            line[\"מזג האוויר\"] = (avgO[\"before\"][\"weather\"][\"sum\"] / avgO[\"before\"][\"weather\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"before\"][\"light\"][\"counter\"]){\r\n                            line[\"שעות שינה קלה\"] = (avgO[\"before\"][\"light\"][\"sum\"] / avgO[\"before\"][\"light\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"before\"][\"deep\"][\"counter\"]){\r\n                            line[\"שעות שינה עמוקה\"] = (avgO[\"before\"][\"deep\"][\"sum\"] / avgO[\"before\"][\"deep\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"before\"][\"total\"][\"counter\"]){\r\n                            line[\"סך כל שעות השינה\"] = (avgO[\"before\"][\"total\"][\"sum\"] / avgO[\"before\"][\"total\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        exportCSV.push(line);\r\n                        line = {};\r\n                        if(this.props.date){\r\n                            if(this.props.weekly){\r\n                                line[\"מספר שבוע\"] = z;\r\n                            }\r\n                            else{\r\n                                line[\"מספר חודש\"] = z;\r\n                            }\r\n                        }\r\n                        line[\"תאריך\"] = dateStr;\r\n                        if(this.props.steps && avgO[\"after\"][\"צעדים\"][\"counter\"]){\r\n                            line[\"צעדים\"] = (avgO[\"after\"][\"צעדים\"][\"sum\"] / avgO[\"after\"][\"צעדים\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.distance && avgO[\"after\"][\"מרחק\"][\"counter\"]){\r\n                            line[\"מרחק\"] = (avgO[\"after\"][\"מרחק\"][\"sum\"] / avgO[\"after\"][\"מרחק\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.calories && avgO[\"after\"][\"קלוריות\"][\"counter\"]){\r\n                            line[\"קלוריות\"] = (avgO[\"after\"][\"קלוריות\"][\"sum\"] / avgO[\"after\"][\"קלוריות\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.weather && avgO[\"after\"][\"weather\"][\"counter\"]){\r\n                            line[\"מזג האוויר\"] = (avgO[\"after\"][\"weather\"][\"sum\"] / avgO[\"after\"][\"weather\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"after\"][\"light\"][\"counter\"]){\r\n                            line[\"שעות שינה קלה\"] = (avgO[\"after\"][\"light\"][\"sum\"] / avgO[\"after\"][\"light\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"after\"][\"deep\"][\"counter\"]){\r\n                            line[\"שעות שינה עמוקה\"] = (avgO[\"after\"][\"deep\"][\"sum\"] / avgO[\"after\"][\"deep\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"after\"][\"total\"][\"counter\"]){\r\n                            line[\"סך כל שעות השינה\"] = (avgO[\"after\"][\"total\"][\"sum\"] / avgO[\"after\"][\"total\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        exportCSV.push(line);\r\n                        continue;\r\n                    }\r\n                    if(this.props.date){\r\n                        if(this.props.showDaily){\r\n                            line[\"מספר יום\"] = table[dateStr][\"num\"]\r\n                        }\r\n                        else if(this.props.weekly){\r\n                            line[\"מספר שבוע\"] = table[dateStr][\"num\"]\r\n                        }\r\n                        else{\r\n                            line[\"מספר חודש\"] = table[dateStr][\"num\"]\r\n                        }\r\n                    }\r\n                    if(this.props.steps && table[dateStr][\"צעדים\"]){\r\n                        line[\"צעדים\"] = table[dateStr][\"צעדים\"][\"Data\"];\r\n                    }\r\n                    if(this.props.distance && table[dateStr][\"מרחק\"]){\r\n                        line[\"מרחק\"] = table[dateStr][\"מרחק\"][\"Data\"];\r\n                    }\r\n                    if(this.props.calories && table[dateStr][\"קלוריות\"]){\r\n                        line[\"קלוריות\"] = table[dateStr][\"קלוריות\"][\"Data\"];\r\n                    }\r\n                    if(this.props.weather && table[dateStr][\"מזג האוויר\"]){\r\n                        line[\"מזג האוויר\"] = table[dateStr][\"מזג האוויר\"][\"Data\"];\r\n                    }\r\n                    if(this.props.sleep && table[dateStr][\"light\"] && this.props.showDaily){\r\n                        line[\"שעות שינה קלה\"] = table[dateStr][\"light\"];\r\n                        line[\"שעות שינה עמוקה\"] = table[dateStr][\"deep\"];\r\n                        line[\"סך כל שעות השינה\"] = table[dateStr][\"total\"];\r\n                        \r\n                    }\r\n                    if(this.props.sleep && table[dateStr][\"light\"] && !this.props.showDaily){\r\n                        line[\"שעות שינה קלה\"] = table[dateStr][\"light\"][\"Data\"];\r\n                        line[\"שעות שינה עמוקה\"] = table[dateStr][\"deep\"][\"Data\"];\r\n                        line[\"סך כל שעות השינה\"] = table[dateStr][\"total\"][\"Data\"];\r\n                    }\r\n                    exportCSV.push(line);\r\n                }\r\n                \r\n            } \r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n        return(\r\n            <div>\r\n                {this.props.ready ? <div className=\"center\">\r\n                    {noData ? <h4>לא קיים מידע על המשתמש</h4> :\r\n                        <table style={{width: \"100%\"}} id=\"mdd\" className=\"tabels\" align=\"center\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    { this.props.dataArr.length > 0 && this.props.showDaily ? <th>מספר יום</th> : null}\r\n                                    { this.props.dataArr.length > 0 && this.props.weekly ? <th>מספר שבוע</th> : null} \r\n                                    { this.props.dataArr.length > 0 && this.props.monthly ? <th>מספר חודש</th> : null}     \r\n                                    { this.props.dataArr.length > 0 ? <th>תאריך</th> : null}\r\n                                    { this.props.steps ? <th>צעדים</th> : null }\r\n                                    { this.props.distance ? <th>מרחק</th> : null }\r\n                                    { this.props.calories ? <th>קלוריות</th> : null }\r\n                                    { this.props.weather ? <th>מזג האוויר</th> : null }\r\n                                    { this.props.sleep ? <th>שעות שינה קלה</th> : null }\r\n                                    { this.props.sleep ? <th>שעות שינה עמוקה</th> : null }\r\n                                    { this.props.sleep ? <th>סך כל שעות השינה</th> : null }\r\n                                </tr>\r\n                                {arr}\r\n                            </tbody>\r\n                        </table>}\r\n                    { this.props.dataArr.length > 0 && !noData ? <ExportCSV csvData={exportCSV} fileName={this.props.name + \" מדדים\"}/> : null}\r\n                    \r\n                </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Table","import React, {Component} from \"react\";\r\nimport {ExportCSV} from \"./ExportCSV\";\r\n\r\nclass TableComp extends Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            steps: props.steps,\r\n            distance : props.distance,\r\n            calories: props.calories,\r\n            weather: props.weather,\r\n            sleep: props.sleep,\r\n            dataArr: props.dataArr,\r\n            table: [],\r\n            exportCSV: []\r\n        }\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n\r\n    render() {\r\n        require(\"./Table.css\");\r\n        if(this.props.ready){\r\n            var noData = true;\r\n            var i\r\n            for(i = 0; i < this.props.dataArr.length; i++){\r\n                if(this.props.dataArr[i].values.length > 0){\r\n                    noData = false\r\n                }\r\n            }\r\n            if(!noData){\r\n                var table = {};\r\n                var j, week = false;\r\n                var dates = [];\r\n                var dateO, dateOStr;\r\n                if(this.props.weekly){\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var avgO = {};\r\n                avgO[\"before\"] = {צעדים: {}, מרחק: {}, קלוריות: {}, weather: {}, light: {}, deep: {}, total: {}};\r\n                avgO[\"after\"] = {צעדים: {}, מרחק: {}, קלוריות: {}, weather: {}, light: {}, deep: {}, total: {}};\r\n                avgO[\"before\"][\"צעדים\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"מרחק\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"קלוריות\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"weather\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"light\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"deep\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"total\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"צעדים\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"מרחק\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"קלוריות\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"weather\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"light\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"deep\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"total\"] = {sum: 0, counter: 0};\r\n                for(i = 0; i < this.props.dataArr.length; i++){\r\n                    let finish=this.props.dataArr[i].values;\r\n                    if (this.props.dataArr[i].name.endsWith(\"לפני\")||this.props.dataArr[i].name.endsWith(\"אחרי\"))\r\n                        finish=this.props.dataArr[i].values[0].docs;\r\n                    for(j = 0; j < finish.length; j++){\r\n                        if(this.props.showDaily){\r\n                            var date = new Date(finish[j].ValidTime);\r\n                            var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-');\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(finish[j].ValidTime);\r\n                            }\r\n                            if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                var deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                for(var k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                    if(k === 0){\r\n                                        firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    }\r\n                                    else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                        break;\r\n                                    }\r\n                                    var time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    time = time / 3600000;\r\n                                    if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                        light = light + time;\r\n                                    }\r\n                                    else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                        deep = deep + time;\r\n                                    }\r\n                                    total = total + time;\r\n                                }\r\n                                if(!table[dateStr]){\r\n                                    table[dateStr] = {};\r\n                                }\r\n                                table[dateStr][\"light\"] = light;\r\n                                table[dateStr][\"deep\"] = deep;\r\n                                table[dateStr][\"total\"] = total;\r\n                                continue;\r\n                            }\r\n                            table[dateStr][this.props.dataArr[i].name] = finish[j];\r\n                        }\r\n                        else if(this.props.weekly){\r\n                            date = new Date(this.props.dataArr[i].values[j].ValidTime);\r\n                            var dayOfWeek = date.getDay();\r\n                            var sunday = new Date(this.props.dataArr[i].values[j].ValidTime - dayOfWeek * 86400000);\r\n                            var saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            if(dateOStr === dateStr){\r\n                                if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                    let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                    for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                        if(k === 0){\r\n                                            firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        }\r\n                                        else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                            break;\r\n                                        }\r\n                                        time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        time = time / 3600000;\r\n                                        if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                            light = light + time;\r\n                                        }\r\n                                        else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                            deep = deep + time;\r\n                                        }\r\n                                        total = total + time;\r\n                                    }\r\n                                    if(this.props.dataArr[i].values[j].ValidTime < this.props.date){\r\n                                        avgO[\"before\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"before\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"before\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"before\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    else{\r\n                                        avgO[\"after\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"after\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"after\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"after\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    continue;\r\n                                }\r\n                                if(finish[j].ValidTime < this.props.date){\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"before\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"before\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"sum\"] += finish[j][\"Data\"];\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                else{\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"after\"][\"weather\"][\"sum\"] += finish[j][\"Data\"];\r\n                                        avgO[\"after\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"sum\"] += finish[j][\"Data\"];\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                if(!week){\r\n                                    dates.push(finish[j].ValidTime);\r\n                                    week = true;\r\n                                }\r\n                                continue;\r\n                            }\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(finish[j].ValidTime);\r\n                            }\r\n                            if(table[dateStr][this.props.dataArr[i].name] == null){\r\n                                table[dateStr][this.props.dataArr[i].name] = {};\r\n                                table[dateStr][this.props.dataArr[i].name][\"counter\"] = 0;\r\n                                table[dateStr][this.props.dataArr[i].name][\"sum\"] = 0;\r\n                            }\r\n                            if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                    if(k === 0){\r\n                                        firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    }\r\n                                    else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                        break;\r\n                                    }\r\n                                    time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    time = time / 3600000;\r\n                                    if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                        light = light + time;\r\n                                    }\r\n                                    else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                        deep = deep + time;\r\n                                    }\r\n                                    total = total + time;\r\n                                }\r\n                                if(!table[dateStr]){\r\n                                    table[dateStr] = {};\r\n                                }\r\n                                if(!table[dateStr][\"total\"]){\r\n                                    table[dateStr][\"light\"] = {};\r\n                                    table[dateStr][\"deep\"] = {};\r\n                                    table[dateStr][\"total\"] = {};\r\n                                    table[dateStr][\"light\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"total\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"light\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"total\"][\"sum\"] = 0;\r\n                                }\r\n                                table[dateStr][\"light\"][\"sum\"] += light;\r\n                                table[dateStr][\"deep\"][\"sum\"] += deep;\r\n                                table[dateStr][\"total\"][\"sum\"] += total;\r\n                                table[dateStr][\"light\"][\"counter\"]++;\r\n                                table[dateStr][\"deep\"][\"counter\"]++;\r\n                                table[dateStr][\"total\"][\"counter\"]++;\r\n                                continue;\r\n                            }\r\n                            table[dateStr][this.props.dataArr[i].name][\"sum\"] += finish[j][\"Data\"];\r\n                            table[dateStr][this.props.dataArr[i].name][\"counter\"]++;\r\n                        }\r\n                        else if(this.props.monthly){\r\n                            date = new Date(finish[j].ValidTime);\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                            if(dateOStr === dateStr){\r\n                                if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                    let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                    for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                        if(k === 0){\r\n                                            firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        }\r\n                                        else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                            break;\r\n                                        }\r\n                                        time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                        time = time / 3600000;\r\n                                        if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                            light = light + time;\r\n                                        }\r\n                                        else  if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                            deep = deep + time;\r\n                                        }\r\n                                        total = total + time;\r\n                                    }\r\n                                    if(this.props.dataArr[i].values[j].ValidTime < this.props.date){\r\n                                        avgO[\"before\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"before\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"before\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"before\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"before\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    else{\r\n                                        avgO[\"after\"][\"light\"][\"sum\"] += light;\r\n                                        avgO[\"after\"][\"deep\"][\"sum\"] += deep;\r\n                                        avgO[\"after\"][\"total\"][\"sum\"] += total;\r\n                                        avgO[\"after\"][\"light\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"deep\"][\"counter\"] ++;\r\n                                        avgO[\"after\"][\"total\"][\"counter\"] ++;\r\n                                    }\r\n                                    continue;\r\n                                }\r\n                                if(finish[j].ValidTime < this.props.date){\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"before\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"before\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                    avgO[\"before\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                else{\r\n                                    if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                                        avgO[\"after\"][\"weather\"][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                        avgO[\"after\"][\"weather\"][\"counter\"] ++;\r\n                                        continue;\r\n                                    }\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"sum\"] += this.props.dataArr[i].values[j][\"Data\"];\r\n                                    avgO[\"after\"][this.props.dataArr[i].name][\"counter\"] ++;\r\n                                }\r\n                                if(!week){\r\n                                    dates.push(this.props.dataArr[i].values[j].ValidTime);\r\n                                    week = true;\r\n                                }\r\n                                continue;\r\n                            }\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(finish[j].ValidTime );\r\n                            }\r\n                            if(table[dateStr][this.props.dataArr[i].name] == null){\r\n                                table[dateStr][this.props.dataArr[i].name] = {};\r\n                                table[dateStr][this.props.dataArr[i].name][\"counter\"] = 0;\r\n                                table[dateStr][this.props.dataArr[i].name][\"sum\"] = 0;\r\n                            }\r\n                            if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                                let deep = 0, light = 0, total = 0, firstTime = 0;\r\n                                for(k = 0; k < this.props.dataArr[i].values[j][\"Data\"].length; k++){\r\n                                    if(k === 0){\r\n                                        firstTime = this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    }\r\n                                    else if( firstTime === this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"]){\r\n                                        break;\r\n                                    }\r\n                                    time = this.props.dataArr[i].values[j][\"Data\"][k][\"EndTime\"] - this.props.dataArr[i].values[j][\"Data\"][k][\"StartTime\"];\r\n                                    time = time / 3600000;\r\n                                    if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Light sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_LIGHT\"){\r\n                                        light = light + time;\r\n                                    }\r\n                                    else if(this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"Deep sleep\" || this.props.dataArr[i].values[j][\"Data\"][k][\"State\"] === \"SLEEP_DEEP\"){\r\n                                        deep = deep + time;\r\n                                    }\r\n                                    total = total + time;\r\n                                }\r\n                                if(!table[dateStr]){\r\n                                    table[dateStr] = {};\r\n                                }\r\n                                if(!table[dateStr][\"total\"]){\r\n                                    table[dateStr][\"light\"] = {};\r\n                                    table[dateStr][\"deep\"] = {};\r\n                                    table[dateStr][\"total\"] = {};\r\n                                    table[dateStr][\"light\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"total\"][\"counter\"] = 0;\r\n                                    table[dateStr][\"light\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"deep\"][\"sum\"] = 0;\r\n                                    table[dateStr][\"total\"][\"sum\"] = 0;\r\n                                }\r\n                                table[dateStr][\"light\"][\"sum\"] += light;\r\n                                table[dateStr][\"deep\"][\"sum\"] += deep;\r\n                                table[dateStr][\"total\"][\"sum\"] += total;\r\n                                table[dateStr][\"light\"][\"counter\"]++;\r\n                                table[dateStr][\"deep\"][\"counter\"]++;\r\n                                table[dateStr][\"total\"][\"counter\"]++;\r\n                                continue;\r\n                            }\r\n                            table[dateStr][this.props.dataArr[i].name][\"sum\"] += finish[j][\"Data\"];\r\n                            table[dateStr][this.props.dataArr[i].name][\"counter\"]++;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                var arr = [];\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (let [key,] of Object.entries(table)) {\r\n                        for (let [key1,] of Object.entries(table[key])) {\r\n                            table[key][key1][\"Data\"] = table[key][key1][\"sum\"] / table[key][key1][\"counter\"];\r\n                        }\r\n                    }\r\n                }\r\n                var exportCSV = [];\r\n                var last = Math.min();\r\n                for(i = 0; i < dates.length; i++){\r\n                    date = new Date(dates[i]);\r\n                    dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-')\r\n                    if(this.props.showDaily){\r\n                        var d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        var num = Math.floor((d.getTime() - this.props.date) / 86400000);\r\n                        if(num < 0){\r\n                            num++;\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        table[dateStr][\"num\"] = num;\r\n                        arr.push(\r\n                            <tr key={dateStr}>\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                { this.props.steps ? (table[dateStr][\"צעדים\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                {this.props.steps? ((dates[i] < this.props.date || !this.props.date)?((table[dateStr][\"השוואת צעדים לפני\"])?(<td className=\"before\">{ table[dateStr][\"השוואת צעדים לפני\"][\"Data\"].toFixed(2)}</td> ): ( <td className=\"before\">-</td> )):((table[dateStr][\"השוואת צעדים אחרי\"])? (<td className=\"after\">{ table[dateStr][\"השוואת צעדים אחרי\"][\"Data\"].toFixed(2)}</td> ):<td className=\"after\">-</td>)):null}\r\n                                { this.props.distance ? (table[dateStr][\"מרחק\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                {this.props.distance? ((dates[i] < this.props.date || !this.props.date)?((table[dateStr][\"השוואת מרחק לפני\"])?(<td className=\"before\">{ table[dateStr][\"השוואת מרחק לפני\"][\"Data\"].toFixed(2)}</td> ): ( <td className=\"before\">-</td> )):((table[dateStr][\"השוואת מרחק אחרי\"])? (<td className=\"after\">{ table[dateStr][\"השוואת מרחק אחרי\"][\"Data\"].toFixed(2)}</td> ):<td className=\"after\">-</td>)):null}\r\n                                { this.props.calories ? (table[dateStr][\"קלוריות\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                {this.props.calories? ((dates[i] < this.props.date || !this.props.date)?((table[dateStr][\"השוואת קלוריות לפני\"])?(<td className=\"before\">{ table[dateStr][\"השוואת קלוריות לפני\"][\"Data\"].toFixed(2)}</td> ): ( <td className=\"before\">-</td> )):((table[dateStr][\"השוואת קלוריות אחרי\"])? (<td className=\"after\">{ table[dateStr][\"השוואת קלוריות אחרי\"][\"Data\"].toFixed(2)}</td> ):<td className=\"after\">-</td>)):null}\r\n                                { this.props.weather ? (table[dateStr][\"מזג האוויר\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.sleep ? (table[dateStr][\"light\"] >= 0 ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"light\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"light\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.sleep ? (table[dateStr][\"deep\"] >= 0 ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"deep\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"deep\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                { this.props.sleep ? (table[dateStr][\"total\"] >= 0 ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"total\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"total\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                            </tr>\r\n                        )\r\n                    }\r\n                    else if(this.props.weekly || this.props.monthly){\r\n                        var o = new Date(this.props.date);\r\n                        d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        if(this.props.weekly){\r\n                            var sundayO = new Date(o.getTime() - o.getDay() * 86400000);\r\n                            sundayO.setHours(0,0,0,0);\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            sunday.setHours(0,0,0,0);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            num = Math.floor((sunday.getTime() - sundayO.getTime()) / 604800000);\r\n                        }\r\n                        else{\r\n                            var firstDay = new Date(d.getFullYear(), d.getMonth(), 1);\r\n                            var firstDayO = new Date(o.getFullYear(), o.getMonth(), 1);\r\n                            num = Math.floor((firstDay.getTime() - firstDayO.getTime()) / 2419200000);\r\n                            if(num < 0){\r\n                                num++;\r\n                            }\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            arr.push(\r\n                                <tr key={dateStr + \"before\"}>\r\n                                    <td className=\"before\">{0}</td>\r\n                                    <td className=\"before\">{dateStr}</td>\r\n                                    { this.props.steps ? (avgO[\"before\"][\"צעדים\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"צעדים\"][\"sum\"] / avgO[\"before\"][\"צעדים\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.distance ? (avgO[\"before\"][\"מרחק\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"מרחק\"][\"sum\"] / avgO[\"before\"][\"מרחק\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.calories ? (avgO[\"before\"][\"קלוריות\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"קלוריות\"][\"sum\"] / avgO[\"before\"][\"קלוריות\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.weather ? (avgO[\"before\"][\"weather\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"weather\"][\"sum\"] / avgO[\"before\"][\"weather\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"before\"][\"light\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"light\"][\"sum\"] / avgO[\"before\"][\"light\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"before\"][\"deep\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"deep\"][\"sum\"] / avgO[\"before\"][\"deep\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"before\"][\"total\"][\"counter\"] ? (<td className=\"before\">{ (avgO[\"before\"][\"total\"][\"sum\"] / avgO[\"before\"][\"total\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"before\">-</td>) : null}\r\n                                </tr>\r\n                            )\r\n                            arr.push(\r\n                                <tr key={dateStr + \"after\"}>\r\n                                    <td className=\"after\">{0}</td>\r\n                                    <td className=\"after\">{dateStr}</td>\r\n                                    { this.props.steps ? (avgO[\"after\"][\"צעדים\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"צעדים\"][\"sum\"] / avgO[\"after\"][\"צעדים\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.distance ? (avgO[\"after\"][\"מרחק\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"מרחק\"][\"sum\"] / avgO[\"after\"][\"מרחק\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.calories ? (avgO[\"after\"][\"קלוריות\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"קלוריות\"][\"sum\"] / avgO[\"after\"][\"קלוריות\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.weather ? (avgO[\"after\"][\"weather\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"weather\"][\"sum\"] / avgO[\"after\"][\"weather\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"after\"][\"light\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"light\"][\"sum\"] / avgO[\"after\"][\"light\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"after\"][\"deep\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"deep\"][\"sum\"] / avgO[\"after\"][\"deep\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                    { this.props.sleep ? (avgO[\"after\"][\"total\"][\"counter\"] ? (<td className=\"after\">{ (avgO[\"after\"][\"total\"][\"sum\"] / avgO[\"after\"][\"total\"][\"counter\"]).toFixed(2)}</td> ) : <td className=\"after\">-</td>) : null}\r\n                                </tr>\r\n                            )\r\n                        }\r\n                        else{\r\n                            table[dateStr][\"num\"] = num;\r\n                            arr.push(\r\n                                <tr key={dateStr}>\r\n                                    {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                    {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                    { this.props.steps ? (table[dateStr][\"צעדים\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"צעדים\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    {this.props.steps? ((dates[i] < this.props.date || !this.props.date)?((table[dateStr][\"השוואת צעדים לפני\"])?(<td className=\"before\">{ table[dateStr][\"השוואת צעדים לפני\"][\"Data\"].toFixed(2)}</td> ): ( <td className=\"before\">-</td> )):((table[dateStr][\"השוואת צעדים אחרי\"])? (<td className=\"after\">{ table[dateStr][\"השוואת צעדים אחרי\"][\"Data\"].toFixed(2)}</td> ):<td className=\"after\">-</td>)):null}\r\n                                    { this.props.distance ? (table[dateStr][\"מרחק\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מרחק\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    {this.props.distance? ((dates[i] < this.props.date || !this.props.date)?((table[dateStr][\"השוואת מרחק לפני\"])?(<td className=\"before\">{ table[dateStr][\"השוואת מרחק לפני\"][\"Data\"].toFixed(2)}</td> ): ( <td className=\"before\">-</td> )):((table[dateStr][\"השוואת מרחק אחרי\"])? (<td className=\"after\">{ table[dateStr][\"השוואת מרחק אחרי\"][\"Data\"].toFixed(2)}</td> ):<td className=\"after\">-</td>)):null}\r\n                                    { this.props.calories ? (table[dateStr][\"קלוריות\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"קלוריות\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    {this.props.calories? ((dates[i] < this.props.date || !this.props.date)?((table[dateStr][\"השוואת קלוריות לפני\"])?(<td className=\"before\">{ table[dateStr][\"השוואת קלוריות לפני\"][\"Data\"].toFixed(2)}</td> ): ( <td className=\"before\">-</td> )):((table[dateStr][\"השוואת קלוריות אחרי\"])? (<td className=\"after\">{ table[dateStr][\"השוואת קלוריות אחרי\"][\"Data\"].toFixed(2)}</td> ):<td className=\"after\">-</td>)):null}\r\n                                    { this.props.weather ? (table[dateStr][\"מזג האוויר\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"מזג האוויר\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.sleep ? (table[dateStr][\"light\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"light\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"light\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.sleep ? (table[dateStr][\"deep\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"deep\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"deep\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                    { this.props.sleep ? (table[dateStr][\"total\"] ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"total\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"total\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>) ) : null}\r\n                                </tr>\r\n                            )\r\n                        }\r\n                    }\r\n                    var line = {};\r\n                    line[\"תאריך\"] = dateStr;\r\n                    var z = 0;\r\n                    if(dateStr === dateOStr){\r\n                        if(this.props.date){\r\n                            if(this.props.weekly){\r\n                                line[\"מספר שבוע\"] = z;\r\n                            }\r\n                            else{\r\n                                line[\"מספר חודש\"] = z;\r\n                            }\r\n                        }\r\n                        if(this.props.steps && avgO[\"before\"][\"צעדים\"][\"counter\"]){\r\n                            line[\"צעדים\"] = (avgO[\"before\"][\"צעדים\"][\"sum\"] / avgO[\"before\"][\"צעדים\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.distance && avgO[\"before\"][\"מרחק\"][\"counter\"]){\r\n                            line[\"מרחק\"] = (avgO[\"before\"][\"מרחק\"][\"sum\"] / avgO[\"before\"][\"מרחק\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.calories && avgO[\"before\"][\"קלוריות\"][\"counter\"]){\r\n                            line[\"קלוריות\"] = (avgO[\"before\"][\"קלוריות\"][\"sum\"] / avgO[\"before\"][\"קלוריות\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.weather && avgO[\"before\"][\"weather\"][\"counter\"]){\r\n                            line[\"מזג האוויר\"] = (avgO[\"before\"][\"weather\"][\"sum\"] / avgO[\"before\"][\"weather\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"before\"][\"light\"][\"counter\"]){\r\n                            line[\"שעות שינה קלה\"] = (avgO[\"before\"][\"light\"][\"sum\"] / avgO[\"before\"][\"light\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"before\"][\"deep\"][\"counter\"]){\r\n                            line[\"שעות שינה עמוקה\"] = (avgO[\"before\"][\"deep\"][\"sum\"] / avgO[\"before\"][\"deep\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"before\"][\"total\"][\"counter\"]){\r\n                            line[\"סך כל שעות השינה\"] = (avgO[\"before\"][\"total\"][\"sum\"] / avgO[\"before\"][\"total\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        exportCSV.push(line);\r\n                        line = {};\r\n                        if(this.props.date){\r\n                            if(this.props.weekly){\r\n                                line[\"מספר שבוע\"] = z;\r\n                            }\r\n                            else{\r\n                                line[\"מספר חודש\"] = z;\r\n                            }\r\n                        }\r\n                        line[\"תאריך\"] = dateStr;\r\n                        if(this.props.steps && avgO[\"after\"][\"צעדים\"][\"counter\"]){\r\n                            line[\"צעדים\"] = (avgO[\"after\"][\"צעדים\"][\"sum\"] / avgO[\"after\"][\"צעדים\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.distance && avgO[\"after\"][\"מרחק\"][\"counter\"]){\r\n                            line[\"מרחק\"] = (avgO[\"after\"][\"מרחק\"][\"sum\"] / avgO[\"after\"][\"מרחק\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.calories && avgO[\"after\"][\"קלוריות\"][\"counter\"]){\r\n                            line[\"קלוריות\"] = (avgO[\"after\"][\"קלוריות\"][\"sum\"] / avgO[\"after\"][\"קלוריות\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.weather && avgO[\"after\"][\"weather\"][\"counter\"]){\r\n                            line[\"מזג האוויר\"] = (avgO[\"after\"][\"weather\"][\"sum\"] / avgO[\"after\"][\"weather\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"after\"][\"light\"][\"counter\"]){\r\n                            line[\"שעות שינה קלה\"] = (avgO[\"after\"][\"light\"][\"sum\"] / avgO[\"after\"][\"light\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"after\"][\"deep\"][\"counter\"]){\r\n                            line[\"שעות שינה עמוקה\"] = (avgO[\"after\"][\"deep\"][\"sum\"] / avgO[\"after\"][\"deep\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(this.props.sleep && avgO[\"after\"][\"total\"][\"counter\"]){\r\n                            line[\"סך כל שעות השינה\"] = (avgO[\"after\"][\"total\"][\"sum\"] / avgO[\"after\"][\"total\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        exportCSV.push(line);\r\n                        continue;\r\n                    }\r\n                    if(this.props.date){\r\n                        if(this.props.showDaily){\r\n                            line[\"מספר יום\"] = table[dateStr][\"num\"]\r\n                        }\r\n                        else if(this.props.weekly){\r\n                            line[\"מספר שבוע\"] = table[dateStr][\"num\"]\r\n                        }\r\n                        else{\r\n                            line[\"מספר חודש\"] = table[dateStr][\"num\"]\r\n                        }\r\n                    }\r\n\r\n                    if(this.props.steps){\r\n                        if(table[dateStr][\"צעדים\"])\r\n                            line[\"צעדים\"] = table[dateStr][\"צעדים\"][\"Data\"];\r\n\r\n                        if (dates[i] < this.props.date || !this.props.date){\r\n                            if ((table[dateStr][\"השוואת צעדים לפני\"]))\r\n                                line[\"צעדי קבוצת השוואה\"] =table[dateStr][\"השוואת צעדים לפני\"][\"Data\"];\r\n                            else\r\n                                line[\"צעדי קבוצת השוואה\"]=\"\";\r\n                        }\r\n                        else{\r\n                            if ((table[dateStr][\"השוואת צעדים אחרי\"]))\r\n                                line[\"צעדי קבוצת השוואה\"] =table[dateStr][\"השוואת צעדים אחרי\"][\"Data\"];\r\n                            else\r\n                                line[\"צעדי קבוצת השוואה\"]=\"\";\r\n                        }\r\n\r\n                    }\r\n\r\n                    if(this.props.distance ){\r\n                        if (table[dateStr][\"מרחק\"])\r\n                            line[\"מרחק\"] = table[dateStr][\"מרחק\"][\"Data\"];\r\n\r\n                        if (dates[i] < this.props.date || !this.props.date){\r\n                            if ((table[dateStr][\"השוואת מרחק לפני\"]))\r\n                                line[\"מרחק קבוצת השוואה\"] =table[dateStr][\"השוואת מרחק לפני\"][\"Data\"];\r\n                            else\r\n                                line[\"מרחק קבוצת השוואה\"]=\"\";\r\n                        }\r\n                        else{\r\n                            if ((table[dateStr][\"השוואת מרחק אחרי\"]))\r\n                                line[\"מרחק קבוצת השוואה\"] =table[dateStr][\"השוואת מרחק אחרי\"][\"Data\"];\r\n                            else\r\n                                line[\"מרחק קבוצת השוואה\"]=\"\";\r\n                        }\r\n\r\n                    }\r\n                    if(this.props.calories ){\r\n                        if (table[dateStr][\"קלוריות\"])\r\n                            line[\"קלוריות\"] = table[dateStr][\"קלוריות\"][\"Data\"];\r\n\r\n                        if (dates[i] < this.props.date || !this.props.date){\r\n                            if ((table[dateStr][\"השוואת קלוריות לפני\"]))\r\n                                line[\"קלוריות קבוצת השוואה\"] =table[dateStr][\"השוואת קלוריות לפני\"][\"Data\"];\r\n                            else\r\n                                line[\"קלוריות קבוצת השוואה\"]=\"\";\r\n                        }\r\n                        else{\r\n                            if ((table[dateStr][\"השוואת קלוריות אחרי\"]))\r\n                                line[\"קלוריות קבוצת השוואה\"] =table[dateStr][\"השוואת קלוריות אחרי\"][\"Data\"];\r\n                            else\r\n                                line[\"קלוריות קבוצת השוואה\"]=\"\";\r\n                        }\r\n\r\n                    }\r\n                    if(this.props.weather && table[dateStr][\"מזג האוויר\"]){\r\n                        line[\"מזג האוויר\"] = table[dateStr][\"מזג האוויר\"][\"Data\"];\r\n                    }\r\n                    if(this.props.sleep && table[dateStr][\"light\"] && this.props.showDaily){\r\n                        line[\"שעות שינה קלה\"] = table[dateStr][\"light\"];\r\n                        line[\"שעות שינה עמוקה\"] = table[dateStr][\"deep\"];\r\n                        line[\"סך כל שעות השינה\"] = table[dateStr][\"total\"];\r\n\r\n                    }\r\n                    if(this.props.sleep && table[dateStr][\"light\"] && !this.props.showDaily){\r\n                        line[\"שעות שינה קלה\"] = table[dateStr][\"light\"][\"Data\"];\r\n                        line[\"שעות שינה עמוקה\"] = table[dateStr][\"deep\"][\"Data\"];\r\n                        line[\"סך כל שעות השינה\"] = table[dateStr][\"total\"][\"Data\"];\r\n                    }\r\n                    exportCSV.push(line);\r\n                }\r\n\r\n            }\r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n        return(\r\n            <div>\r\n                {this.props.ready ? <div className=\"center\">\r\n                    {noData ? <h4>לא קיים מידע על המשתמש</h4> :\r\n                        <table style={{width: \"100%\"}} id=\"mdd\" className=\"tabels\" align=\"center\">\r\n                            <tbody>\r\n                            <tr>\r\n                                { this.props.dataArr.length > 0 && this.props.showDaily ? <th>מספר יום</th> : null}\r\n                                { this.props.dataArr.length > 0 && this.props.weekly ? <th>מספר שבוע</th> : null}\r\n                                { this.props.dataArr.length > 0 && this.props.monthly ? <th>מספר חודש</th> : null}\r\n                                { this.props.dataArr.length > 0 ? <th>תאריך</th> : null}\r\n                                { this.props.steps ? <th>צעדים</th> : null }\r\n                                { this.props.steps ? <th>צעדי קבוצת השוואה</th> : null }\r\n                                { this.props.distance ? <th>מרחק</th> : null }\r\n                                { this.props.distance ? <th>מרחק קבוצת השוואה</th> : null }\r\n                                { this.props.calories ? <th>קלוריות</th> : null }\r\n                                { this.props.calories ? <th>קלוריות קבוצת השוואה</th> : null }\r\n                                { this.props.weather ? <th>מזג האוויר</th> : null }\r\n                                { this.props.sleep ? <th>שעות שינה קלה</th> : null }\r\n                                { this.props.sleep ? <th>שעות שינה עמוקה</th> : null }\r\n                                { this.props.sleep ? <th>סך כל שעות השינה</th> : null }\r\n                            </tr>\r\n                            {arr}\r\n                            </tbody>\r\n                        </table>}\r\n                    { this.props.dataArr.length > 0 && !noData ? <ExportCSV csvData={exportCSV} fileName={this.props.name + \" מדדים\"}/> : null}\r\n\r\n                </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TableComp","import React, {Component} from \"react\"\r\nimport {ExportCSV} from \"./ExportCSV\"\r\nimport \"./Table.css\"\r\n\r\n\r\nclass TableAns extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.handleChange = this.handleChange.bind(this)\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n    \r\n    \r\n\r\n\r\n    render() {\r\n        if(this.props.ready){\r\n            var noData = false;\r\n            if(this.props.data.length > 0){\r\n                var i, week = false;\r\n                var arr = []\r\n                var dates = []\r\n                let data = this.props.data;\r\n                var table = {};\r\n                var exportCSV = [];\r\n                var dateO = new Date(this.props.date), dateOStr;\r\n                var avgO = {};\r\n                avgO[\"before\"] = {sum: 0, counter: 0, text: \"\"};\r\n                avgO[\"after\"] = {sum: 0, counter: 0, text: \"\"};\r\n                if(this.props.weekly){\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var last = Math.min();\r\n                for(i = 0; i < data.length; i++){\r\n                    if(this.props.showDaily){\r\n                        var date = new Date(data[i].ValidTime);\r\n                        var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-');\r\n                        var text = \"\";\r\n                        for(var j = 0 ; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                            if(data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                text = text + \"לא נטלתי, \"\r\n                            }\r\n                            else if(data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                text = text + \"בסיסית, \"\r\n                            }\r\n                            else if(data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                text = text + \"מתקדמת, \"\r\n                            }\r\n                            else if(data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                text = text + \"נרקוטית, \"\r\n                            }\r\n                        }\r\n                        text = text.slice(0, -2);\r\n                        var d = new Date(data[i].ValidTime);\r\n                        d.setHours(0,0,0,0);\r\n                        dateO.setHours(0,0,0,0);\r\n                        var num = Math.floor((d.getTime() - this.props.date) / 86400000);\r\n                        if(num < 0){\r\n                            num++;\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        arr.push(\r\n                            <tr key={i}>\r\n                                {(data[i].ValidTime < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                {(data[i].ValidTime < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                {(data[i].ValidTime < this.props.date || !this.props.date) ? <td className=\"before\">{data[i][\"Answers\"][0][\"AnswerID\"][0]}</td> : <td className=\"after\">{data[i][\"Answers\"][0][\"AnswerID\"][0]}</td>}\r\n                                {(data[i].ValidTime < this.props.date || !this.props.date) ? <td className=\"before\">{text}</td> : <td className=\"after\">{text}</td>}\r\n                            </tr>\r\n                        )\r\n                        var line = {};\r\n                        line[\"מספר יום\"] = num;\r\n                        line[\"תאריך\"] = dateStr;\r\n                        line[\"רמת כאב\"] = data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                        line[\"תרופה\"] = text;\r\n                        exportCSV.push(line);\r\n                    }\r\n                    else if(this.props.weekly){\r\n                        date = new Date(data[i].ValidTime)\r\n                        var dayOfWeek = date.getDay();\r\n                        var sunday = new Date(data[i].ValidTime - dayOfWeek * 86400000);\r\n                        var saturday = new Date(sunday.getTime() + 518400000);\r\n                        dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                for(j = 0; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                                    if(!avgO[\"before\"][\"text\"].includes(\"לא נטלתי\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                        avgO[\"before\"][\"text\"] += \"לא נטלתי, \"\r\n                                    }\r\n                                    else if(!avgO[\"before\"][\"text\"].includes(\"בסיסית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                        avgO[\"before\"][\"text\"] += \"בסיסית, \"\r\n                                    }\r\n                                    else if(!avgO[\"before\"][\"text\"].includes(\"מתקדמת\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                        avgO[\"before\"][\"text\"] += \"מתקדמת, \"\r\n                                    }\r\n                                    else if(!avgO[\"before\"][\"text\"].includes(\"נרקוטית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                        avgO[\"before\"][\"text\"] += \"נרקוטית, \"\r\n                                    }\r\n                                }\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                for(j = 0; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                                    if(!avgO[\"after\"][\"text\"].includes(\"לא נטלתי\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                        avgO[\"after\"][\"text\"] += \"לא נטלתי, \"\r\n                                    }\r\n                                    else if(!avgO[\"after\"][\"text\"].includes(\"בסיסית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                        avgO[\"after\"][\"text\"] += \"בסיסית, \"\r\n                                    }\r\n                                    else if(!avgO[\"after\"][\"text\"].includes(\"מתקדמת\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                        avgO[\"after\"][\"text\"] += \"מתקדמת, \"\r\n                                    }\r\n                                    else if(!avgO[\"after\"][\"text\"].includes(\"נרקוטית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                        avgO[\"after\"][\"text\"] += \"נרקוטית, \"\r\n                                    }\r\n                                }\r\n                            }\r\n                            if(!week){\r\n                                dates.push(data[i].ValidTime);\r\n                                week = true;\r\n                            }\r\n                            continue;\r\n                        }\r\n                        if(table[dateStr] == null){\r\n                            table[dateStr] = {};\r\n                            table[dateStr][\"sum\"] = 0;\r\n                            table[dateStr][\"counter\"] = 0;\r\n                            table[dateStr][\"text\"] = \"\";\r\n                            dates.push(data[i].ValidTime);\r\n                        }\r\n                        table[dateStr][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                        table[dateStr][\"counter\"]++;\r\n                        for(j = 0 ; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                            if(!table[dateStr][\"text\"].includes(\"לא נטלתי\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                table[dateStr][\"text\"] += \"לא נטלתי, \"\r\n                            }\r\n                            else if(!table[dateStr][\"text\"].includes(\"בסיסית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                table[dateStr][\"text\"] += \"בסיסית, \"\r\n                            }\r\n                            else if(!table[dateStr][\"text\"].includes(\"מתקדמת\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                table[dateStr][\"text\"] += \"מתקדמת, \"\r\n                            }\r\n                            else if(!table[dateStr][\"text\"].includes(\"נרקוטית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                table[dateStr][\"text\"] += \"נרקוטית, \"\r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n                    else if(this.props.monthly){\r\n                        date = new Date(data[i].ValidTime)\r\n                        dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                for(j = 0; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                                    if(!avgO[\"before\"][\"text\"].includes(\"לא נטלתי\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                        avgO[\"before\"][\"text\"] += \"לא נטלתי, \"\r\n                                    }\r\n                                    else if(!avgO[\"before\"][\"text\"].includes(\"בסיסית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                        avgO[\"before\"][\"text\"] += \"בסיסית, \"\r\n                                    }\r\n                                    else if(!avgO[\"before\"][\"text\"].includes(\"מתקדמת\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                        avgO[\"before\"][\"text\"] += \"מתקדמת, \"\r\n                                    }\r\n                                    else if(!avgO[\"before\"][\"text\"].includes(\"נרקוטית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                        avgO[\"before\"][\"text\"] += \"נרקוטית, \"\r\n                                    }\r\n                                }\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                for(j = 0; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                                    if(!avgO[\"after\"][\"text\"].includes(\"לא נטלתי\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                        avgO[\"after\"][\"text\"] += \"לא נטלתי, \"\r\n                                    }\r\n                                    else if(!avgO[\"after\"][\"text\"].includes(\"בסיסית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                        avgO[\"after\"][\"text\"] += \"בסיסית, \"\r\n                                    }\r\n                                    else if(!avgO[\"after\"][\"text\"].includes(\"מתקדמת\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                        avgO[\"after\"][\"text\"] += \"מתקדמת, \"\r\n                                    }\r\n                                    else if(!avgO[\"after\"][\"text\"].includes(\"נרקוטית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                        avgO[\"after\"][\"text\"] += \"נרקוטית, \"\r\n                                    }\r\n                                }\r\n                            }\r\n                            if(!week){\r\n                                dates.push(data[i].ValidTime);\r\n                                week = true;\r\n                            }\r\n                            continue;\r\n                        }\r\n                        if(table[dateStr] == null){\r\n                            table[dateStr] = {};\r\n                            table[dateStr][\"sum\"] = 0;\r\n                            table[dateStr][\"counter\"] = 0;\r\n                            table[dateStr][\"text\"] = \"\";\r\n                            dates.push(data[i].ValidTime);\r\n                        }\r\n                        table[dateStr][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                        table[dateStr][\"counter\"]++;\r\n                        for(j = 0 ; j < data[i][\"Answers\"][1][\"AnswerID\"].length; j++){\r\n                            if(!table[dateStr][\"text\"].includes(\"לא נטלתי\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 0){\r\n                                table[dateStr][\"text\"] += \"לא נטלתי, \"\r\n                            }\r\n                            else if(!table[dateStr][\"text\"].includes(\"בסיסית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 1){\r\n                                table[dateStr][\"text\"] += \"בסיסית, \"\r\n                            }\r\n                            else if(!table[dateStr][\"text\"].includes(\"מתקדמת\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 2){\r\n                                table[dateStr][\"text\"] += \"מתקדמת, \"\r\n                            }\r\n                            else if(!table[dateStr][\"text\"].includes(\"נרקוטית\") && data[i][\"Answers\"][1][\"AnswerID\"][j] === 3){\r\n                                table[dateStr][\"text\"] += \"נרקוטית, \"\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                dates = dates.sort();\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (let [key,] of Object.entries(table)) {\r\n                        table[key][\"Data\"] = table[key][\"sum\"] / table[key][\"counter\"];\r\n                    }\r\n                    var o = new Date(this.props.date);\r\n                    for(i = 0; i < dates.length; i++){\r\n                        date = new Date(dates[i]);\r\n                        d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        if(this.props.weekly){\r\n                            var sundayO = new Date(o.getTime() - o.getDay() * 86400000);\r\n                            sundayO.setHours(0,0,0,0);\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            sunday.setHours(0,0,0,0);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            num = Math.floor((sunday.getTime() - sundayO.getTime()) / 604800000);\r\n                        }\r\n                        else{\r\n                            var firstDay = new Date(d.getFullYear(), d.getMonth(), 1);\r\n                            var firstDayO = new Date(o.getFullYear(), o.getMonth(), 1);\r\n                            num = Math.floor((firstDay.getTime() - firstDayO.getTime()) / 2419200000);\r\n                            if(num < 0){\r\n                                num++;\r\n                            }\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            avgO[\"before\"][\"text\"] =  avgO[\"before\"][\"text\"].slice(0, -2);\r\n                            avgO[\"after\"][\"text\"] =  avgO[\"after\"][\"text\"].slice(0, -2);\r\n                            arr.push(\r\n                                <tr key={dateStr + \"before\"}>\r\n                                    <td className=\"before\">{num}</td>\r\n                                    <td className=\"before\">{dateStr}</td>\r\n                                    {avgO[\"before\"][\"counter\"] ? <td className=\"before\">{(avgO[\"before\"][\"sum\"] / avgO[\"before\"][\"counter\"]).toFixed(2)}</td> : <td className=\"before\">-</td>}\r\n                                    {avgO[\"before\"][\"counter\"] ? <td className=\"before\">{avgO[\"before\"][\"text\"]}</td> : <td className=\"before\">-</td>}\r\n                                </tr>\r\n                            )\r\n                            arr.push(\r\n                                <tr key={dateStr + \"after\"}>\r\n                                    <td className=\"after\">{num}</td>\r\n                                    <td className=\"after\">{dateStr}</td>\r\n                                    {avgO[\"after\"][\"counter\"] ? <td className=\"after\">{(avgO[\"after\"][\"sum\"] / avgO[\"after\"][\"counter\"]).toFixed(2)}</td> : <td className=\"after\">-</td>}\r\n                                    {avgO[\"after\"][\"counter\"] ? <td className=\"after\">{avgO[\"after\"][\"text\"]}</td> : <td className=\"after\">-</td>}\r\n                                </tr>\r\n                            )\r\n                            var z = 0;\r\n                            line = {};\r\n                            if(this.props.date){\r\n                                if(this.props.weekly){\r\n                                    line[\"מספר שבוע\"] = z;\r\n                                }\r\n                                else{\r\n                                    line[\"מספר חודש\"] = z;\r\n                                }\r\n                            }\r\n                            line[\"תאריך\"] = dateStr;\r\n                            line[\"רמת כאב\"] = (avgO[\"before\"][\"sum\"] / avgO[\"before\"][\"counter\"]).toFixed(2);\r\n                            line[\"תרופות שהיו בשימוש\"] = avgO[\"before\"][\"text\"];\r\n                            exportCSV.push(line);\r\n                            line = {};\r\n                            if(this.props.date){\r\n                                if(this.props.weekly){\r\n                                    line[\"מספר שבוע\"] = z;\r\n                                }\r\n                                else{\r\n                                    line[\"מספר חודש\"] = z;\r\n                                }\r\n                            }\r\n                            line[\"תאריך\"] = dateStr;\r\n                            line[\"רמת כאב\"] = (avgO[\"after\"][\"sum\"] / avgO[\"after\"][\"counter\"]).toFixed(2);\r\n                            line[\"תרופות שהיו בשימוש\"] = avgO[\"after\"][\"text\"];\r\n                            exportCSV.push(line);\r\n                            continue;\r\n                        }\r\n                        table[dateStr][\"text\"] =  table[dateStr][\"text\"].slice(0, -2);\r\n                        arr.push(\r\n                            <tr key={dateStr}>\r\n                                 {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{table[dateStr][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{table[dateStr][\"Data\"].toFixed(2)}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{table[dateStr][\"text\"]}</td> : <td className=\"after\">{table[dateStr][\"text\"]}</td>}\r\n                            </tr>\r\n                        )\r\n                        line = {};\r\n                        if(this.props.date){\r\n                            if(this.props.weekly){\r\n                                line[\"מספר שבוע\"] = num;\r\n                            }\r\n                            else{\r\n                                line[\"מספר חודש\"] = num;\r\n                            }\r\n                        }\r\n                        line[\"תאריך\"] = dateStr;\r\n                        line[\"רמת כאב\"] = table[dateStr];\r\n                        if(this.props.showDaily){\r\n                            line[\"תרופה\"] = text;\r\n                        }\r\n                        else{\r\n                            line[\"תרופות שהיו בשימוש\"] =  table[dateStr][\"text\"];\r\n                        }\r\n                        exportCSV.push(line);\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n        return(\r\n            <div>\r\n                {this.props.ready ? <div>{noData ? <h4>לא קיים מידע על המשתמש</h4> :\r\n                    <div className=\"center\">\r\n                    <table style={{width: \"100%\"}} id=\"daily\" className=\"tabels\">\r\n                        <tbody>\r\n                            <tr>\r\n                                { this.props.showDaily ? <th>מספר יום</th> : null}\r\n                                { this.props.weekly ? <th>מספר שבוע</th> : null} \r\n                                { this.props.monthly ? <th>מספר חודש</th> : null}\r\n                                <th>תאריך</th>\r\n                                <th>רמת כאב</th>\r\n                                {this.props.showDaily ? <th>תרופה</th> : <th>תרופות שהיו בשימוש</th>}\r\n                            </tr>\r\n                            {arr}\r\n                        </tbody>\r\n                    </table>\r\n                    <ExportCSV csvData={exportCSV} fileName={this.props.name + \" שאלון יומי\"}/>\r\n                    </div>}  </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TableAns","import React, {Component} from \"react\"\r\n//import LineChart from 'react-linechart';\r\nimport {LineChart} from 'react-chartkick'\r\nimport 'chart.js'\r\n\r\nclass Graph extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.sort_by_key = function(array, key)\r\n        {\r\n         return array.sort(function(a, b)\r\n         {\r\n          var x = a[key]; var y = b[key];\r\n          return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n         });\r\n        }\r\n    }\r\n\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n\r\n    render() {\r\n        if(this.props.ready){\r\n            var noData = false;\r\n            if(this.props.data && this.props.data.length > 0){\r\n                var data = this.sort_by_key(this.props.data, \"Timestamp\")\r\n                var points = {};\r\n                var min  = 0, week = false;\r\n                var oDay = new Date(this.props.date);\r\n                var line = {};\r\n                var table = {};\r\n                var dates = [];\r\n                var dateO, dateOStr;\r\n                if(this.props.weekly){\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var avgO = {};\r\n                avgO[\"before\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"]= {sum: 0, counter: 0};\r\n                for(var i = 0; i < data.length; i++){\r\n                    if(data[i].Data < 0){\r\n                        min = -1;\r\n                    }\r\n                    if(this.props.showDaily){\r\n                        var date = new Date(data[i].ValidTime)\r\n                        var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short', year:\"numeric\"}).replace(/ /g, '-')\r\n                        if(date <= oDay || oDay.valueOf() == 0 ||oDay.valueOf() == null){\r\n                            points[dateStr] = data[i].Data.toFixed(2);\r\n                        }\r\n                        if(date >= oDay && oDay.valueOf() != 0){\r\n                            line[dateStr] = data[i].Data.toFixed(2)\r\n                        }\r\n                    }\r\n                    else if(this.props.weekly){\r\n                        date = new Date(data[i].ValidTime);\r\n                        var dayOfWeek = date.getDay();\r\n                        var sunday = new Date(data[i].ValidTime - dayOfWeek * 86400000);\r\n                        var saturday = new Date(sunday.getTime() + 518400000);\r\n                        dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"sum\"] += data[i].Data;\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"sum\"] += data[i].Data; \r\n                            }\r\n                            if(!week){\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        }\r\n                        else{ \r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"counter\"] = 0;\r\n                                table[dateStr][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"sum\"] += data[i].Data;\r\n                            table[dateStr][\"counter\"]++;\r\n                        }\r\n                    }\r\n                    else if(this.props.monthly){\r\n                        date = new Date(data[i].ValidTime);;\r\n                        dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"sum\"] += data[i].Data;\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"sum\"] += data[i].Data; \r\n                            }\r\n                            if(!week){\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"counter\"] = 0;\r\n                                table[dateStr][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"sum\"] += data[i].Data;\r\n                            table[dateStr][\"counter\"]++;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (i = 0; i < dates.length; i++) {\r\n                        date = new Date(dates[i]);\r\n                        if(this.props.weekly){\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        }\r\n                        else{\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            points[dateStr] = (avgO[\"before\"][\"sum\"] /  avgO[\"before\"][\"counter\"]).toFixed(2);\r\n                            line[dateStr] = (avgO[\"after\"][\"sum\"] /  avgO[\"after\"][\"counter\"]).toFixed(2);\r\n                            continue;\r\n                        }\r\n                        if(date <= oDay || oDay.valueOf() == 0 ||oDay == null){\r\n                            points[dateStr] = (table[dateStr][\"sum\"] /  table[dateStr][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(date >= oDay && oDay.valueOf() != 0){\r\n                            line[dateStr] = (table[dateStr][\"sum\"] /  table[dateStr][\"counter\"]).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n                var dataX = [\r\n                    {\"name\": \"לפני הניתוח\", \"data\": points},\r\n                    {\"name\": \"אחרי הניתוח\", \"data\": line}\r\n                ];\r\n            }\r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n\t\treturn (\r\n            <div>\r\n                {this.props.ready ? <div>\r\n                    <div className=\"App\">\r\n                        <h1>{this.props.name}</h1>\r\n                        {noData ? <h4>לא קיים מידע על המשתמש</h4> : <LineChart download={true} data={dataX} min={min} />}\r\n                    </div>\t\r\n                </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Graph","import React, {Component} from \"react\"\r\nimport {ExportCSV} from \"./ExportCSV\"\r\n//import \"./TablePer.css\"\r\n\r\n\r\nclass TablePer extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n    \r\n    \r\n\r\n\r\n    render() {\r\n        require(\"./Table.css\");\r\n        if(this.props.ready){\r\n            var noData = true;\r\n            for(var  i = 0; i < this.props.data.length; i++){\r\n                if( this.props.data[i].data.length > 0 ){\r\n                    noData = false;\r\n                }\r\n            }\r\n            if(!noData){\r\n                var table = {};\r\n                var data = this.props.data;\r\n                var j, week = false;\r\n                var dates = [];\r\n                var dic = {};\r\n                var dateO, dateOStr;\r\n                var avgO = {};\r\n                avgO[\"before\"] = {\"1\": {}, \"2\": {}, \"3\": {}, \"4\": {}, \"5\": {}, \"6\": 0};\r\n                avgO[\"after\"] = {\"1\": {}, \"2\": {}, \"3\": {}, \"4\": {}, \"5\": {}, \"6\": 0};\r\n                avgO[\"before\"][\"1\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"2\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"3\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"4\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"5\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"6\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"1\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"2\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"3\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"4\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"5\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"6\"] = {sum: 0, counter: 0};\r\n                if(this.props.weekly){\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                for(i = 0; i < data.length; i++){\r\n                    for(j = 0; j < data[i].data.length; j++){\r\n                        if(this.props.showDaily){\r\n                            var date = new Date(data[i].data[j].ValidTime)\r\n                            var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-')\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(data[i].data[j].ValidTime);\r\n                            }\r\n                            table[dateStr][data[i].data[j].QuestionnaireID] = data[i].data[j].Score;\r\n                            dic[data[i].data[j].QuestionnaireID] = true;\r\n                        }\r\n                        else if(this.props.weekly){\r\n                            dic[data[i].data[j].QuestionnaireID] = true;\r\n                            date = new Date(data[i].data[j].ValidTime)\r\n                            var dayOfWeek = date.getDay();\r\n                            var sunday = new Date(data[i].data[j].ValidTime - dayOfWeek * 86400000);\r\n                            var saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            if(dateOStr === dateStr){\r\n                                if(data[i].data[j].ValidTime < this.props.date){\r\n                                    avgO[\"before\"][data[i].data[j].QuestionnaireID][\"sum\"] += data[i].data[j].Score;\r\n                                    avgO[\"before\"][data[i].data[j].QuestionnaireID][\"counter\"]++;\r\n                                }\r\n                                else{\r\n                                    avgO[\"after\"][data[i].data[j].QuestionnaireID][\"sum\"] += data[i].data[j].Score;\r\n                                    avgO[\"after\"][data[i].data[j].QuestionnaireID][\"counter\"]++;\r\n                                }\r\n                                if(!week){\r\n                                    dates.push(data[i].data[j].ValidTime);\r\n                                    week = true;\r\n                                }\r\n                                continue;\r\n                            }\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(data[i].data[j].ValidTime);\r\n                            }\r\n                            if(table[dateStr][data[i].data[j].QuestionnaireID] == null){\r\n                                table[dateStr][data[i].data[j].QuestionnaireID] = {};\r\n                                table[dateStr][data[i].data[j].QuestionnaireID][\"sum\"] = 0;\r\n                                table[dateStr][data[i].data[j].QuestionnaireID][\"counter\"] = 0;\r\n                            }\r\n                            table[dateStr][data[i].data[j].QuestionnaireID][\"sum\"] += data[i].data[j].Score;\r\n                            table[dateStr][data[i].data[j].QuestionnaireID][\"counter\"]++;\r\n                            dic[data[i].data[j].QuestionnaireID] = true;\r\n                        }\r\n                        else if(this.props.monthly){\r\n                            dic[data[i].data[j].QuestionnaireID] = true;\r\n                            date = new Date(data[i].data[j].ValidTime)\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                            if(dateOStr === dateStr){\r\n                                if(data[i].data[j].ValidTime < this.props.date){\r\n                                    avgO[\"before\"][data[i].data[j].QuestionnaireID][\"sum\"] += data[i].data[j].Score;\r\n                                    avgO[\"before\"][data[i].data[j].QuestionnaireID][\"counter\"]++;\r\n                                }\r\n                                else{\r\n                                    avgO[\"after\"][data[i].data[j].QuestionnaireID][\"sum\"] += data[i].data[j].Score;\r\n                                    avgO[\"after\"][data[i].data[j].QuestionnaireID][\"counter\"]++;\r\n                                }\r\n                                if(!week){\r\n                                    dates.push(data[i].data[j].ValidTime);\r\n                                    week = true;\r\n                                }\r\n                                continue;\r\n                            }\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                dates.push(data[i].data[j].ValidTime);\r\n                            }\r\n                            if(table[dateStr][data[i].data[j].QuestionnaireID] == null){\r\n                                table[dateStr][data[i].data[j].QuestionnaireID] = {};\r\n                                table[dateStr][data[i].data[j].QuestionnaireID][\"sum\"] = 0;\r\n                                table[dateStr][data[i].data[j].QuestionnaireID][\"counter\"] = 0;\r\n                            }\r\n                            table[dateStr][data[i].data[j].QuestionnaireID][\"sum\"] += data[i].data[j].Score;\r\n                            table[dateStr][data[i].data[j].QuestionnaireID][\"counter\"]++;\r\n                            dic[data[i].data[j].QuestionnaireID] = true;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                var arr = [], exportCSV = [];\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (let [key,] of Object.entries(table)) {\r\n                        for (let [key1,] of Object.entries(table[key])) {\r\n                            table[key][key1][\"Data\"] = table[key][key1][\"sum\"] / table[key][key1][\"counter\"];\r\n                        }\r\n                    }\r\n                }\r\n                var last = Math.min();\r\n                for(i = 0; i < dates.length; i++){\r\n                    var line = {};\r\n                    date = new Date(dates[i]);\r\n                    dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-');\r\n                    if(this.props.showDaily){\r\n                        var d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        var num = Math.floor((d.getTime() - this.props.date) / 86400000);\r\n                        if(num < 0){\r\n                            num++;\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        table[dateStr][\"num\"] = num;\r\n                        arr.push(\r\n                            <tr key={dateStr}>\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                { dic[\"1\"] ? ((table[dateStr][\"1\"] >= 0 || table[dateStr][\"1\"] < 0) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"1\"]}</td> : <td className=\"after\">{ table[dateStr][\"1\"]}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"2\"] ? ((table[dateStr][\"2\"] >= 0 || table[dateStr][\"2\"] < 0) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"2\"]}</td> : <td className=\"after\">{ table[dateStr][\"2\"]}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"3\"] ? ((table[dateStr][\"3\"] >= 0 || table[dateStr][\"3\"] < 0) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"3\"]}</td> : <td className=\"after\">{ table[dateStr][\"3\"]}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"4\"] ? ((table[dateStr][\"4\"] >= 0 || table[dateStr][\"4\"] < 0) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"4\"]}</td> : <td className=\"after\">{ table[dateStr][\"4\"]}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"5\"] ? ((table[dateStr][\"5\"] >= 0 || table[dateStr][\"5\"] < 0) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"5\"]}</td> : <td className=\"after\">{ table[dateStr][\"5\"]}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"6\"] ? ((table[dateStr][\"6\"] >= 0 || table[dateStr][\"6\"] < 0) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"6\"]}</td> : <td className=\"after\">{ table[dateStr][\"6\"]}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                            </tr>\r\n                        );\r\n                    }\r\n                    else if(this.props.weekly || this.props.monthly){\r\n                        var o = new Date(this.props.date);\r\n                        d = new Date(dates[i]);\r\n                        d.setHours(0,0,0,0);\r\n                        if(this.props.weekly){\r\n                            var sundayO = new Date(o.getTime() - o.getDay() * 86400000);\r\n                            sundayO.setHours(0,0,0,0);\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            sunday.setHours(0,0,0,0);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \"-\" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                            num = Math.floor((sunday.getTime() - sundayO.getTime()) / 604800000);\r\n                        }\r\n                        else{\r\n                            var firstDay = new Date(d.getFullYear(), d.getMonth(), 1);\r\n                            var firstDayO = new Date(o.getFullYear(), o.getMonth(), 1);\r\n                            num = Math.floor((firstDay.getTime() - firstDayO.getTime()) / 2419200000);\r\n                            if(num < 0){\r\n                                num++;\r\n                            }\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(last === num){\r\n                            num++;\r\n                        }\r\n                        last = num;\r\n                        if(!this.props.date){\r\n                            num = \"-\"\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            arr.push(\r\n                                <tr key={dateStr + \"before\"}>\r\n                                    <td className=\"before\">{0}</td>\r\n                                    <td className=\"before\">{dateStr}</td>\r\n                                    { dic[\"1\"] ? (avgO[\"before\"][\"1\"][\"counter\"] ? <td className=\"before\"> {(avgO[\"before\"][\"1\"][\"sum\"] / avgO[\"before\"][\"1\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"before\"> - </td>) : null}\r\n                                    { dic[\"2\"] ? (avgO[\"before\"][\"2\"][\"counter\"] ? <td className=\"before\"> {(avgO[\"before\"][\"2\"][\"sum\"] / avgO[\"before\"][\"2\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"before\"> - </td>) : null}\r\n                                    { dic[\"3\"] ? (avgO[\"before\"][\"3\"][\"counter\"] ? <td className=\"before\"> {(avgO[\"before\"][\"3\"][\"sum\"] / avgO[\"before\"][\"3\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"before\"> - </td>) : null}\r\n                                    { dic[\"4\"] ? (avgO[\"before\"][\"4\"][\"counter\"] ? <td className=\"before\"> {(avgO[\"before\"][\"4\"][\"sum\"] / avgO[\"before\"][\"4\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"before\"> - </td>) : null}\r\n                                    { dic[\"5\"] ? (avgO[\"before\"][\"5\"][\"counter\"] ? <td className=\"before\"> {(avgO[\"before\"][\"5\"][\"sum\"] / avgO[\"before\"][\"5\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"before\"> - </td>) : null}\r\n                                    { dic[\"6\"] ? (avgO[\"before\"][\"6\"][\"counter\"] ? <td className=\"before\"> {(avgO[\"before\"][\"6\"][\"sum\"] / avgO[\"before\"][\"6\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"before\"> - </td>) : null}\r\n                                    </tr>\r\n                            )\r\n                            arr.push(\r\n                                <tr key={dateStr + \"after\"}>\r\n                                    <td className=\"after\">{0}</td>\r\n                                    <td className=\"after\">{dateStr}</td>\r\n                                    { dic[\"1\"] ? (avgO[\"after\"][\"1\"][\"counter\"] ? <td className=\"after\"> {(avgO[\"after\"][\"1\"][\"sum\"] / avgO[\"after\"][\"1\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"after\"> - </td>) : null}\r\n                                    { dic[\"2\"] ? (avgO[\"after\"][\"2\"][\"counter\"] ? <td className=\"after\"> {(avgO[\"after\"][\"2\"][\"sum\"] / avgO[\"after\"][\"2\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"after\"> - </td>) : null}\r\n                                    { dic[\"3\"] ? (avgO[\"after\"][\"3\"][\"counter\"] ? <td className=\"after\"> {(avgO[\"after\"][\"3\"][\"sum\"] / avgO[\"after\"][\"3\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"after\"> - </td>) : null}\r\n                                    { dic[\"4\"] ? (avgO[\"after\"][\"4\"][\"counter\"] ? <td className=\"after\"> {(avgO[\"after\"][\"4\"][\"sum\"] / avgO[\"after\"][\"4\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"after\"> - </td>) : null}\r\n                                    { dic[\"5\"] ? (avgO[\"after\"][\"5\"][\"counter\"] ? <td className=\"after\"> {(avgO[\"after\"][\"5\"][\"sum\"] / avgO[\"after\"][\"5\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"after\"> - </td>) : null}\r\n                                    { dic[\"6\"] ? (avgO[\"after\"][\"6\"][\"counter\"] ? <td className=\"after\"> {(avgO[\"after\"][\"6\"][\"sum\"] / avgO[\"after\"][\"6\"][\"counter\"]).toFixed(2)} </td>  : <td className=\"after\"> - </td>) : null}\r\n                                    </tr>\r\n                            )\r\n                            line = {};\r\n                            var z  = 0;\r\n                            if(this.props.date){\r\n                                if(this.props.weekly){\r\n                                    line[\"מספר שבוע\"] = z;\r\n                                }\r\n                                else{\r\n                                    line[\"מספר חודש\"] = z;\r\n                                }\r\n                            }\r\n                            line[\"תאריך\"] = dateStr;\r\n                            if(dic[\"1\"] && avgO[\"before\"][\"1\"][\"counter\"]){\r\n                                line[\"Oswestry Disability Index\"] = (avgO[\"before\"][\"1\"][\"sum\"] / avgO[\"before\"][\"1\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"2\"] && avgO[\"before\"][\"2\"][\"counter\"]){\r\n                                line[\"Neck Disability Index\"] = (avgO[\"before\"][\"2\"][\"sum\"] / avgO[\"before\"][\"2\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"3\"] && avgO[\"before\"][\"3\"][\"counter\"]){\r\n                                line[\"Lower Extremity Functional Scale\"] = (avgO[\"before\"][\"3\"][\"sum\"] / avgO[\"before\"][\"3\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"41\"] && avgO[\"before\"][\"4\"][\"counter\"]){\r\n                                line[\"Oswestry low back pain\"] = (avgO[\"before\"][\"4\"][\"sum\"] / avgO[\"before\"][\"4\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"5\"] && avgO[\"before\"][\"5\"][\"counter\"]){\r\n                                line[\"EQ-5D\"] = (avgO[\"before\"][\"5\"][\"sum\"] / avgO[\"before\"][\"5\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"6\"] && avgO[\"before\"][\"6\"][\"counter\"]){\r\n                                line[\"EQ-5D\"] = (avgO[\"before\"][\"6\"][\"sum\"] / avgO[\"before\"][\"6\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            exportCSV.push(line);\r\n                            line = {};\r\n                            if(this.props.date){\r\n                                if(this.props.weekly){\r\n                                    line[\"מספר שבוע\"] = z;\r\n                                }\r\n                                else{\r\n                                    line[\"מספר חודש\"] = z;\r\n                                }\r\n                            }\r\n                            line[\"תאריך\"] = dateStr;\r\n                            if(dic[\"1\"] && avgO[\"after\"][\"1\"][\"counter\"]){\r\n                                line[\"Oswestry Disability Index\"] = (avgO[\"after\"][\"1\"][\"sum\"] / avgO[\"after\"][\"1\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"2\"] && avgO[\"after\"][\"2\"][\"counter\"]){\r\n                                line[\"Neck Disability Index\"] = (avgO[\"after\"][\"2\"][\"sum\"] / avgO[\"after\"][\"2\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"3\"] && avgO[\"after\"][\"3\"][\"counter\"]){\r\n                                line[\"Lower Extremity Functional Scale\"] = (avgO[\"after\"][\"3\"][\"sum\"] / avgO[\"after\"][\"3\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"41\"] && avgO[\"after\"][\"4\"][\"counter\"]){\r\n                                line[\"Oswestry low back pain\"] = (avgO[\"after\"][\"4\"][\"sum\"] / avgO[\"after\"][\"4\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"5\"] && avgO[\"after\"][\"5\"][\"counter\"]){\r\n                                line[\"EQ-5D\"] = (avgO[\"after\"][\"5\"][\"sum\"] / avgO[\"after\"][\"5\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if(dic[\"6\"] && avgO[\"after\"][\"6\"][\"counter\"]){\r\n                                line[\"EQ-5D\"] = (avgO[\"after\"][\"6\"][\"sum\"] / avgO[\"after\"][\"6\"][\"counter\"]).toFixed(2);\r\n                            }\r\n                            exportCSV.push(line);\r\n                            continue;\r\n                        }\r\n                        arr.push(\r\n                            <tr key={dateStr}>\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{num}</td> : <td className=\"after\">{num}</td>}\r\n                                {(dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{dateStr}</td> : <td className=\"after\">{dateStr}</td>}\r\n                                { dic[\"1\"] ? ((table[dateStr][\"1\"] && (table[dateStr][\"1\"][\"Data\"] >= 0 || table[dateStr][\"1\"][\"Data\"] < 0)) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"1\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"1\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"2\"] ? ((table[dateStr][\"2\"] && (table[dateStr][\"2\"][\"Data\"] >= 0 || table[dateStr][\"2\"][\"Data\"] < 0)) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"2\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"2\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"3\"] ? ((table[dateStr][\"3\"] && (table[dateStr][\"3\"][\"Data\"] >= 0 || table[dateStr][\"3\"][\"Data\"] < 0)) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"3\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"3\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"4\"] ? ((table[dateStr][\"4\"] && (table[dateStr][\"4\"][\"Data\"] >= 0 || table[dateStr][\"4\"][\"Data\"] < 0)) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"4\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"4\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"5\"] ? ((table[dateStr][\"5\"] && (table[dateStr][\"5\"][\"Data\"] >= 0 || table[dateStr][\"5\"][\"Data\"] < 0)) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"5\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"5\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                                { dic[\"6\"] ? ((table[dateStr][\"6\"] && (table[dateStr][\"6\"][\"Data\"] >= 0 || table[dateStr][\"6\"][\"Data\"] < 0)) ? ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">{ table[dateStr][\"6\"][\"Data\"].toFixed(2)}</td> : <td className=\"after\">{ table[dateStr][\"6\"][\"Data\"].toFixed(2)}</td>) : ((dates[i] < this.props.date || !this.props.date) ? <td className=\"before\">-</td> : <td className=\"after\">-</td>)) : null }\r\n                            </tr>\r\n                        )\r\n                    }\r\n                    line = {};\r\n                    if(this.props.date){\r\n                        if(this.props.showDaily){\r\n                            line[\"מספר יום\"] = num;\r\n                        }\r\n                        else if(this.props.weekly){\r\n                            line[\"מספר שבוע\"] = num;\r\n                        }\r\n                        else{\r\n                            line[\"מספר חודש\"] = num;\r\n                        }\r\n                    }\r\n                    line[\"תאריך\"] = dateStr;\r\n                    if(this.props.showDaily){\r\n                        if(dic[\"1\"] && (table[dateStr][\"1\"] > 0 || table[dateStr][\"1\"] <= 0)){\r\n                            line[\"Oswestry Disability Index\"] = table[dateStr][\"1\"];\r\n                        }\r\n                        if(dic[\"2\"] && (table[dateStr][\"2\"] > 0 || table[dateStr][\"2\"] <= 0)){\r\n                            line[\"Neck Disability Index\"] = table[dateStr][\"2\"];\r\n                        }\r\n                        if(dic[\"3\"] && (table[dateStr][\"3\"] > 0 || table[dateStr][\"3\"] <= 0)){\r\n                            line[\"Lower Extremity Functional Scale\"] = table[dateStr][\"3\"];\r\n                        }\r\n                        if(dic[\"4\"] && (table[dateStr][\"4\"] > 0 || table[dateStr][\"4\"] <= 0)){\r\n                            line[\"Oswestry low back pain\"] = table[dateStr][\"4\"];\r\n                        }\r\n                        if(dic[\"5\"] && (table[dateStr][\"5\"] > 0 || table[dateStr][\"5\"] <= 0)){\r\n                            line[\"EQ-5D\"] = table[dateStr][\"5\"];\r\n                        }\r\n                        if(dic[\"6\"] && (table[dateStr][\"6\"] > 0 || table[dateStr][\"6\"] <= 0)){\r\n                            line[\"EQ-5D scale\"] = table[dateStr][\"6\"];\r\n                        }\r\n                    }\r\n                    else{\r\n                        if(dic[\"1\"] && table[dateStr][\"1\"] && table[dateStr][\"1\"][\"counter\"]){\r\n                            line[\"Oswestry Disability Index\"] = table[dateStr][\"1\"][\"Data\"].toFixed(2);\r\n                        }\r\n                        if(dic[\"2\"] && table[dateStr][\"2\"] && table[dateStr][\"2\"][\"counter\"]){\r\n                            line[\"Neck Disability Index\"] = table[dateStr][\"2\"][\"Data\"].toFixed(2);\r\n                        }\r\n                        if(dic[\"3\"] && table[dateStr][\"3\"] && table[dateStr][\"3\"][\"counter\"]){\r\n                            line[\"Lower Extremity Functional Scale\"] = table[dateStr][\"3\"][\"Data\"].toFixed(2);\r\n                        }\r\n                        if(dic[\"4\"] && table[dateStr][\"4\"] && table[dateStr][\"4\"][\"counter\"]){\r\n                            line[\"Oswestry low back pain\"] = table[dateStr][\"4\"][\"Data\"].toFixed(2);\r\n                        }\r\n                        if(dic[\"5\"] && table[dateStr][\"5\"] && table[dateStr][\"5\"][\"counter\"]){\r\n                            line[\"EQ-5D\"] = table[dateStr][\"5\"][\"Data\"].toFixed(2);\r\n                        }\r\n                        if(dic[\"6\"] && table[dateStr][\"6\"] && table[dateStr][\"6\"][\"counter\"]){\r\n                            line[\"EQ-5D scale\"] = table[dateStr][\"6\"][\"Data\"].toFixed(2);\r\n                        }\r\n                    }\r\n                    exportCSV.push(line);\r\n\r\n                }\r\n            }\r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n        return(\r\n            <div>\r\n                {this.props.ready ?  <div>{noData ? <h4>לא קיים מידע על המשתמש</h4> :\r\n                    <div>\r\n                        <table style={{width: \"100%\"}} id=\"per\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    { this.props.showDaily ? <th>מספר יום</th> : null}\r\n                                    { this.props.weekly ? <th>מספר שבוע</th> : null} \r\n                                    { this.props.monthly ? <th>מספר חודש</th> : null}  \r\n                                    { this.props.data.length > 0 ? <th>תאריך</th> : null}\r\n                                    { dic[\"1\"] ? <th>Oswestry Disability Index</th> : null }\r\n                                    { dic[\"2\"] ? <th>Neck Disability Index</th> : null }\r\n                                    { dic[\"3\"] ? <th>Lower Extremity Functional Scale</th> : null }\r\n                                    { dic[\"4\"] ? <th>Oswestry low back pain</th> : null }\r\n                                    { dic[\"5\"] ? <th>EQ-5D</th> : null }\r\n                                    { dic[\"6\"] ? <th>EQ-5D scale</th> : null }\r\n                                </tr>\r\n                                {arr}\r\n                            </tbody>\r\n                        </table>\r\n                        <ExportCSV csvData={exportCSV} fileName={this.props.name + \" שאלונים תקופתיים\"}/>\r\n                    </div>}</div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TablePer","import React, {Component} from \"react\"\r\n//import LineChart from 'react-linechart';\r\nimport {LineChart} from 'react-chartkick'\r\nimport 'chart.js'\r\n\r\nclass SleepGraph extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.sort_by_key = function(array, key)\r\n        {\r\n         return array.sort(function(a, b)\r\n         {\r\n          var x = a[key]; var y = b[key];\r\n          return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n         });\r\n        }\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n    \r\n\r\n\r\n\r\n    render() {\r\n        if(this.props.ready){\r\n            var noData = false;\r\n            if(this.props.data && this.props.data.length > 0){\r\n                var data = this.sort_by_key(this.props.data, \"ValidTime\")\r\n                var pointsD = {}, pointsL = {}, pointsT = {};\r\n                var oDay = new Date(this.props.date);\r\n                var lineD = {}, lineL = {}, lineT = {};\r\n                var table = {};\r\n                var dates = [];\r\n                var dateO, dateOStr, week = false;\r\n                if(this.props.weekly){\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var avgO = {};\r\n                avgO[\"before\"] = {light: {}, deep: {}, total: {}};\r\n                avgO[\"after\"] = {light: {}, deep: {}, total: {}};\r\n                avgO[\"before\"][\"light\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"deep\"] = {sum: 0, counter: 0};\r\n                avgO[\"before\"][\"total\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"total\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"deep\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"][\"light\"] = {sum: 0, counter: 0};\r\n                for(var i = 0; i < data.length; i++){\r\n                    var date = new Date(data[i].ValidTime);\r\n                    var deep = 0, light = 0, total = 0, firstTime;\r\n                    for(var k = 0; k < data[i][\"Data\"].length; k++){\r\n                        if(k === 0){\r\n                            firstTime = data[i][\"Data\"][k][\"StartTime\"];\r\n                        }\r\n                        else if( firstTime === data[i][\"Data\"][k][\"StartTime\"]){\r\n                            break;\r\n                        }\r\n                        var time = data[i][\"Data\"][k][\"EndTime\"] - data[i][\"Data\"][k][\"StartTime\"];\r\n                        time = time / 3600000;\r\n                        if(data[i][\"Data\"][k][\"State\"] === \"Light sleep\"){\r\n                            light = light + time;\r\n                        }\r\n                        else{\r\n                            deep = deep + time;\r\n                        }\r\n                        total = total + time;\r\n                    }\r\n                    if(this.props.showDaily){\r\n                        var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-');\r\n                        if(date <= oDay || oDay.valueOf() == 0 ||oDay.valueOf() == null){\r\n                            pointsD[dateStr] = deep.toFixed(2);\r\n                            pointsL[dateStr] = light.toFixed(2);\r\n                            pointsT[dateStr] = total.toFixed(2);\r\n                        }\r\n                        if(date >= oDay && oDay.valueOf() != 0){\r\n                            lineD[dateStr] = deep.toFixed(2);\r\n                            lineL[dateStr] = light.toFixed(2);\r\n                            lineT[dateStr] = total.toFixed(2);\r\n                        }\r\n                    }\r\n                    else if(this.props.weekly){\r\n                        date = new Date(data[i].ValidTime);\r\n                        var dayOfWeek = date.getDay();\r\n                        var sunday = new Date(data[i].ValidTime - dayOfWeek * 86400000);\r\n                        var saturday = new Date(sunday.getTime() + 518400000);\r\n                        dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"light\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"light\"][\"sum\"] += light;\r\n                                avgO[\"before\"][\"deep\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"deep\"][\"sum\"] += deep;\r\n                                avgO[\"before\"][\"total\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"total\"][\"sum\"] += total;\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"light\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"light\"][\"sum\"] += light;\r\n                                avgO[\"after\"][\"deep\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"deep\"][\"sum\"] += deep;\r\n                                avgO[\"after\"][\"total\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"total\"][\"sum\"] += total;\r\n                            }\r\n                            if(!week){\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"light\"] = {};\r\n                                table[dateStr][\"deep\"] = {};\r\n                                table[dateStr][\"total\"] = {};\r\n                                table[dateStr][\"light\"][\"counter\"] = 0;\r\n                                table[dateStr][\"light\"][\"sum\"] = 0;\r\n                                table[dateStr][\"deep\"][\"counter\"] = 0;\r\n                                table[dateStr][\"deep\"][\"sum\"] = 0;\r\n                                table[dateStr][\"total\"][\"counter\"] = 0;\r\n                                table[dateStr][\"total\"][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"light\"][\"counter\"]++;\r\n                            table[dateStr][\"light\"][\"sum\"] += light;\r\n                            table[dateStr][\"deep\"][\"counter\"]++;\r\n                            table[dateStr][\"deep\"][\"sum\"] += deep;\r\n                            table[dateStr][\"total\"][\"counter\"]++;\r\n                            table[dateStr][\"total\"][\"sum\"] += total;\r\n                        }\r\n                    }\r\n                    else if(this.props.monthly){\r\n                        date = new Date(data[i].ValidTime);;\r\n                        dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"light\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"light\"][\"sum\"] += light;\r\n                                avgO[\"before\"][\"deep\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"deep\"][\"sum\"] += deep;\r\n                                avgO[\"before\"][\"total\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"total\"][\"sum\"] += total;\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"light\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"light\"][\"sum\"] += light;\r\n                                avgO[\"after\"][\"deep\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"deep\"][\"sum\"] += deep;\r\n                                avgO[\"after\"][\"total\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"total\"][\"sum\"] += total;\r\n                            }\r\n                            if(!week){\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"light\"] = {};\r\n                                table[dateStr][\"deep\"] = {};\r\n                                table[dateStr][\"total\"] = {};\r\n                                table[dateStr][\"light\"][\"counter\"] = 0;\r\n                                table[dateStr][\"light\"][\"sum\"] = 0;\r\n                                table[dateStr][\"deep\"][\"counter\"] = 0;\r\n                                table[dateStr][\"deep\"][\"sum\"] = 0;\r\n                                table[dateStr][\"total\"][\"counter\"] = 0;\r\n                                table[dateStr][\"total\"][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"light\"][\"counter\"]++;\r\n                            table[dateStr][\"light\"][\"sum\"] += light;\r\n                            table[dateStr][\"deep\"][\"counter\"]++;\r\n                            table[dateStr][\"deep\"][\"sum\"] += deep;\r\n                            table[dateStr][\"total\"][\"counter\"]++;\r\n                            table[dateStr][\"total\"][\"sum\"] += total;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (i = 0; i < dates.length; i++) {\r\n                        date = new Date(dates[i]);\r\n                        if(this.props.weekly){\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        }\r\n                        else{\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            pointsD[dateStr] = (avgO[\"before\"][\"deep\"][\"sum\"] /  avgO[\"before\"][\"deep\"][\"counter\"]).toFixed(2);\r\n                            pointsL[dateStr] = (avgO[\"before\"][\"light\"][\"sum\"] /  avgO[\"before\"][\"light\"][\"counter\"]).toFixed(2);\r\n                            pointsT[dateStr] = (avgO[\"before\"][\"total\"][\"sum\"] /  avgO[\"before\"][\"total\"][\"counter\"]).toFixed(2);\r\n                            lineD[dateStr] = (avgO[\"after\"][\"deep\"][\"sum\"] /  avgO[\"after\"][\"deep\"][\"counter\"]).toFixed(2);\r\n                            lineL[dateStr] = (avgO[\"after\"][\"light\"][\"sum\"] /  avgO[\"after\"][\"light\"][\"counter\"]).toFixed(2);\r\n                            lineT[dateStr] = (avgO[\"after\"][\"total\"][\"sum\"] /  avgO[\"after\"][\"total\"][\"counter\"]).toFixed(2);\r\n                            continue;\r\n                        }\r\n                        if(date <= oDay || oDay.valueOf() == 0 ||oDay.valueOf() == null){\r\n                            pointsD[dateStr] = (table[dateStr][\"deep\"][\"sum\"] /  table[dateStr][\"deep\"][\"counter\"]).toFixed(2);\r\n                            pointsL[dateStr] = (table[dateStr][\"light\"][\"sum\"] /  table[dateStr][\"light\"][\"counter\"]).toFixed(2);\r\n                            pointsT[dateStr] = (table[dateStr][\"total\"][\"sum\"] /  table[dateStr][\"total\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(date >= oDay && oDay.valueOf() != 0){\r\n                            lineD[dateStr] = (table[dateStr][\"deep\"][\"sum\"] /  table[dateStr][\"deep\"][\"counter\"]).toFixed(2);\r\n                            lineL[dateStr] = (table[dateStr][\"light\"][\"sum\"] /  table[dateStr][\"light\"][\"counter\"]).toFixed(2);\r\n                            lineT[dateStr] =(table[dateStr][\"total\"][\"sum\"] /  table[dateStr][\"total\"][\"counter\"]).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n                var dataX = [\r\n                    {\"name\": \"שעות שינה קלה לפני הניתוח\", \"data\": pointsL},\r\n                    {\"name\": \"שעות שינה עמוקה לפני הניתוח\", \"data\": pointsD},\r\n                    {\"name\": \"סך כל שעות השינה לפני הניתוח\", \"data\": pointsT},\r\n                    {\"name\": \"שעות שינה קלה אחרי הניתוח\", \"data\": lineL},\r\n                    {\"name\": \"שעות שינה עמוקה אחרי הניתוח\", \"data\": lineD},\r\n                    {\"name\": \"סך כל שעות השינה אחרי הניתוח\", \"data\": lineT},\r\n                ];\r\n            }\r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n\t\treturn (\r\n            <div>\r\n                {this.props.ready ? <div>\r\n                    <div className=\"App\">\r\n                        <h1>{this.props.name}</h1>\r\n                        {noData ? <h4>לא קיים מידע על המשתמש</h4> : <LineChart download={true} data={dataX} colors={[\"#010C6B\", \"#7C0000\", \"#0D4E00\", \"#77CCEE\" ,\"#F78989\", \"#B5FFA2\"]} min={0}/>}\r\n                    </div>\t\r\n                </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SleepGraph","import React, {Component} from \"react\"\r\n//import LineChart from 'react-linechart';\r\nimport { LineChart} from 'react-chartkick'\r\nimport 'chart.js'\r\n\r\nclass GraphAns extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.sort_by_key = function(array, key)\r\n        {\r\n         return array.sort(function(a, b)\r\n         {\r\n          var x = a[key]; var y = b[key];\r\n          return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n         });\r\n        }\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n    \r\n\r\n\r\n\r\n    render() {\r\n        if(this.props.ready){\r\n            var noData = false;\r\n            if(this.props.data.length > 0){\r\n                var data = this.sort_by_key(this.props.data, \"ValidTime\")\r\n                var points = {};\r\n                var oDay = new Date(this.props.date);\r\n                var line = {};\r\n                var table = {};\r\n                var dates = [];\r\n                var week = false;\r\n                var dateO, dateOStr;\r\n                if(this.props.weekly){\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + sat.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                }\r\n                if(this.props.monthly){\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var avgO = {};\r\n                avgO[\"before\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"]= {sum: 0, counter: 0};\r\n                for(var i = 0; i < data.length; i++){\r\n                    if(this.props.showDaily){\r\n                        var date = new Date(data[i].ValidTime)\r\n                        var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short', year:\"numeric\"}).replace(/ /g, '-')\r\n                        if(date <= oDay || oDay.valueOf() == 0 ||oDay == null){\r\n                            points[dateStr] = data[i][\"Answers\"][0][\"AnswerID\"][0].toFixed(2);\r\n                        }\r\n                        if(date >= oDay && oDay.valueOf() != 0 ){\r\n                            line[dateStr] = data[i][\"Answers\"][0][\"AnswerID\"][0].toFixed(2);\r\n                        }\r\n                    }\r\n                    else if(this.props.weekly){\r\n                        date = new Date(data[i].ValidTime);\r\n                        var dayOfWeek = date.getDay();\r\n                        var sunday = new Date(data[i].ValidTime - dayOfWeek * 86400000);\r\n                        var saturday = new Date(sunday.getTime() + 518400000);\r\n                        dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0]; \r\n                            }\r\n                            if(!week){\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"counter\"] = 0;\r\n                                table[dateStr][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                            table[dateStr][\"counter\"]++;\r\n                        }\r\n                    }\r\n                    else if(this.props.monthly){\r\n                        date = new Date(data[i].ValidTime);;\r\n                        dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        if(dateOStr === dateStr){\r\n                            if(data[i].ValidTime < this.props.date){\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                            }\r\n                            else{\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0]; \r\n                            }\r\n                            if(!week){\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        }\r\n                        else{\r\n                            if(table[dateStr] == null){\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"counter\"] = 0;\r\n                                table[dateStr][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"sum\"] += data[i][\"Answers\"][0][\"AnswerID\"][0];\r\n                            table[dateStr][\"counter\"]++;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                if(this.props.weekly || this.props.monthly){\r\n                    for (i = 0; i < dates.length; i++) {\r\n                        date = new Date(dates[i]);\r\n                        if(this.props.weekly){\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'});\r\n                        }\r\n                        else{\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if(dateStr === dateOStr){\r\n                            points[dateStr] = (avgO[\"before\"][\"sum\"] /  avgO[\"before\"][\"counter\"]).toFixed(2);\r\n                            line[dateStr] = (avgO[\"after\"][\"sum\"] /  avgO[\"after\"][\"counter\"]).toFixed(2);\r\n                            continue;\r\n                        }\r\n                        if(date <= oDay || oDay.valueOf() == 0 ||oDay == null){\r\n                            points[dateStr] = (table[dateStr][\"sum\"] / table[dateStr][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if(date >= oDay && oDay.valueOf() != 0){\r\n                            line[dateStr] = (table[dateStr][\"sum\"] / table[dateStr][\"counter\"]).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n                var dataX = [\r\n                    {\"name\": \"לפני הניתוח\", \"data\": points},\r\n                    {\"name\": \"אחרי הניתוח\", \"data\": line}\r\n                ];\r\n            }\r\n            else{\r\n                noData = true;\r\n            }\r\n        }\r\n\t\treturn (\r\n            <div>\r\n                {this.props.ready ? <div>\r\n                    <div className=\"App\">\r\n                        <h1>{this.props.name}</h1>\r\n                        {noData ? <h4>לא קיים מידע על המשתמש</h4> : <LineChart download={true} data={dataX} min={0} />}\r\n                    </div>\t\r\n                </div> : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GraphAns","import React, {Component} from \"react\"\r\nimport axios from 'axios';\r\n\r\nclass PatientData extends Component {\r\n    constructor(props) {\r\n        super()\r\n        var q2 = false, q3 = false, q4 = false, q5 = false;\r\n        for(var i = 0; i < props.user[\"Questionnaires\"].length; i++){\r\n            if(props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 1){\r\n                q2= true;\r\n            }\r\n            else if(props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 2){\r\n                q3= true;\r\n            }\r\n            else if(props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 3){\r\n                q4= true;\r\n            }\r\n            else if(props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 5){\r\n                q5= true;\r\n            }\r\n        }\r\n        this.state = {\r\n           user: props.user,\r\n           showPopup: false,\r\n           showPopupQ: false,\r\n           new_date: \"\",\r\n           Questionnaires: [],\r\n           quest1: false,\r\n           quest2: q2,\r\n           quest3: q3,\r\n           quest4: q4,\r\n           quest5: q5,\r\n           quest6: false\r\n        }\r\n        this.changeDate = this.changeDate.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.togglePopupQ = this.togglePopupQ.bind(this);\r\n        this.handleSubmitQ = this.handleSubmitQ.bind(this)\r\n    }\r\n\r\n    handleSubmit(e){\r\n        e.preventDefault();\r\n        let date = (new Date(this.state.new_date)).getTime();\r\n        let id = this.props.user[\"UserID\"];\r\n        axios.post('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/changeDateOfSurgery',\r\n        {\r\n            UserID: id,\r\n            DateOfSurgery: date,\r\n            changedSurgeryDate: true\r\n        },            \r\n        { \r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'x-auth-token': sessionStorage.getItem(\"token\")\r\n            }\r\n        }).then(res => {\r\n            window.alert(\"התאריך שונה בהצלחה\")\r\n            this.togglePopup();\r\n        });\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value });\r\n    }\r\n\r\n    handleSubmitQ(e){\r\n        e.preventDefault();\r\n        var Questionnaires =[];\r\n        if(this.state.quest2){\r\n            Questionnaires.push({\r\n                \"QuestionnaireID\": 1,\r\n                \"QuestionnaireText\": \"תפקוד גב תחתון\"\r\n            })\r\n        }\r\n        if(this.state.quest3){\r\n            Questionnaires.push({\r\n                \"QuestionnaireID\": 2,\r\n                \"QuestionnaireText\": \"תפקוד צוואר\"\r\n            })\r\n        }\r\n        if(this.state.quest4){\r\n            Questionnaires.push({\r\n                \"QuestionnaireID\": 3,\r\n                \"QuestionnaireText\": \"תפקוד גף תחתון\"\r\n            })\r\n        }\r\n        if(this.state.quest5){\r\n            Questionnaires.push({\r\n                \"QuestionnaireID\": 5,\r\n                \"QuestionnaireText\": \"איכות חיים\"\r\n            });\r\n        }           \r\n        let id = this.props.user[\"UserID\"];\r\n        axios.post('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/changeUserQuestionnaire',\r\n        {\r\n            UserID: id,\r\n            Questionnaires: Questionnaires\r\n        },            \r\n        { \r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'x-auth-token': sessionStorage.getItem(\"token\")\r\n            }\r\n        }).then(res => {\r\n           window.alert(\"השאלונים שונו בהצלחה\");\r\n           this.togglePopupQ();\r\n        });\r\n    }\r\n\r\n    changeQuest(){\r\n        this.togglePopupQ();\r\n    }\r\n\r\n    changeDate(){\r\n        this.togglePopup();\r\n    }\r\n\r\n    togglePopupQ() {\r\n        this.setState({\r\n          showPopupQ: !this.state.showPopupQ\r\n        });\r\n\r\n    }\r\n\r\n    togglePopup() {\r\n        this.setState({\r\n          showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    render() {\r\n        require(\"./PatientData.css\");\r\n        let name = this.props.user[\"First_Name\"] + \" \" + this.props.user[\"Last_Name\"];\r\n        let bmi = parseFloat(this.props.user[\"BMI\"]).toFixed(1);\r\n        var sDate = \"\";\r\n        if(this.props.user[\"DateOfSurgery\"]){\r\n            sDate = (new Date(this.props.user[\"DateOfSurgery\"])).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n        }\r\n        else{\r\n            sDate = \"לא נקבע יום ניתוח\";\r\n        }\r\n        let gender = this.props.user[\"Gender\"];\r\n        let height = this.props.user[\"Height\"];\r\n        let pNumber = this.props.user[\"Phone_Number\"];\r\n        let smoke = this.props.user[\"Smoke\"];\r\n        let sType = this.props.user[\"SurgeryType\"];\r\n        let weight = this.props.user[\"Weight\"];\r\n        var today = new Date();\r\n        var birthday = new Date(this.props.user[\"BirthDate\"]);\r\n        var age = Math.floor((today.getTime() - birthday.getTime())/ 31536000000)\r\n        var Questionnaires = \"\";\r\n        var first = true;\r\n        for(var i = 0; i < this.props.user[\"Questionnaires\"].length; i++){\r\n            if(this.props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] !== 0 && this.props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] !== 6){\r\n                if(!first){\r\n                    Questionnaires +=\", \"\r\n                }\r\n                else{\r\n                    first = false;\r\n                }\r\n                if(!Questionnaires.includes(this.props.user[\"Questionnaires\"][i][\"QuestionnaireText\"])){\r\n                    Questionnaires += this.props.user[\"Questionnaires\"][i][\"QuestionnaireText\"];\r\n                }\r\n            }\r\n        }\r\n        if(Questionnaires.charAt(Questionnaires.length - 1) === \" \"){\r\n            Questionnaires = Questionnaires.substring(0, Questionnaires.length - 2);\r\n        }\r\n        var className = \"g\";\r\n        if(this.props.table){\r\n            className = \"t\"\r\n        }\r\n\t\treturn (\r\n            <div id=\"data\" className={className}>\r\n                <div className=\"line\">\r\n                    <label className=\"label\">שם:</label>\r\n                    <label className=\"labelData\">{name}</label>\r\n                    <label className=\"label\">מספר טלפון:</label>\r\n                    <label className=\"labelData\">{pNumber}</label>\r\n                </div>\r\n                <div className=\"line\">\r\n                    <label className=\"label\">מין:</label>\r\n                    <label className=\"labelData\">{gender}</label>\r\n                    <label className=\"label\">משקל:</label>\r\n                    <label className=\"labelData\">{weight}</label>\r\n                    <label className=\"label\">גובה:</label>\r\n                    <label className=\"labelData\">{height}</label>\r\n                    <label className=\"label\">גיל:</label>\r\n                    <label className=\"labelData\">{age}</label>\r\n                    <label className=\"label\">BMI:</label>\r\n                    <label className=\"labelData\">{bmi}</label>\r\n                    <label className=\"labelData\">{smoke}</label>\r\n                    \r\n                </div>\r\n                <div className=\"line\">\r\n                    <label className=\"label\">סוג ניתוח:</label>\r\n                    <label className=\"labelData\">{sType}</label>\r\n                    <label className=\"label\">תאריך ניתוח:</label>\r\n                    <label className=\"labelData\" >{sDate}</label>  \r\n                    <button className=\"changeDate\" onClick={() => this.changeDate()}> \r\n                        שינוי התאריך        \r\n                    </button>\r\n                </div>\r\n                {/*<div className=\"line\">*/}\r\n                {/*    <label className=\"label\" >שאלונים:</label> */}\r\n                {/*    <label className=\"labelData\" >{Questionnaires} </label> */}\r\n                {/*    <button className=\"changeDate\" onClick={() => this.changeQuest()}> */}\r\n                {/*        שינוי השאלונים  */}\r\n                {/*    </button>*/}\r\n                {/*</div>*/}\r\n                {this.state.showPopup ? \r\n                    <Popup\r\n                        closePopup={this.togglePopup.bind(this)}\r\n                        handleChange={this.handleChange.bind(this)}\r\n                        handleSubmit={this.handleSubmit.bind(this)}\r\n                    /> : null\r\n                }\r\n                {this.state.showPopupQ ? \r\n                    <PopupQ\r\n                        closePopup={this.togglePopupQ.bind(this)}\r\n                        handleChange={this.handleChange.bind(this)}\r\n                        handleSubmit={this.handleSubmitQ.bind(this)}\r\n                        quest1={this.state.quest1}\r\n                        quest2={this.state.quest2}\r\n                        quest3={this.state.quest3}\r\n                        quest4={this.state.quest4}\r\n                        quest5={this.state.quest5}\r\n                        quest6={this.state.quest6}\r\n                    /> : null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PatientData\r\n\r\nclass Popup extends React.Component {\r\n    render() {\r\n      return (\r\n        <div className='popup'>\r\n            <div className='popup_innerCD' >\r\n                <div className=\"line_x\">\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                </div>\r\n                <h4 id=\"h4C\">שינוי תאריך הניתוח</h4>\r\n                <form  onSubmit={this.props.handleSubmit} id=\"newDate_form\">\r\n                    <div className=\"line_newData\">\r\n                        <label id=\"newD\"> הכנס תאריך ניתוח חדש:</label>\r\n                    </div>\r\n                    <div className=\"line_newData\">\r\n                    <input id=\"new_date\" type=\"date\" name=\"new_date\" onChange={this.props.handleChange}/>\r\n                    </div>\r\n                    <div className=\"line_newData\">\r\n                        <button id=\"sumbitC\" type=\"sumbit\" >שינוי</button>\r\n                    </div>\r\n                    <div className=\"line_newData\">\r\n                        <label id=\"noDate\">*לביטול תאריך ניתוח יש ללחוץ על שינוי בלי קביעת תאריך חדש</label>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  class PopupQ extends React.Component {\r\n    render() {\r\n      return (\r\n        <div className='popup'>\r\n            <div className='popup_innerCQ' >\r\n                <div className=\"line_x\">\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                </div>\r\n                <h4 id=\"h4C\">שינוי שאלונים</h4>\r\n                <form id=\"formQ\" onSubmit={this.props.handleSubmit}>\r\n                    <div className=\"line\">\r\n                        <input type=\"checkbox\"\r\n                            className=\"cInput\" \r\n                            name=\"quest2\"\r\n                            checked={this.props.quest2}\r\n                            onChange={this.props.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            תפקוד גב תחתון  \r\n                        </label>\r\n                    </div>\r\n                    <div className=\"line\">\r\n                        <input type=\"checkbox\"\r\n                            className=\"cInput\" \r\n                            name=\"quest3\"\r\n                            checked={this.props.quest3}\r\n                            onChange={this.props.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            תפקוד צוואר  \r\n                        </label>\r\n                    </div>\r\n                    <div className=\"line\">\r\n                        <input type=\"checkbox\"\r\n                            className=\"cInput\" \r\n                            name=\"quest4\"\r\n                            checked={this.props.quest4}\r\n                            onChange={this.props.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            תפקוד גף תחתון    \r\n                        </label>\r\n                    </div>\r\n                    <div className=\"line\">\r\n                        <input type=\"checkbox\"\r\n                            className=\"cInput\" \r\n                            name=\"quest5\"\r\n                            checked={this.props.quest5}\r\n                            onChange={this.props.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            איכות חיים  \r\n                        </label>\r\n                    </div>\r\n                    <button  id=\"changeQ\" type=\"sumbit\" >שינוי</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n  }","import React, {Component} from \"react\"\r\n//import LineChart from 'react-linechart';\r\nimport {LineChart} from 'react-chartkick'\r\nimport 'chart.js'\r\n\r\nclass CompGraph extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.sort_by_key = function (array, key) {\r\n            return array.sort(function (a, b) {\r\n                var x = a[key];\r\n                var y = b[key];\r\n                return ((x < y) ? -1 : ((x > y) ? 1 : 0));\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({[name]: checked}) : this.setState({[name]: value})\r\n    }\r\n\r\n    render() {\r\n        if (this.props.ready) {\r\n\r\n            // create data for single patient graph\r\n            var noData = false;\r\n            if (this.props.data && this.props.data.length > 0 && this.props.data[1]) {\r\n                var data = this.sort_by_key(this.props.data[1], \"Timestamp\")\r\n                var points = {};\r\n                var min = 0, week = false;\r\n                var oDay = new Date(this.props.date);\r\n                var line = {};\r\n                var table = {};\r\n                var dates = [];\r\n                var dateO, dateOStr;\r\n                if (this.props.weekly) {\r\n                    dateO = new Date(this.props.date);\r\n                    var day = dateO.getDay();\r\n                    var sun = new Date(this.props.date - day * 86400000);\r\n                    var sat = new Date(sun.getTime() + 518400000);\r\n                    dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + sat.toLocaleDateString('en-GB', {\r\n                        day: 'numeric',\r\n                        month: 'short'\r\n                    });\r\n                }\r\n                if (this.props.monthly) {\r\n                    dateO = new Date(this.props.date);\r\n                    dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                }\r\n                var avgO = {};\r\n                avgO[\"before\"] = {sum: 0, counter: 0};\r\n                avgO[\"after\"] = {sum: 0, counter: 0};\r\n                for (var i = 0; i < data.length; i++) {\r\n                    if (data[i].Data < 0) {\r\n                        min = -1;\r\n                    }\r\n                    if (this.props.showDaily) {\r\n                        var date = new Date(data[i].ValidTime)\r\n                        var dateStr = date.toLocaleDateString('en-GB', {\r\n                            day: 'numeric',\r\n                            month: 'short',\r\n                            year: \"numeric\"\r\n                        }).replace(/ /g, '-')\r\n                        if (date <= oDay || this.props.date==0) {\r\n                            points[dateStr] = data[i].Data.toFixed(2);\r\n                        }\r\n                        if (date >= oDay) {\r\n                            line[dateStr] = data[i].Data.toFixed(2)\r\n                        }\r\n                    } else if (this.props.weekly) {\r\n                        date = new Date(data[i].ValidTime);\r\n                        var dayOfWeek = date.getDay();\r\n                        var sunday = new Date(data[i].ValidTime - dayOfWeek * 86400000);\r\n                        var saturday = new Date(sunday.getTime() + 518400000);\r\n                        dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {\r\n                            day: 'numeric',\r\n                            month: 'short'\r\n                        });\r\n                        if (dateOStr === dateStr) {\r\n                            if (data[i].ValidTime < this.props.date) {\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"sum\"] += data[i].Data;\r\n                            } else {\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"sum\"] += data[i].Data;\r\n                            }\r\n                            if (!week) {\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        } else {\r\n                            if (table[dateStr] == null) {\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"counter\"] = 0;\r\n                                table[dateStr][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"sum\"] += data[i].Data;\r\n                            table[dateStr][\"counter\"]++;\r\n                        }\r\n                    } else if (this.props.monthly) {\r\n                        date = new Date(data[i].ValidTime);\r\n                        ;\r\n                        dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        if (dateOStr === dateStr) {\r\n                            if (data[i].ValidTime < this.props.date) {\r\n                                avgO[\"before\"][\"counter\"]++;\r\n                                avgO[\"before\"][\"sum\"] += data[i].Data;\r\n                            } else {\r\n                                avgO[\"after\"][\"counter\"]++;\r\n                                avgO[\"after\"][\"sum\"] += data[i].Data;\r\n                            }\r\n                            if (!week) {\r\n                                week = true;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                        } else {\r\n                            if (table[dateStr] == null) {\r\n                                table[dateStr] = {};\r\n                                table[dateStr][\"counter\"] = 0;\r\n                                table[dateStr][\"sum\"] = 0;\r\n                                dates.push(data[i].ValidTime);\r\n                            }\r\n                            table[dateStr][\"sum\"] += data[i].Data;\r\n                            table[dateStr][\"counter\"]++;\r\n                        }\r\n                    }\r\n                }\r\n                dates = dates.sort();\r\n                if (this.props.weekly || this.props.monthly) {\r\n                    for (i = 0; i < dates.length; i++) {\r\n                        date = new Date(dates[i]);\r\n                        if (this.props.weekly) {\r\n                            dayOfWeek = date.getDay();\r\n                            sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                            saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {\r\n                                day: 'numeric',\r\n                                month: 'short'\r\n                            });\r\n                        } else {\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                        }\r\n                        if (dateStr === dateOStr) {\r\n                            points[dateStr] = (avgO[\"before\"][\"sum\"] / avgO[\"before\"][\"counter\"]).toFixed(2);\r\n                            line[dateStr] = (avgO[\"after\"][\"sum\"] / avgO[\"after\"][\"counter\"]).toFixed(2);\r\n                            continue;\r\n                        }\r\n                        if (date <= oDay || this.props.date==0) {\r\n                            points[dateStr] = (table[dateStr][\"sum\"] / table[dateStr][\"counter\"]).toFixed(2);\r\n                        }\r\n                        if (date >= oDay) {\r\n                            line[dateStr] = (table[dateStr][\"sum\"] / table[dateStr][\"counter\"]).toFixed(2);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n                //*************create graph for compere patient\r\n\r\n                var noData = false;\r\n                if (this.props.data && this.props.data.length > 0 && this.props.data[0]) {\r\n                    var beforeRecords = this.props.data[0][0].Before[0] ? this.sort_by_key(this.props.data[0][0].Before[0][0].docs, \"Timestamp\") : [];\r\n                    var afterRecords = this.props.data[0][0].After[0] ? this.sort_by_key(this.props.data[0][0].After[0], \"Timestamp\") : [];\r\n\r\n\r\n                    var pointsCompere = {};\r\n                    var min = 0, week = false;\r\n                    var lineCompere = {};\r\n                    var table = {};\r\n                    var dates = [];\r\n                    if (this.props.weekly) {\r\n\r\n                        var day = dateO.getDay();\r\n                        var sun = new Date(this.props.date - day * 86400000);\r\n                        var sat = new Date(sun.getTime() + 518400000);\r\n                        dateOStr = sun.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + sat.toLocaleDateString('en-GB', {\r\n                            day: 'numeric',\r\n                            month: 'short'\r\n                        });\r\n                    }\r\n                    if (this.props.monthly) {\r\n                        dateO = new Date(this.props.date);\r\n                        dateOStr = dateO.toLocaleDateString('en-GB', {month: 'short'});\r\n                    }\r\n                    var avgCompO = {};\r\n                    avgCompO[\"before\"] = {sum: 0, counter: 0};\r\n                    avgCompO[\"after\"] = {sum: 0, counter: 0};\r\n\r\n\r\n                    // ***** loop on before -\r\n\r\n                    if (beforeRecords) {\r\n                    for (var i = 0; i < beforeRecords.length; i++) {\r\n                        if (this.props.showDaily) {\r\n                            var date = new Date(beforeRecords[i].ValidTime)\r\n                            var dateStr = date.toLocaleDateString('en-GB', {\r\n                                day: 'numeric',\r\n                                month: 'short',\r\n                                year: \"numeric\"\r\n                            }).replace(/ /g, '-')\r\n\r\n                            pointsCompere[dateStr] = beforeRecords[i].Data.toFixed(2);\r\n\r\n                        } else if (this.props.weekly) {\r\n                            date = new Date(beforeRecords[i].ValidTime);\r\n                            var dayOfWeek = date.getDay();\r\n                            var sunday = new Date(beforeRecords[i].ValidTime - dayOfWeek * 86400000);\r\n                            var saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {\r\n                                day: 'numeric',\r\n                                month: 'short'\r\n                            });\r\n                            if (dateOStr === dateStr) {\r\n\r\n                                avgCompO[\"before\"][\"counter\"]++;\r\n                                avgCompO[\"before\"][\"sum\"] += beforeRecords[i].Data;\r\n\r\n                                if (!week) {\r\n                                    week = true;\r\n                                    dates.push(beforeRecords[i].ValidTime);\r\n                                }\r\n                            } else {\r\n                                if (table[dateStr] == null) {\r\n                                    table[dateStr] = {};\r\n                                    table[dateStr][\"counter\"] = 0;\r\n                                    table[dateStr][\"sum\"] = 0;\r\n                                    dates.push(beforeRecords[i].ValidTime);\r\n                                }\r\n                                table[dateStr][\"sum\"] += beforeRecords[i].Data;\r\n                                table[dateStr][\"counter\"]++;\r\n                            }\r\n                        } else if (this.props.monthly) {\r\n                            date = new Date(beforeRecords[i].ValidTime);\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                            if (dateOStr === dateStr) {\r\n\r\n                                avgCompO[\"before\"][\"counter\"]++;\r\n                                avgCompO[\"before\"][\"sum\"] += data[i].Data;\r\n\r\n                                if (!week) {\r\n                                    week = true;\r\n                                    dates.push(beforeRecords[i].ValidTime);\r\n                                }\r\n                            } else {\r\n                                if (table[dateStr] == null) {\r\n                                    table[dateStr] = {};\r\n                                    table[dateStr][\"counter\"] = 0;\r\n                                    table[dateStr][\"sum\"] = 0;\r\n                                    dates.push(data[i].ValidTime);\r\n                                }\r\n                                table[dateStr][\"sum\"] += beforeRecords[i].Data;\r\n                                table[dateStr][\"counter\"]++;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n                    // ***** loop on after -\r\n                    afterRecords = afterRecords[0].docs;\r\n                    if(afterRecords){\r\n                    for (var i = 0; i < afterRecords.length ; i++) {\r\n                        if (this.props.showDaily) {\r\n                            var date = new Date(afterRecords[i].ValidTime)\r\n                            var dateStr = date.toLocaleDateString('en-GB', {\r\n                                day: 'numeric',\r\n                                month: 'short',\r\n                                year: \"numeric\"\r\n                            }).replace(/ /g, '-')\r\n\r\n                            lineCompere[dateStr] = afterRecords[i].Data.toFixed(2);\r\n\r\n                        } else if (this.props.weekly) {\r\n                            date = new Date(afterRecords[i].ValidTime);\r\n                            var dayOfWeek = date.getDay();\r\n                            var sunday = new Date(afterRecords[i].ValidTime - dayOfWeek * 86400000);\r\n                            var saturday = new Date(sunday.getTime() + 518400000);\r\n                            dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {\r\n                                day: 'numeric',\r\n                                month: 'short'\r\n                            });\r\n                            if (dateOStr === dateStr) {\r\n\r\n                                avgCompO[\"after\"][\"counter\"]++;\r\n                                avgCompO[\"after\"][\"sum\"] += afterRecords[i].Data;\r\n\r\n                                if (!week) {\r\n                                    week = true;\r\n                                    dates.push(afterRecords[i].ValidTime);\r\n                                }\r\n                            } else {\r\n                                if (table[dateStr] == null) {\r\n                                    table[dateStr] = {};\r\n                                    table[dateStr][\"counter\"] = 0;\r\n                                    table[dateStr][\"sum\"] = 0;\r\n                                    dates.push(afterRecords[i].ValidTime);\r\n                                }\r\n                                table[dateStr][\"sum\"] += afterRecords[i].Data;\r\n                                table[dateStr][\"counter\"]++;\r\n                            }\r\n                        } else if (this.props.monthly) {\r\n                            date = new Date(afterRecords[i].ValidTime);\r\n                            dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                            if (dateOStr === dateStr) {\r\n\r\n                                avgCompO[\"after\"][\"counter\"]++;\r\n                                avgCompO[\"after\"][\"sum\"] += data[i].Data;\r\n\r\n                                if (!week) {\r\n                                    week = true;\r\n                                    dates.push(afterRecords[i].ValidTime);\r\n                                }\r\n                            } else {\r\n                                if (table[dateStr] == null) {\r\n                                    table[dateStr] = {};\r\n                                    table[dateStr][\"counter\"] = 0;\r\n                                    table[dateStr][\"sum\"] = 0;\r\n                                    dates.push(data[i].ValidTime);\r\n                                }\r\n                                table[dateStr][\"sum\"] += afterRecords[i].Data;\r\n                                table[dateStr][\"counter\"]++;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                    }\r\n\r\n                    dates = dates.sort();\r\n                    if (this.props.weekly || this.props.monthly) {\r\n                        for (i = 0; i < dates.length; i++) {\r\n                            date = new Date(dates[i]);\r\n                            if (this.props.weekly) {\r\n                                dayOfWeek = date.getDay();\r\n                                sunday = new Date(date.getTime() - dayOfWeek * 86400000);\r\n                                saturday = new Date(sunday.getTime() + 518400000);\r\n                                dateStr = sunday.toLocaleDateString('en-GB', {day: 'numeric'}) + \" - \" + saturday.toLocaleDateString('en-GB', {\r\n                                    day: 'numeric',\r\n                                    month: 'short'\r\n                                });\r\n                            } else {\r\n                                dateStr = date.toLocaleDateString('en-GB', {month: 'short'});\r\n                            }\r\n                            if (dateStr === dateOStr) {\r\n                                pointsCompere[dateStr] = (avgCompO[\"before\"][\"sum\"] / avgCompO[\"before\"][\"counter\"]).toFixed(2);\r\n                                lineCompere[dateStr] = (avgCompO[\"after\"][\"sum\"] / avgCompO[\"after\"][\"counter\"]).toFixed(2);\r\n                                continue;\r\n                            }\r\n                            if (date <= oDay || this.props.date==0) {\r\n                                pointsCompere[dateStr] = (table[dateStr][\"sum\"] / table[dateStr][\"counter\"]).toFixed(2);\r\n                            }\r\n                            if (date >= oDay) {\r\n                                lineCompere[dateStr] = (table[dateStr][\"sum\"] / table[dateStr][\"counter\"]).toFixed(2);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n                    var dataX = [\r\n                        {\"name\": \"מטופל לפני הניתוח\", \"data\": points},\r\n                        {\"name\": \"מטופל אחרי הניתוח\", \"data\": line},\r\n                        {\"name\": \"השוואת מטופלים לפני הניתוח\", \"data\": pointsCompere},\r\n                        {\"name\": \"השוואת מטופלים אחרי הניתוח\", \"data\": lineCompere}\r\n                    ];\r\n\r\n            }\r\n\r\n            return (\r\n                <div>\r\n                    {this.props.ready ? <div>\r\n                        <div className=\"App\">\r\n                            <h1>{this.props.name}</h1>\r\n                            {noData ? <h4>לא קיים מידע על המשתמש</h4> :\r\n                                <LineChart download={true} data={dataX} min={min}/>}\r\n                        </div>\r\n                    </div> : null}\r\n                </div>\r\n            )\r\n        }\r\n\r\n}\r\n\r\nexport default CompGraph","import React, {Component} from \"react\"\r\nimport \"./DisplayButton.css\"\r\nimport Table from \"./Table\"\r\nimport TableComp from \"./TableComp\"\r\nimport TableAns from \"./TableAns\"\r\nimport Graph from \"./Graph\"\r\nimport TablePer from \"./TablePer\"\r\nimport SleepGraph from \"./SleepGraph\"\r\nimport GraphAns from \"./GraphAns\"\r\nimport PatientData from \"./PatientData\"\r\nimport CompGraph from \"./CompGraph\"\r\n\r\n\r\n\r\nclass DisplayButton extends Component {\r\n    constructor(props) {\r\n        super()\r\n        this.state = {\r\n            graph: true,\r\n            table : false\r\n        }\r\n\r\n        this.styleLabel = {\r\n            fontSize: \"calc(10px)\",\r\n            color: \"black\",\r\n            margin: \"2vmin 2vmin 2vmin 2vmin\"\r\n        }\r\n        this.handleChange = this.handleChange.bind(this)\r\n\r\n        this.clean = function(arr){\r\n            var tempDic = {};\r\n            var temp = [];\r\n            for(var i = 0; i < arr.length; i++){\r\n                var date = new Date(arr[i].ValidTime)\r\n                var dateStr = date.toLocaleDateString('en-GB', {day: 'numeric', month: 'short'}).replace(/ /g, '-')\r\n                if(tempDic[dateStr] === undefined){\r\n                    tempDic[dateStr] = arr[i];\r\n                    temp.push(arr[i])\r\n                }\r\n            }\r\n            return temp;\r\n        }\r\n        \r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({graph: false, table:false, [name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        var arrSteps, arrDis, arrCal, arrWeat, arrSleep,arrCompSteps=[],arrCompDis=[],arrCompCal=[];\r\n        arrCompCal.push({\"Before\":[],\"After\":[]});\r\n        arrCompDis.push({\"Before\":[],\"After\":[]});\r\n        arrCompSteps.push({\"Before\":[],\"After\":[]});\r\n        var  arr1 = [], arr2 = [], arr3 = [], arr4 = [], arr5 = [], arr6 = [];\r\n        for(var i = 0; i < this.props.dataArr.length; i++){\r\n            if(this.props.dataArr[i].name === \"צעדים\"){\r\n                arrSteps = this.props.dataArr[i].values\r\n            }\r\n            else if(this.props.dataArr[i].name === \"מרחק\"){\r\n                arrDis = this.props.dataArr[i].values\r\n            }\r\n            else if(this.props.dataArr[i].name === \"קלוריות\"){\r\n                arrCal = this.props.dataArr[i].values;\r\n            }\r\n            else if(this.props.dataArr[i].name === \"מזג האוויר\"){\r\n                if(this.props.dataArr[i].values.length && this.props.dataArr[i].values[0].Data && this.props.dataArr[i].values[0].Data.High){\r\n                    for(var j = 0; j < this.props.dataArr[i].values.length; j++){\r\n                        this.props.dataArr[i].values[j].Data = this.props.dataArr[i].values[j].Data.High;\r\n                    }\r\n                }\r\n                arrWeat = this.props.dataArr[i].values;\r\n            }\r\n            else if(this.props.dataArr[i].name === \"שעות שינה\"){\r\n                arrSleep = this.props.dataArr[i].values;\r\n            }\r\n            else if (this.props.dataArr[i].name === \"השוואת צעדים לפני\"){\r\n                arrCompSteps[0].Before.push(this.props.dataArr[i].values);\r\n\r\n            }\r\n\r\n            else if (this.props.dataArr[i].name === \"השוואת צעדים אחרי\") {\r\n                if (arrCompSteps[0].After.length == 0)\r\n                arrCompSteps[0].After.push(this.props.dataArr[i].values);\r\n                else\r\n                    arrCompSteps[0].After[0][0].docs=arrCompSteps[0].After[0][0].docs.concat(this.props.dataArr[i].values[0].docs);\r\n            }\r\n            else if (this.props.dataArr[i].name === \"השוואת קלוריות לפני\")\r\n                arrCompCal[0].Before.push(this.props.dataArr[i].values);\r\n            else if (this.props.dataArr[i].name === \"השוואת קלוריות אחרי\"){\r\n                if (arrCompCal[0].After.length == 0)\r\n                    arrCompCal[0].After.push(this.props.dataArr[i].values);\r\n                else\r\n                    arrCompCal[0].After[0][0].docs=arrCompCal[0].After[0][0].docs.concat(this.props.dataArr[i].values[0].docs);\r\n            }\r\n\r\n            else if (this.props.dataArr[i].name === \"השוואת מרחק לפני\")\r\n                arrCompDis[0].Before.push(this.props.dataArr[i].values);\r\n            else if (this.props.dataArr[i].name === \"השוואת מרחק אחרי\"){\r\n                if (arrCompDis[0].After.length == 0)\r\n                    arrCompDis[0].After.push(this.props.dataArr[i].values);\r\n                else\r\n                    arrCompDis[0].After[0][0].docs=arrCompDis[0].After[0][0].docs.concat(this.props.dataArr[i].values[0].docs);\r\n            }\r\n                arrCompDis[0].After.push(this.props.dataArr[i].values);\r\n\r\n        }\r\n        \r\n        for(i = 0; i < this.props.periodicAnswers.length; i++){\r\n            if(this.props.periodicAnswers[i].QuestionnaireID === 1){\r\n                arr1 = this.props.periodicAnswers[i].data;\r\n                for(j = 0; j < arr1.length; j++){\r\n                    arr1[j][\"Data\"] = arr1[j][\"Score\"];\r\n                }\r\n            }\r\n            if(this.props.periodicAnswers[i].QuestionnaireID === 2){\r\n                arr2 = this.props.periodicAnswers[i].data;\r\n                for(j = 0; j < arr2.length; j++){\r\n                    arr2[j][\"Data\"] = arr2[j][\"Score\"];\r\n                }\r\n            }\r\n            if(this.props.periodicAnswers[i].QuestionnaireID === 3){\r\n                arr3 = this.props.periodicAnswers[i].data;\r\n                for(j = 0; j < arr3.length; j++){\r\n                    arr3[j][\"Data\"] = arr3[j][\"Score\"];\r\n                }\r\n            }\r\n            if(this.props.periodicAnswers[i].QuestionnaireID === 4){\r\n                arr4 = this.props.periodicAnswers[i].data;\r\n                for(j = 0; j < arr4.length; j++){\r\n                    arr4[j][\"Data\"] = arr4[j][\"Score\"];\r\n                }\r\n            }\r\n            if(this.props.periodicAnswers[i].QuestionnaireID === 5){\r\n                arr5 = this.props.periodicAnswers[i].data;\r\n                for(j = 0; j < arr5.length; j++){\r\n                    arr5[j][\"Data\"] = arr5[j][\"Score\"];\r\n                }\r\n            }\r\n            if(this.props.periodicAnswers[i].QuestionnaireID === 6){\r\n                arr6 = this.props.periodicAnswers[i].data;\r\n                for(j = 0; j < arr6.length; j++){\r\n                    arr6[j][\"Data\"] = arr6[j][\"Score\"];\r\n                }\r\n            }\r\n        }\r\n        let CaloriesIncludeCompere=[],StepsIncludeCompere=[],DistanceIncludeCompere=[];\r\n        CaloriesIncludeCompere.push(arrCompCal);\r\n        CaloriesIncludeCompere.push(arrCal);\r\n        StepsIncludeCompere.push(arrCompSteps);\r\n        StepsIncludeCompere.push(arrSteps);\r\n        DistanceIncludeCompere.push(arrCompDis);\r\n        DistanceIncludeCompere.push(arrDis);\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"display\">\r\n                    { (this.props.dataArr.length > 0 || this.props.dailyA.length > 0) ? <div><div className=\"checkButton\" id=\"cbRight\">\r\n                    <label>\r\n                        <input \r\n                            type=\"checkbox\" \r\n                            value=\"1\"\r\n                            name=\"graph\"\r\n                            checked={this.state.graph}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                        <span>\r\n                            <div id=\"text\">\r\n                                הצג מידע גרפי\r\n                            </div>\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n                <div className=\"checkButton\" id=\"cbLeft\">\r\n                    <label>\r\n                        <input \r\n                            type=\"checkbox\" \r\n                            value=\"1\"\r\n                            name=\"table\"\r\n                            checked={this.state.table}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                        <span>\r\n                            <div id=\"text\">\r\n                                הצג מידע טבלאי  \r\n                            </div>\r\n                        </span>\r\n                    </label>\r\n                </div> </div> : null }\r\n                </div>\r\n                <br />\r\n                <br />\r\n                { ((this.state.graph || this.state.table) && this.props.ready) ? <PatientData user={this.props.user} table={this.state.table}/> : null}\r\n                { (this.state.table && this.props.dataArr.length > 0 && this.props.ready) ? <h3>מדדים</h3> : null }\r\n                { this.state.table && sessionStorage.type==\"patient\" ? <div className=\"ex1\"><Table dataArr={this.props.dataArr}\r\n                    steps={this.props.steps}\r\n                    distance={this.props.distance}\r\n                    calories={this.props.calories}\r\n                    weather={this.props.weather}\r\n                    sleep={this.props.sleep}\r\n                    date={this.props.date}\r\n                    showDaily={this.props.showDaily}\r\n                    weekly={this.props.weekly}\r\n                    monthly={this.props.monthly}\r\n                    name={this.props.name}\r\n                    ready={this.props.ready}\r\n                /> </div>: null }\r\n\r\n                { this.state.table && sessionStorage.type==\"doctor\" ? <div className=\"ex1\"><TableComp dataArr={this.props.dataArr}\r\n                                                                                                       steps={this.props.steps}\r\n                                                                                                       distance={this.props.distance}\r\n                                                                                                       calories={this.props.calories}\r\n                                                                                                       weather={this.props.weather}\r\n                                                                                                       sleep={this.props.sleep}\r\n                                                                                                       date={this.props.date}\r\n                                                                                                       showDaily={this.props.showDaily}\r\n                                                                                                       weekly={this.props.weekly}\r\n                                                                                                       monthly={this.props.monthly}\r\n                                                                                                       name={this.props.name}\r\n                                                                                                       ready={this.props.ready}\r\n                /> </div>: null }\r\n                <br />\r\n                { (this.state.table && this.props.dailyQ && this.props.ready) ? <h3>שאלון יומי</h3> : null }\r\n                { (this.state.table && this.props.dailyQ) ? <TableAns data={this.props.dailyA} \r\n                    date={this.props.date}\r\n                    showDaily={this.props.showDaily}\r\n                    weekly={this.props.weekly}\r\n                    monthly={this.props.monthly}\r\n                    name={this.props.name}\r\n                    ready={this.props.ready}\r\n                    /> : null }\r\n                { (this.state.table && this.props.perQ && this.props.ready) ? <h3>שאלונים תקופתיים</h3> : null }\r\n                { (this.state.table && this.props.perQ) ? <TablePer data={this.props.periodicAnswers} \r\n                    date={this.props.date}\r\n                    showDaily={this.props.showDaily}\r\n                    weekly={this.props.weekly}\r\n                    monthly={this.props.monthly}\r\n                    ready={this.props.ready}\r\n                    name={this.props.name} />: null }\r\n\r\n\r\n                { (this.state.graph && this.props.steps ) ?  ((arrCompSteps[0].Before.length==0 && arrCompSteps[0].After.length==0 ) ? <Graph data={arrSteps} date={this.props.date} name=\"צעדים\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> :\r\n                    <CompGraph data={StepsIncludeCompere} date={this.props.date} name=\"צעדים\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> ):null }\r\n\r\n                { (this.state.graph && this.props.distance )? ((arrCompDis[0].Before.length==0 &&  arrCompDis[0].After.length==0 ) ? <Graph data={arrDis} date={this.props.date} name=\"מרחק\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> :\r\n                    <CompGraph data={DistanceIncludeCompere} date={this.props.date} name=\"מרחק\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/>) :null }\r\n\r\n                { (this.state.graph && this.props.calories)? ((arrCompCal[0].Before.length==0 &&  arrCompCal[0].After.length==0) ? <Graph data={arrCal} date={this.props.date} name=\"קלוריות\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> :\r\n                    <CompGraph data={CaloriesIncludeCompere} date={this.props.date} name=\"קלוריות\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/>):null}\r\n\r\n                { (this.state.graph && this.props.weather) ? <Graph data={arrWeat} date={this.props.date} name=\"מזג האוויר\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && this.props.sleep) ? <SleepGraph data={arrSleep} date={this.props.date} name=\"שעות שינה\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && this.props.dailyQ) ? <GraphAns data={this.props.dailyA} date={this.props.date} name=\"שאלון יומי\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && arr1.length > 0 && this.props.perQ) ? <Graph data={arr1} date={this.props.date} name=\"Oswestry Disability Index\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && arr2.length > 0 && this.props.perQ) ? <Graph data={arr2} date={this.props.date} name=\"Neck Disability Index\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && arr3.length > 0 && this.props.perQ) ? <Graph data={arr3} date={this.props.date} name=\"Lower Extremity Functional Scale\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && arr4.length > 0 && this.props.perQ) ? <Graph data={arr4} date={this.props.date} name=\"Oswestry low back pain\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && arr5.length > 0 && this.props.perQ) ? <Graph data={arr5} date={this.props.date} name=\"EQ-5D\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n                { (this.state.graph && arr6.length > 0 && this.props.perQ) ? <Graph data={arr6} date={this.props.date} name=\"EQ-5D scale\" showDaily={this.props.showDaily} weekly={this.props.weekly} monthly={this.props.monthly} ready={this.props.ready}/> : null }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DisplayButton","import React, {Component} from \"react\"\r\nimport axios from 'axios';\r\nimport Card from 'react-bootstrap/Card'\r\nimport DisplayButton from './DisplayButton';\r\n\r\nclass PatientSearch extends Component {\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        var date = new Date();\r\n        var three_month = date.setMonth(date.getMonth() - 3).toISOString().split(\"T\")[0];\r\n        var x = date.toISOString().split(\"T\")[0];\r\n        this.state = {\r\n            pName: \"\",\r\n            fName: \"\",\r\n            end_date: x,\r\n            start_date: three_month,\r\n            steps: true,\r\n            distance : true,\r\n            weather: true,\r\n            calories: true,\r\n            sleeping_hours: true,\r\n            dataArr: [],\r\n            periodicAnswers: [],\r\n            showPopup: false,\r\n            textPopup: [],\r\n            dailyA: [],\r\n            numOfUsers: 0,\r\n            dailyQ: true,\r\n            perQ: true,\r\n            x: [],\r\n            date: 0,\r\n            showDaily: true,\r\n            weekly: false,\r\n            monthly: false,\r\n            user: {},\r\n            ready: false,\r\n            todayDate: x,\r\n            // optionsPName: [],\r\n            className: \"normal\",\r\n            // namesDiv: [],\r\n            isFetchingNames: false\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.getRequest = this.getRequest.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.selectUser = this.selectUser.bind(this);\r\n        this.findUser = this.findUser.bind(this);\r\n        this.fetchNames = this.fetchNames.bind(this)\r\n    }\r\n    componentDidMount() {\r\n        if (sessionStorage.getItem('doctor')) {\r\n            this.fetchNames();\r\n        }\r\n    }\r\n\r\n    async fetchNames(){\r\n        var list = [];\r\n        var namesDiv = [];\r\n        this.setState({isFetchingNames: true});\r\n        var response = await axios.get(\r\n            \"  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/getNames\",\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n        if(response.data.data){\r\n            for(var i = 0; i < response.data.data.length; i++){\r\n                namesDiv.push(response.data.data[i]);\r\n            }\r\n            var names = response.data.data.map(function(item, i){\r\n                return item.first.trim() + \" \" + item.last.trim();\r\n            });\r\n            names = names.sort();\r\n            var uniqueNames = Array.from(new Set(names));\r\n            for(i = 0; i < uniqueNames.length; i++){\r\n                list.push(<option key={uniqueNames[i]}>{uniqueNames[i]}</option>);\r\n            }\r\n        }\r\n        this.setState({\r\n            isFetchingNames: false,\r\n            optionsPName: list,\r\n            namesDiv: namesDiv,\r\n        });\r\n    }\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    findUser(user){\r\n        for(var i = 0; i < this.state.namesDiv.length; i++){\r\n            var name = this.state.namesDiv[i].first.trim() + \" \" + this.state.namesDiv[i].last.trim();\r\n            if(name.toLocaleLowerCase() === user.toLocaleLowerCase()){\r\n                return ([this.state.namesDiv[i].first.trim(), this.state.namesDiv[i].last.trim()])\r\n            }\r\n        }\r\n        return[\",\" , \",\"];\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value })\r\n        if(name === \"showDaily\"){\r\n            this.setState({\r\n                showDaily: true,\r\n                weekly: false,\r\n                monthly: false\r\n            })\r\n        }\r\n        else if(name === \"weekly\"){\r\n            this.setState({\r\n                showDaily: false,\r\n                weekly: true,\r\n                monthly: false\r\n            })\r\n        }\r\n        else if(name === \"monthly\"){\r\n            this.setState({\r\n                showDaily: false,\r\n                weekly: false,\r\n                monthly: true\r\n            })\r\n        }\r\n    }\r\n\r\n    async getRequest(name,url){\r\n        if(sessionStorage.getItem('doctor')){\r\n            return this.getDoctorRequest(name, url);\r\n        }\r\n        if(sessionStorage.getItem('patient')){\r\n            return this.getPatientRequest(name, url);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    async getDoctorRequest(name, url){\r\n        var nameSplit = this.findUser(this.state.pName);\r\n        let getUrl = '  https://icc.ise.bgu.ac.il/njsw18auth/doctors/' + url + '?FirstName=' + nameSplit[0] + '&LastName=' + nameSplit[1];\r\n        if(this.state.start_date !== \"\"){\r\n            var date = new Date(this.state.start_date)\r\n            let start_time = date.getTime();\r\n            getUrl += (\"&start_time=\" + start_time);\r\n        }\r\n        if(this.state.end_date !== \"\"){\r\n            date = new Date(this.state.end_date)\r\n            date = new Date(date.getTime() + 86400000);\r\n            let end_time = date.getTime();\r\n            getUrl += (\"&end_time=\" + end_time);\r\n        }\r\n        const response = await axios.get(\r\n            getUrl,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n        if(response.data.message === \"Not Found\"){\r\n            return null;\r\n        }\r\n        return({\r\n            values: response.data.data,\r\n            name : name,\r\n            numOfUsers: response.data.data.length\r\n        });\r\n    }\r\n\r\n    async getPatientRequest(name, url){\r\n        let getUrl = `  https://icc.ise.bgu.ac.il/njsw18auth/patients/${url}`;\r\n        let start_time;\r\n        if(this.state.start_date !== \"\"){\r\n            var date = new Date(this.state.start_date);\r\n            start_time = date.getTime();\r\n            // getUrl += (\"&start_time=\" + start_time);\r\n        }\r\n        let end_time;\r\n        if(this.state.end_date !== \"\"){\r\n            date = new Date(this.state.end_date)\r\n            date = new Date(date.getTime() + 86400000);\r\n            end_time = date.getTime();\r\n            // getUrl += (\"&end_time=\" + end_time);\r\n        }\r\n        const response = await axios.get(\r\n            getUrl,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                },\r\n                params: {\r\n                    start_time: start_time,\r\n                    end_time: end_time\r\n                }\r\n            }\r\n        );\r\n        return({\r\n            values: response.data.data,\r\n            name : name,\r\n            numOfUsers: response.data.data.length\r\n        });\r\n    }\r\n\r\n\r\n        async selectUser(key){\r\n        let arr = this.state.dataArr;\r\n        let d = this.state.dailyA;\r\n        var da = [];\r\n        var user;\r\n        var sDate;\r\n        for(var i = 0; i < this.state.numOfUsers; i++){\r\n            if(d[i] && d[i].UserID[\"BirthDate\"] === key){\r\n                da = d[i].docs;\r\n                sDate = d[i].UserID[\"DateOfSurgery\"];\r\n                user = d[i].UserID;\r\n            }\r\n        }\r\n        for(i = 0; i < this.state.questionnaire.values.length; i++){\r\n            if(this.state.questionnaire.values[i].UserID[\"BirthDate\"] === key){\r\n                this.state.periodicAnswers.push(this.state.questionnaire.values[i][\"docs\"]);\r\n                sDate = this.state.questionnaire.values[i].UserID[\"DateOfSurgery\"];\r\n                user = this.state.questionnaire.values[i].UserID;\r\n            }\r\n        }\r\n        for(i = 0; i < arr.length; i++){\r\n            let values = [];\r\n            if(arr[i]){\r\n                for(var j = 0; j < arr[i].values.length; j++){\r\n                    if(arr[i].values[j].UserID[\"BirthDate\"] === key){\r\n                        values = arr[i].values[j].docs;\r\n                        sDate = arr[i].values[j].UserID[\"DateOfSurgery\"];\r\n                        user = arr[i].values[j].UserID;\r\n                    }\r\n                }\r\n                arr[i].values = values;\r\n            }\r\n        }\r\n        this.setState({\r\n            dataArr: arr,\r\n            dailyA: da,\r\n            date: sDate,\r\n            user: user,\r\n            ready: true,\r\n            className: \"normal\"\r\n        });\r\n        if(this.state.showPopup){\r\n            this.togglePopup();\r\n        }\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        if(event){\r\n            event.preventDefault()\r\n        }\r\n        this.setState({\r\n            ready: false,\r\n            className: \"waiting\",\r\n            periodicAnswers: []\r\n        });\r\n        var numOfUsers = 0;\r\n        var arr = [];\r\n        var  i = 0;\r\n        let response = await this.getRequest(\"צעדים\", \"metrics/getSteps\");\r\n        if(!response){\r\n            window.alert(\"לא קיים מטופל\");\r\n            return;\r\n        }\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"מרחק\", \"metrics/getDistance\")\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"קלוריות\", \"metrics/getCalories\")\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"מזג האוויר\", \"metrics/getWeather\")\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"שעות שינה\", \"metrics/getSleep\");\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"תשובות יומיות\", \"answers/getDailyAnswers\")\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        let responseQ = await this.getRequest(\"שאלון תקופתי\", \"answers/getPeriodicAnswers\")\r\n        var num = 0;\r\n        var id = {};\r\n        for(i = 0; i < responseQ.values.length; i++){\r\n            if(!id[responseQ.values[i].UserID]){\r\n                id[responseQ.values[i].UserID] = true;\r\n                num++;\r\n            }\r\n        }\r\n        if(num > numOfUsers){\r\n            numOfUsers = num;\r\n        }\r\n        this.setState({\r\n            dataArr : arr,\r\n            dailyA: response.values,\r\n            numOfUsers: numOfUsers,\r\n            questionnaire: responseQ\r\n        });\r\n        if(numOfUsers === 1){\r\n            let x = this.state.dailyA[0].UserID[\"BirthDate\"];\r\n            if(!x)\r\n                x = this.state.periodicAnswers[0].UserID[\"BirthDate\"];\r\n            if(!x)\r\n                x = this.state.dataArr[0][0].UserID[\"BirthDate\"];\r\n            this.selectUser(x)\r\n        }\r\n        if(numOfUsers > 1){\r\n            var cards = [];\r\n            for(i = 0; i < numOfUsers; i++){\r\n                let x = this.state.dailyA[i].UserID[\"BirthDate\"];\r\n                if(!x)\r\n                    x = this.state.periodicAnswers[i].UserID[\"BirthDate\"];\r\n                if(!x)\r\n                    x = this.state.dataArr[0][i].UserID[\"BirthDate\"];\r\n                let dateC = new Date(x);\r\n                this.state.x.push(dateC.toLocaleDateString('en-GB', {day: 'numeric', month: 'numeric', year:\"numeric\"}))\r\n                cards.push(\r\n                    <Card className=\"card\" key={this.state.x[i]}  onClick={() => this.selectUser(x)}>\r\n                        <Card.Body className=\"cardBody\">שם פרטי: {this.state.pName.trim()} </Card.Body>\r\n                        <Card.Body className=\"cardBody\">שם משפחה: {this.state.fName.trim()} </Card.Body>\r\n                        <Card.Body className=\"cardBody\">תאריך לידה: {this.state.x[i]}</Card.Body>\r\n                    </Card>\r\n                );\r\n            }\r\n            this.setState({\r\n                text: cards\r\n            });\r\n            this.togglePopup();\r\n        }\r\n    }\r\n    isDoctor(){\r\n        return sessionStorage.getItem('doctor')\r\n    }\r\n    render() {\r\n        require(\"./search.css\");\r\n        var today = (new Date()).toISOString().split(\"T\")[0];\r\n        var searchButton;\r\n\r\n        if (this.isDoctor()) {\r\n            searchButton = <div className=\"search\">\r\n                <label className=\"lSearch\">\r\n                    חפש מטופל:\r\n                </label>\r\n                <input className=\"iSearch\"\r\n                       id=\"pname\"\r\n                       type=\"text\"\r\n                       name=\"pName\"\r\n                       value={this.state.pName}\r\n                       placeholder=\"שם פרטי ומשפחה\"\r\n                       onChange={this.handleChange}\r\n                       list=\"first-list\"\r\n                       required\r\n                />\r\n                <button className=\"bSearch\">\r\n                    חפש\r\n                </button>\r\n            </div>\r\n        } else {\r\n            searchButton = <div><button className=\"bSearch\">חפש</button></div>\r\n        }\r\n        return (\r\n            <div>\r\n                <datalist id=\"first-list\">\r\n                    {this.state.optionsPName}\r\n                </datalist>\r\n                <datalist id=\"last-list\">\r\n                    {this.state.optionsLName}\r\n                </datalist>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    {searchButton}\r\n                    <div className=\"dates\">\r\n                        <label className=\"cSearch\">\r\n                            בחר תאריכים: מ\r\n                        </label>\r\n                        <input className=\"dSearch\"\r\n                               type=\"date\"\r\n                               name=\"start_date\"\r\n                               value={this.state.start_date}\r\n                               onChange={this.handleChange}\r\n                               max={this.state.end_date}\r\n                        />\r\n                        <label className=\"aSearch\">\r\n                            עד\r\n                        </label>\r\n                        <input className=\"dSearch\"\r\n                               type=\"date\"\r\n                               name=\"end_date\"\r\n                               value={this.state.end_date}\r\n                               onChange={this.handleChange}\r\n                               max={today}\r\n                        />\r\n                    </div>\r\n                    <div className=\"mdd\">\r\n                        <label className=\"mLabel\">\r\n                            בחר מדדים:\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"steps\"\r\n                               checked={this.state.steps}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            צעדים\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"distance\"\r\n                               checked={this.state.distance}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            מרחק\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"weather\"\r\n                               checked={this.state.weather}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            מזג האוויר\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"calories\"\r\n                               checked={this.state.calories}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            קלוריות\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"sleeping_hours\"\r\n                               checked={this.state.sleeping_hours}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            שעות שינה\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"dailyQ\"\r\n                               checked={this.state.dailyQ}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            שאלון יומי\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"perQ\"\r\n                               checked={this.state.perQ}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            שאלונים תקופתיים\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"mddShow\">\r\n                        <label className=\"mLabel\">\r\n                            בחר אופן הצגה:\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"showDaily\"\r\n                               checked={this.state.showDaily}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            יומי\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"weekly\"\r\n                               checked={this.state.weekly}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            שבועי\r\n                        </label>\r\n                        <input className=\"cInput\"\r\n                               type=\"checkbox\"\r\n                               name=\"monthly\"\r\n                               checked={this.state.monthly}\r\n                               onChange={this.handleChange}\r\n                        />\r\n                        <label className=\"mLabel\">\r\n                            חודשי\r\n                        </label>\r\n                    </div>\r\n                </form>\r\n                <br />\r\n                <DisplayButton\r\n                    dataArr={this.state.dataArr}\r\n                    steps={this.state.steps}\r\n                    distance={this.state.distance}\r\n                    calories={this.state.calories}\r\n                    weather={this.state.weather}\r\n                    sleep={this.state.sleeping_hours}\r\n                    dailyA={this.state.dailyA}\r\n                    periodicAnswers={this.state.periodicAnswers}\r\n                    dailyQ={this.state.dailyQ}\r\n                    perQ={this.state.perQ}\r\n                    date={this.state.date}\r\n                    showDaily={this.state.showDaily}\r\n                    weekly={this.state.weekly}\r\n                    monthly={this.state.monthly}\r\n                    user={this.state.user}\r\n                    name={this.state.pName.trim() + \" \" + this.state.fName.trim()}\r\n                    ready={this.state.ready}\r\n                />\r\n                {this.state.showPopup ?\r\n                    <Popup\r\n                        text={this.state.text}\r\n                        closePopup={this.togglePopup.bind(this)}\r\n                    /> : null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PatientSearch\r\n\r\nclass Popup extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className='popup'>\r\n                <div className='popup_inner' >\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                    <h4>:אנא בחר מבין הרשומות הבאות</h4>\r\n                    {this.props.text}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n/*\r\n\r\n                        <input className=\"iSearch\"\r\n                            id=\"fname\"\r\n                            type=\"text\"\r\n                            name=\"fName\"\r\n                            value={this.state.fName}\r\n                            placeholder=\"שם משפחה\"\r\n                            onChange={this.handleChange}\r\n                            list=\"last-list\"\r\n                            required\r\n                        />\r\n                        */","import React from 'react'\r\nimport \"./NavBar.css\"\r\nimport { Navbar,Nav } from 'react-bootstrap'\r\nimport {Redirect} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport NavDropdown from \"react-bootstrap/NavDropdown\";\r\nimport { FaUser,FaUserMd } from 'react-icons/fa'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport Card from \"react-bootstrap/Card\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\";\r\nimport PatientData from \"./PatientData\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nclass NavBar extends React.Component {\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            showPopup: false,\r\n            userInfo: false,\r\n            pass: \"\",\r\n            pass2: \"\",\r\n            diff: false,\r\n            isLogOut: false,\r\n            isMessage: false,\r\n            isPatientInfo: false,\r\n            isInstructions: false,\r\n            isExercises: false,\r\n            isEdit: false,\r\n        };\r\n        this.logout = this.logout.bind(this);\r\n        this.change = this.change.bind(this);\r\n        this.privateInfoShow = this.privateInfoShow.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.changeToEdit = this.changeToEdit.bind(this);\r\n        this.updateUser = this.updateUser.bind(this);\r\n    }\r\n\r\n    goToMessages() {\r\n        this.setState({\r\n            isPatientInfo: false,\r\n            isInstructions: false,\r\n            isMessage: true,\r\n            isQuestionnaires: false,\r\n            isExercises: false\r\n        })\r\n    }\r\n\r\n    goToExercises() {\r\n        this.setState({\r\n            isPatientInfo: false,\r\n            isInstructions: false,\r\n            isMessage: false,\r\n            isExercises: true,\r\n            isQuestionnaires: false\r\n        })\r\n    }\r\n\r\n    goToSearch() {\r\n        this.setState({\r\n            isPatientInfo: true,\r\n            isMessage:false,\r\n            isQuestionnaires: false,\r\n            isInstructions: false,\r\n            isExercises: false\r\n        })\r\n    }\r\n\r\n    goToQuestionnaires() {\r\n        this.setState({\r\n            isPatientInfo: false,\r\n            isMessage: false,\r\n            isInstructions: false,\r\n            isQuestionnaires: true,\r\n            isExercises: false\r\n        })\r\n    }\r\n\r\n    goToInstructions() {\r\n        this.setState({\r\n            isPatientInfo: false,\r\n            isMessage: false,\r\n            isInstructions: true,\r\n            isQuestionnaires: false,\r\n            isExercises: false\r\n        })\r\n    }\r\n\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    toggleUserInfo() {\r\n        this.setState({\r\n            userInfo: !this.state.userInfo\r\n        });\r\n    }\r\n\r\n    async handleSubmit(event){\r\n        event.preventDefault();\r\n        if(this.state.pass !== this.state.pass2){\r\n            this.setState({\r\n                diff: true\r\n            });\r\n        }\r\n        else{\r\n            let url = '  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/askChangePassword';\r\n            var token;\r\n            const response = await axios.post(\r\n                url,\r\n                {},\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }\r\n            );\r\n            token = response.data.data;\r\n            url = '  https://icc.ise.bgu.ac.il/njsw18users/passwordChangeCheck/changePassword';\r\n            const responsec = await axios.post(\r\n                url,\r\n                {\r\n                    \"NewPassword\":this.state.pass\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': token\r\n                    }\r\n                }\r\n            );\r\n            if(responsec.data.message){\r\n                window.alert(\"הסיסמא שונתה בהצלחה\");\r\n                this.togglePopup();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getInfo()\r\n    }\r\n\r\n    async getInfo(){\r\n        let url = '  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/userInfo';\r\n        var token;\r\n        const response = await axios.get(\r\n            url,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n        this.setState({currUser: response.data.data})\r\n    }\r\n\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value })\r\n    }\r\n\r\n    logout() {\r\n        sessionStorage.removeItem(\"token\");\r\n        sessionStorage.removeItem(\"type\");\r\n        sessionStorage.removeItem(\"name\");\r\n        sessionStorage.removeItem(\"doctor\");\r\n        sessionStorage.removeItem(\"patient\");\r\n        sessionStorage.removeItem(\"patientUserId\");\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"type\");\r\n        localStorage.removeItem(\"name\");\r\n        localStorage.removeItem(\"doctor\");\r\n        localStorage.removeItem(\"patient\");\r\n        this.setState({\r\n            isLogOut: true\r\n        })\r\n    }\r\n\r\n    change(){\r\n        this.togglePopup();\r\n    }\r\n\r\n    privateInfoShow(){\r\n        this.toggleUserInfo()\r\n    }\r\n\r\n    isDoctor(){\r\n        return sessionStorage.getItem('doctor')\r\n    }\r\n\r\n    changeToEdit(){\r\n        this.setState({\r\n            isEdit: !this.state.isEdit\r\n        });\r\n    }\r\n\r\n    updateUser(user){\r\n        this.setState({currUser: user})\r\n    }\r\n\r\n    render() {\r\n        var path = window.location.pathname;\r\n        require(\"./NavBar.css\");\r\n        var iconType;\r\n        if (this.isDoctor()) {\r\n            iconType = <FaUserMd class=\"userIcon\" style={{color: 'white'}} size={25}/>\r\n        }else{\r\n            iconType =  <FaUser class=\"userIcon\" style={{color: 'white'}} size={25}/>\r\n        }\r\n        return (\r\n            <div>\r\n                <Navbar class=\"navbar navbar-fixed-top\" bg=\"dark\" variant=\"dark\" fixed=\"top\">\r\n                    <div id=\"buttons\">\r\n                        <button id=\"change\" class=\"btn btn-dark\" type=\"button\" onClick={() => this.goToSearch()}>מדדים אישיים</button>\r\n                        <span>{'    '}            </span>\r\n                        <button id=\"change\" class=\"btn btn-dark\" type=\"button\" onClick={() => this.goToQuestionnaires()}>שאלונים</button>\r\n                        <span>{'              '}</span>\r\n                        <button id=\"change\" class=\"btn btn-dark\" type=\"button\"  onClick={() => this.goToMessages()}>לוח הודעות</button>\r\n                        <button id=\"change\" class=\"btn btn-dark\" type=\"button\" onClick={() => this.goToExercises()}>תרגולים רפואיים</button>\r\n                        <button id=\"change\" class=\"btn btn-dark\" type=\"button\" onClick={()=> this.goToInstructions()}>הדרכות ניתוח</button>\r\n                        {this.state.isMessage ? <Redirect to=\"/messages\" /> : null}\r\n                        {this.state.isPatientInfo ? <Redirect to=\"/search\" /> : null}\r\n                        {this.state.isQuestionnaires ? <Redirect to=\"/questionnaires\" /> : null}\r\n                        {this.state.isQuestionnaires ? this.setState({isQuestionnaires: false}) : null}\r\n                        {this.state.isInstructions ? <Redirect to=\"/instructions\" /> : null}\r\n                        {this.state.isExercises ? <Redirect to=\"/exercises\" /> : null}\r\n                        {this.state.isLogOut ? <Redirect to=\"/\" /> : null}\r\n                        {this.state.showPopup ?\r\n                            <Popup\r\n                                change={this.handleChange.bind(this)}\r\n                                closePopup={this.togglePopup.bind(this)}\r\n                                handleSubmit={this.handleSubmit.bind(this)}\r\n                                diff={this.state.diff}\r\n                            /> : null\r\n                        }\r\n                        {this.state.userInfo && sessionStorage.getItem('patient') ?\r\n                            <UserInfo\r\n                                user = {this.state.currUser}\r\n                                isEdit = {this.state.isEdit}\r\n                                closePopup={this.toggleUserInfo.bind(this)}\r\n                                changeToEdit = {this.changeToEdit}\r\n                                updateUser = {this.updateUser}\r\n                            /> : null\r\n                        }\r\n                        {this.state.userInfo && sessionStorage.getItem('doctor') ?\r\n                            <DoctorInfo\r\n                                user = {this.state.currUser}\r\n                                isEdit = {this.state.isEdit}\r\n                                closePopup={this.toggleUserInfo.bind(this)}\r\n                                changeToEdit = {this.changeToEdit}\r\n                                updateUser = {this.updateUser}\r\n                            /> : null\r\n                        }\r\n                    </div>\r\n                    <NavDropdown  id=\"dropdown-item-button\" style={{color : 'white'}} title = {sessionStorage.getItem(\"name\")}>\r\n                        <NavDropdown.Item as=\"button\" onClick={() => this.change()}>שנה סיסמא</NavDropdown.Item>\r\n                        <NavDropdown.Item as=\"button\" onClick={() => this.logout()}>התנתק</NavDropdown.Item>\r\n                        <NavDropdown.Item as=\"button\" onClick={() => this.privateInfoShow()}>פרטים אישיים</NavDropdown.Item>\r\n                    </NavDropdown>\r\n                    {iconType}\r\n                    <Navbar.Brand>\r\n                        <img\r\n                            alt=\"\"\r\n                            src={require(\"./first_logo.png\")}\r\n                            width=\"70\"\r\n                            height=\"30\"\r\n                            className=\"d-inline-block align-top\"\r\n                        />{' '}\r\n                    </Navbar.Brand>\r\n                </Navbar>\r\n                <br/>\r\n                <br/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NavBar;\r\n\r\nclass Popup extends React.Component {\r\n    render() {\r\n        // require(\"./NavBar.css\");\r\n        return (\r\n            <div className='popup'>\r\n                <div className='popup_inner'>\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                    <h3 id=\"h3\">החלפת סיסמא</h3>\r\n                    <form onSubmit={this.props.handleSubmit}>\r\n                        <div className=\"lineC\">\r\n                            <label>\r\n                                סיסמא חדשה:\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"lineC\">\r\n                            <input type=\"password\" name=\"pass\" id=\"pass\" onChange={this.props.change} required/>\r\n                        </div>\r\n                        <div className=\"lineC\">\r\n                            <label>\r\n                                הקלד את הסיסמא מחדש:\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"lineC\">\r\n                            <input type=\"password\" name=\"pass2\" id=\"pass2\" onChange={this.props.change} required/>\r\n                        </div>\r\n                        <div className=\"lineC\">\r\n                            {this.props.diff ? <label id=\"diffPass\">הסיסמאות שונות</label> : null}\r\n                        </div>\r\n                        <div className=\"lineC\">\r\n                            <input type=\"submit\" value=\"שלח\"/>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nclass DoctorInfo extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"\",\r\n            fName: this.props.user.First_Name,\r\n            lName: this.props.user.Last_Name,\r\n            bday: new Date(this.props.user.BirthDate),\r\n            phone: this.props.user.Phone_Number\r\n        };\r\n        this.handleChangeInfo = this.handleChangeInfo.bind(this);\r\n        this.handleSubmitInfo = this.handleSubmitInfo.bind(this);\r\n    }\r\n    handleChangeInfo(e) {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n    async handleSubmitInfo(event) {\r\n        event.preventDefault();\r\n        var bDay = new Date(this.state.bday);\r\n        var now = new Date();\r\n        var dateOfSurgery = new Date(this.state.dateOfSurgery);\r\n        let height_double = Number(this.state.height / 100);\r\n        let bmi = String((Number(this.state.weight)/Math.pow(height_double,2)));\r\n        const response = await axios.put('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/doctorUpdate', {\r\n                // UserID: this.state.userName,\r\n                First_Name: this.state.fName,\r\n                Last_Name: this.state.lName,\r\n                Phone_Number: this.state.phone,\r\n                BirthDate: bDay.getTime(),\r\n                ValidTime: now.getTime()\r\n            },\r\n            {headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }})\r\n        this.props.changeToEdit()\r\n        this.props.updateUser(response.data.data)\r\n    }\r\n    render() {\r\n        require(\"./NavBar.css\");\r\n        let bDate = new Date(this.state.bday).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n        var today = new Date();\r\n        var birthday = new Date(this.props.user[\"BirthDate\"]);\r\n        var age = Math.floor((today.getTime() - birthday.getTime())/ 31536000000)\r\n        var today = (new Date()).toISOString().split(\"T\")[0];\r\n        var date = new Date(this.state.bday).toISOString().substr(0,10);\r\n        return (\r\n            <div className='popup'>\r\n                <div className='popup_inner_info'>\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                    {!this.props.isEdit ?\r\n                        <Card class=\"cardInfo\">\r\n                            <Card.Header><b>{this.props.user.First_Name}{' '}{this.props.user.Last_Name}</b></Card.Header>\r\n                            <ListGroup variant=\"flush\">\r\n                                <ListGroup.Item className={\"listItem\"} > תאריך לידה: {bDate} </ListGroup.Item>\r\n                                <ListGroup.Item className={\"listItem\"}> גיל: {age}</ListGroup.Item>\r\n                                {/*<ListGroup.Item className={\"listItem\"}> מין: {this.props.user.Gender} </ListGroup.Item>*/}\r\n                                <ListGroup.Item className={\"listItem\"}> טלפון: {this.props.user.Phone_Number} </ListGroup.Item>\r\n                            </ListGroup>\r\n                        </Card> : null }\r\n                    {this.props.isEdit ?\r\n                        <form onSubmit={this.handleSubmitInfo} onReset={this.handleReset} id=\"new_user_form\">\r\n                            <br/>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">שם פרטי</label>\r\n                                <input className=\"inputs_in_add_user\" name=\"fName\" type=\"text\" value={this.state.fName} maxLength=\"20\"\r\n                                       onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">שם משפחה </label>\r\n                                <input className=\"inputs_in_add_user\" name=\"lName\" type=\"text\" value={this.state.lName} maxLength=\"20\"\r\n                                       onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">מספר טלפון</label>\r\n                                <input className=\"inputs_in_add_user\" name=\"phone\" type=\"tel\" id=\"phone\" pattern=\"[0-9]{10}\"\r\n                                       value={this.state.phone} onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">תאריך לידה</label>\r\n                                <input className=\"inputs_in_add_user\" name=\"bday\" type=\"date\" max={today}\r\n                                       value={date} onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <input style={{width: 150}} variant=\"info\" type=\"submit\" value=\"שמור\" className=\"submit_and_reset_buttons\"/>\r\n                            </div>\r\n                        </form> : null}\r\n                    {!this.props.isEdit ?\r\n                        <button style={{width: 150, float:'left',position:'relative'}} variant=\"info\" onClick={this.props.changeToEdit}> עריכת פרטים </button> : null}\r\n                    {this.props.isEdit ?\r\n                        <div className=\"divs_in_add\">\r\n                            <button style={{width: 150,position:'relative'}} variant=\"info\" onClick={this.props.changeToEdit}>הצגת פרטים </button></div> : null}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass UserInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"\",\r\n            fName: this.props.user.First_Name,\r\n            lName: this.props.user.Last_Name,\r\n            bday: new Date(this.props.user.BirthDate),\r\n            phone: this.props.user.Phone_Number,\r\n            gender: this.props.user.Gender,\r\n            smoke: this.props.user.Smoke,\r\n            dateOfSurgery:new Date(this.props.user.DateOfSurgery),\r\n            surgeryType: this.props.user.SurgeryType,\r\n            education: this.props.user.Education,\r\n            height: this.props.user.Height,\r\n            weight: this.props.user.Weight,\r\n            bmi:this.props.user.BMI,\r\n        }\r\n        this.handleChangeInfo = this.handleChangeInfo.bind(this);\r\n        this.handleSubmitInfo = this.handleSubmitInfo.bind(this);\r\n        this.onSelectGender = this.onSelectGender.bind(this);\r\n        this.onSelectSmoke = this.onSelectSmoke.bind(this);\r\n        this.onSelectSurgeryType = this.onSelectSurgeryType.bind(this);\r\n        this.onSelectEducation = this.onSelectEducation.bind(this);\r\n    }\r\n    handleChangeInfo(e) {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n    async handleSubmitInfo(event) {\r\n        event.preventDefault();\r\n        var bDay = new Date(this.state.bday);\r\n        var now = new Date();\r\n        var dateOfSurgery = new Date(this.state.dateOfSurgery);\r\n        let height_double = Number(this.state.height / 100);\r\n        let bmi = String((Number(this.state.weight)/Math.pow(height_double,2)));\r\n        const response = await axios.put('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/patientUpdate', {\r\n                // UserID: this.state.userName,\r\n                First_Name: this.state.fName,\r\n                Last_Name: this.state.lName,\r\n                Phone_Number: this.state.phone,\r\n                Gender:this.state.gender,\r\n                Smoke: this.state.smoke,\r\n                DateOfSurgery: dateOfSurgery.getTime(),\r\n                SurgeryType: this.state.surgeryType,\r\n                Education: this.state.education,\r\n                Height: this.state.height,\r\n                Weight: this.state.weight,\r\n                BMI: bmi,\r\n                BirthDate: bDay.getTime(),\r\n                ValidTime: now.getTime()\r\n            },\r\n            {headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }})\r\n        this.props.changeToEdit()\r\n        this.props.updateUser(response.data.data)\r\n\r\n    }\r\n    onSelectGender(event) {\r\n        let gender;\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        if (selectedIndex == 1) {\r\n            gender = \"נקבה\"\r\n        } else if (selectedIndex == 2) {\r\n            gender = \"זכר\"\r\n        }\r\n        this.setState({\r\n            gender: gender\r\n        });\r\n    }\r\n    onSelectSmoke(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        let smoke;\r\n        if (selectedIndex == 1) {\r\n            smoke = \"מעשן\"\r\n        } else if (selectedIndex == 2) {\r\n            smoke = \"לא מעשן\"\r\n        }\r\n        this.setState({\r\n            smoke: smoke\r\n        });\r\n    }\r\n    onSelectEducation(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        let educationOptions = {1 :\"השכלה אקדמאית\", 2: \"השכלה תיכונית\", 3:\"10-12 שנות לימוד\", 4: \"6-9 שנות לימוד\", 5: \"5 שנות לימוד או פחות\", 6:\"לא מעוניין לענות\"};\r\n        this.setState({\r\n            education: educationOptions[selectedIndex]\r\n        });\r\n    }\r\n\r\n    onSelectSurgeryType(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        let sType;\r\n        if (selectedIndex == 1) {\r\n            sType = \"ניתוח דחוף\"\r\n        }else if (selectedIndex == 2)\r\n        {\r\n            sType = \"ניתוח מתוכנן\"\r\n\r\n        }else if (selectedIndex == 3) {\r\n            sType = \"ללא ניתוח\"\r\n        }\r\n        this.setState({\r\n            surgeryType: sType\r\n        });\r\n        if( selectedIndex !== 3 && selectedIndex !==0){\r\n            this.setState({\r\n                surgeryDateDisplay: true\r\n            });\r\n        }else{\r\n            this.setState({\r\n                surgeryDateDisplay: false\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        require(\"./NavBar.css\");\r\n        let bDate = new Date(this.state.bday).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n        var today = new Date();\r\n        var birthday = new Date(this.props.user[\"BirthDate\"]);\r\n        var age = Math.floor((today.getTime() - birthday.getTime())/ 31536000000)\r\n        let sDate = (new Date(this.state.dateOfSurgery)).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n        let bmi = parseFloat(this.props.user[\"BMI\"]).toFixed(1);\r\n        let patientListItems;\r\n        if(sessionStorage.getItem(\"patient\")){\r\n            patientListItems =  <div>\r\n                <ListGroup.Item className={\"listItem\"}> גובה: {this.props.user.Height}</ListGroup.Item>\r\n                <ListGroup.Item className={\"listItem\"}> משקל: {this.props.user.Weight}</ListGroup.Item>\r\n                <ListGroup.Item className={\"listItem\"}> BMI:{bmi}</ListGroup.Item>\r\n                <ListGroup.Item className={\"listItem\"}> תאריך ניתוח: {sDate} </ListGroup.Item>\r\n                <ListGroup.Item className={\"listItem\"}> סוג ניתוח: {this.props.user.SurgeryType} </ListGroup.Item>\r\n                <ListGroup.Item className={\"listItem\"}> השכלה: {this.props.user.Education} </ListGroup.Item>\r\n            </div>\r\n        }\r\n        let genderOptions = [<option></option>,<option>נקבה</option>,<option>זכר</option>];\r\n        let surgeryOptions = [<option/>,<option>ניתוח דחוף</option>,<option>ניתוח מתוכנן</option>,<option>ללא ניתוח</option>];\r\n        let smokeOptions = [<option/>,<option>מעשן</option>,<option>לא מעשן</option>];\r\n        let educationOptions = [<option/>,<option>השכלה אקדמאית</option>,<option>השכלה תיכונית</option>,<option>10-12 שנות לימוד</option>,<option>6-9 שנות לימוד</option>,<option>5 שנות לימוד או פחות</option>,<option>לא מעוניין לענות</option>];\r\n        var today = (new Date()).toISOString().split(\"T\")[0];\r\n        var date = new Date(this.state.bday).toISOString().substr(0,10);\r\n        var surgeryDate = new Date(this.state.dateOfSurgery).toISOString().substr(0,10);\r\n        return (\r\n            <div className='popup_info'>\r\n                <div className='popup_inner_info'>\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                    {!this.props.isEdit ?\r\n                        <Card class=\"cardInfo\">\r\n                            <Card.Header><b>{this.props.user.First_Name}{' '}{this.props.user.Last_Name}</b></Card.Header>\r\n                            <ListGroup variant=\"flush\">\r\n                                <ListGroup.Item className={\"listItem\"}> תאריך לידה:{bDate} </ListGroup.Item>\r\n                                <ListGroup.Item className={\"listItem\"}> גיל: {age}</ListGroup.Item>\r\n                                <ListGroup.Item className={\"listItem\"}> מין: {this.props.user.Gender} </ListGroup.Item>\r\n                                {sessionStorage.getItem('doctor') &&\r\n                                <ListGroup.Item className={\"listItem\"}> טלפון: {this.props.user.Phone_Number} </ListGroup.Item>}\r\n                                {patientListItems}\r\n                            </ListGroup>\r\n                        </Card> : null }\r\n                    {this.props.isEdit ?\r\n                        <form onSubmit={this.handleSubmitInfo} onReset={this.handleReset} id=\"new_user_form\">\r\n                            <br/>\r\n                            {sessionStorage.getItem('doctor') && <div>\r\n                                <div className=\"divs_in_add\">\r\n                                    <label className=\"labels_in_add_user\">שם פרטי</label>\r\n                                    <input className=\"inputs_in_add_user\" name=\"fName\" type=\"text\" value={this.state.fName} maxLength=\"20\"\r\n                                           onChange={this.handleChangeInfo} required/>\r\n                                </div>\r\n                                <div className=\"divs_in_add\">\r\n                                    <label className=\"labels_in_add_user\">שם משפחה </label>\r\n                                    <input className=\"inputs_in_add_user\" name=\"lName\" type=\"text\" value={this.state.lName} maxLength=\"20\"\r\n                                           onChange={this.handleChangeInfo} required/>\r\n                                </div>\r\n                                <div className=\"divs_in_add\">\r\n                                    <label className=\"labels_in_add_user\">מספר טלפון</label>\r\n                                    <input className=\"inputs_in_add_user\" name=\"phone\" type=\"tel\" id=\"phone\" pattern=\"[0-9]{10}\"\r\n                                           value={this.state.phone} onChange={this.handleChangeInfo} required/>\r\n                                </div>\r\n                            </div>}\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">תאריך לידה</label>\r\n                                <input className=\"inputs_in_add_user\" name=\"bday\" type=\"date\" max={today}\r\n                                       value={date} onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">משקל (ק\"ג) </label>\r\n                                <input className=\"inputs_in_add_user\" name=\"weight\" type=\"number\" value={this.state.weight}\r\n                                       onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">גובה (ס\"מ) </label>\r\n                                <input className=\"inputs_in_add_user\" name=\"height\" type=\"number\" value={this.state.height}\r\n                                       onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">מין </label>\r\n                                <select value={this.state.gender} className=\"select_in_add_user\" onChange={this.onSelectGender}>\r\n                                    {genderOptions}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">מעשן </label>\r\n                                <select value={this.state.smoke} className=\"select_in_add_user\" onChange={this.onSelectSmoke}>\r\n                                    {smokeOptions}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">השכלה </label>\r\n                                <select value={this.state.education} className=\"select_in_add_user\" onChange={this.onSelectEducation}>\r\n                                    {educationOptions}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">סוג ניתוח </label>\r\n                                <select value={this.state.surgeryType} className=\"select_in_add_user\" onChange={this.onSelectSurgeryType}>\r\n                                    {surgeryOptions}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <label className=\"labels_in_add_user\">תאריך ניתוח</label>\r\n                                <input className=\"inputs_in_add_user\" name=\"dateOfSurgery\" type=\"date\"\r\n                                       value={surgeryDate} onChange={this.handleChangeInfo} required/>\r\n                            </div>\r\n                            <div className=\"divs_in_add\">\r\n                                <input style={{width: 150}} variant=\"info\" type=\"submit\" value=\"שמור\" className=\"submit_and_reset_buttons\"/>\r\n                            </div>\r\n                        </form> : null}\r\n                    {!this.props.isEdit ?\r\n                        <button style={{width: 150, float:'left',position:'relative'}} variant=\"info\" onClick={this.props.changeToEdit}> עריכת פרטים </button> : null}\r\n                    {this.props.isEdit ?\r\n                        <div className=\"divs_in_add\">\r\n                            <button style={{width: 150,position:'relative'}} variant=\"info\" onClick={this.props.changeToEdit}>הצגת פרטים </button></div> : null}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, {Component} from \"react\"\r\nimport Table from \"react-bootstrap/Table\";\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport axios from \"axios\";\r\nimport { AiFillDelete, AiFillEdit } from 'react-icons/ai'\r\n\r\n\r\n\r\nclass MessagesPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            messages:[],\r\n            content:\"\"\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchMessagesPatient();\r\n        this.fetchMessagesDoctor();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if(this.props.patientUserId && this.props.patientUserId !== prevProps.patientUserId) {\r\n            this.fetchMessagesDoctor();\r\n        }\r\n    }\r\n\r\n    async fetchMessagesPatient(){\r\n        if(sessionStorage.getItem('patient')) {\r\n            var response = await axios.get(\r\n                \"  https://icc.ise.bgu.ac.il/njsw18auth/patients/messages\",\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }\r\n            );\r\n            if (response.data.data) {\r\n                this.setState({messages: response.data.data.reverse()});\r\n            }\r\n        }\r\n    }\r\n\r\n    async fetchMessagesDoctor(){\r\n        if(sessionStorage.getItem('doctor') && this.props.patientUserId) {\r\n            this.setState({content:\"\" })\r\n            let patientId = encodeURIComponent(this.props.patientUserId);\r\n            var response = await axios.get(\r\n                `  https://icc.ise.bgu.ac.il/njsw18auth/doctors/messages/${patientId}`,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }\r\n            );\r\n            if (response.data.data) {\r\n                this.setState({messages: response.data.data.reverse()});\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    async addMessage(){\r\n        if (sessionStorage.getItem('patient')) {\r\n            axios.post('  https://icc.ise.bgu.ac.il/njsw18auth/patients/messages',\r\n                {\r\n                    content: this.state.content,\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }).then(res => {\r\n                this.fetchMessagesPatient();\r\n                this.setState({content:''})\r\n            });\r\n        }\r\n        if (sessionStorage.getItem('doctor')){\r\n            let patientId = encodeURIComponent(this.props.patientUserId);\r\n            axios.post( ` https://icc.ise.bgu.ac.il/njsw18auth/doctors/messages/${patientId}`,\r\n                {\r\n                    content: this.state.content,\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }).then(res => {\r\n                this.fetchMessagesDoctor();\r\n                this.handleChange()\r\n            });\r\n        }\r\n    }\r\n\r\n    async removeMessage(mId){\r\n        if (sessionStorage.getItem('patient')) {\r\n            console.log(\"patient\")\r\n            axios.post('  https://icc.ise.bgu.ac.il/njsw18auth/patients/messages/removeMessage',\r\n                {\r\n                    MessageId: mId,\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }).then(res => {\r\n                this.fetchMessagesPatient();\r\n                this.fetchMessagesDoctor();\r\n            });\r\n        }\r\n        else if(sessionStorage.getItem('doctor')) {\r\n            axios.delete(`  https://icc.ise.bgu.ac.il/njsw18auth/doctors/messages/removeMessage/${mId}`,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }).then(res => {\r\n                // this.fetchMessagesPatient();\r\n                this.fetchMessagesDoctor();\r\n            });\r\n        }\r\n    }\r\n\r\n    // async updateMessage(mId){\r\n    //     console.log(mId)\r\n    //     if (sessionStorage.getItem('patient')) {\r\n    //         axios.put('  https://icc.ise.bgu.ac.il/njsw18auth/patients/messages/updateMessage',\r\n    //             {\r\n    //                 MessageId: mId,\r\n    //                 Content: this.state.content\r\n    //             },\r\n    //             {\r\n    //                 headers: {\r\n    //                     'Content-Type': 'application/json',\r\n    //                     'x-auth-token': sessionStorage.getItem(\"token\")\r\n    //                 }\r\n    //             }).then(res => {\r\n    //             this.fetchMessagesPatient();\r\n    //         });\r\n    //     }\r\n    // }\r\n\r\n\r\n\r\n\r\n    handleChange(event) {\r\n        if(event) {\r\n            this.setState({content: event.target.value});}\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        if(sessionStorage.getItem('doctor')){\r\n            if(this.props.patientUserId == undefined) {\r\n                window.alert(\"אנא בחר מטופל לצורך שליחת הודעה\")\r\n            }\r\n            if (this.state.content.length > 150) {\r\n                window.alert(\"אורך הודעה עד 150 תוים!\")\r\n            }\r\n        }else {\r\n            if (this.state.content.length > 150) {\r\n                window.alert(\"אורך הודעה עד 150 תוים!\")\r\n            } else {\r\n                var count = 0;\r\n                var dt2 = new Date();\r\n                this.state.messages.forEach(message => {\r\n                    let dt1 = new Date(message.Date);\r\n                    let full_name = `${message.FromFirstName} ${message.FromLastName}`\r\n                    if(full_name === sessionStorage.getItem('name'))\r\n                    if (Math.floor((Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) - Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate())) / (1000 * 60 * 60 * 24)) <= 1) {\r\n                        count = count + 1;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if (count > 2 && sessionStorage.getItem('patient')) {\r\n            window.alert(\"כמות ההודעות מוגבלת ל3 הודעות ביום\")\r\n        } else {\r\n            this.addMessage();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        require(\"./MessagesPage.css\");\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <textarea class=\"textarea\" placeholder={\"כתוב את הודעתך כאן\"} value={this.state.content} onChange={this.handleChange} />\r\n                    <br/>\r\n                    <input style={{marginRight: \"auto\", marginLeft: \"auto\"}} type=\"submit\" value=\"Submit\" />\r\n                </form>\r\n                <br/>\r\n                {this.state.messages.length > 0 &&\r\n                <div class=\"tableMessages\">\r\n                    <Table id=\"mdd_message\" striped bordered hover>\r\n                        <thead>\r\n                        <tr>\r\n                            <th style={{width: 230}}>תאריך</th>\r\n                            <th style={{width: 180}}>מוען</th>\r\n                            <th style={{width: 620}}>תוכן ההודעה</th>\r\n                            <th style={{width: 100}}></th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.state.messages.map((message) => (\r\n                                <tr>\r\n                                    <td style={{width: 230}}>{new Date(message.Date).toLocaleString()}</td>\r\n                                    <td style={{width: 180}}>{` ${message.FromFirstName} ${message.FromLastName}`}</td>\r\n                                    <td style={{width: 620, textAlign: \"right\"}}>{message.Content}</td>\r\n                                    <td  style={{width: 100}}><AiFillDelete type=\"button\" class=\"trushIcon\" style={{color: 'black'}} size={20} onClick={()=>this.removeMessage(message.MessageId)}/></td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </Table>\r\n                    <br/>\r\n\r\n                </div>}\r\n                {this.state.messages.length === 0 &&\r\n                <p> אין הודעות </p>\r\n                }\r\n                <img class=\"imageBox\" src=\"https://image.freepik.com/free-photo/top-view-doctor-working-with-laptop_1232-386.jpg\" style={{width: 450, borderColor: \"black\"}}></img>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MessagesPage;\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport $ from \"jquery\";\r\nimport \"nouislider/distribute/nouislider.min.css\";\r\nimport axios from 'axios';\r\nimport * as Survey1 from \"survey-react\";\r\nimport * as widgets from \"surveyjs-widgets\";\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport \"survey-react/survey.css\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\n\r\nSurvey1.StylesManager.applyTheme(\"bootstrap\");\r\n\r\nclass SurveyComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            json:{},\r\n            questionnaireId: this.props.match.params.QuestionnaireID,\r\n            isQuestionnaires: false\r\n        }\r\n\r\n        window[\"$\"] = window[\"jQuery\"] = $;\r\n        require(\"emotion-ratings/dist/emotion-ratings.js\");\r\n        this.getQuestionnaire=this.getQuestionnaire.bind(this);\r\n        this.sendAnswersToServer=this.sendAnswersToServer.bind(this);\r\n        this.sendParsedResultToServer=this.sendParsedResultToServer.bind(this);\r\n        this.getQuestionnaire();\r\n    }\r\n\r\n    async getQuestionnaire(){\r\n        //to do: fix questionnaireId dynamic\r\n\r\n        let url = `  https://icc.ise.bgu.ac.il/njsw18questionnaires/getQuestionnaire/${this.state.questionnaireId}`;\r\n        let response =await axios.get(\r\n            url,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            });\r\n\r\n        if(response.data.data){\r\n            this.setState({\r\n                title: response.data.data.QuestionnaireEnglishText,\r\n                description: response.data.data.QuestionnaireText,\r\n\r\n            });\r\n            //      console.log(response.data.data.QuestionnaireEnglishText);\r\n            //    console.log(response.data.data.QuestionnaireText);\r\n            //  console.log(response.data.data.Questions);\r\n            let questions= response.data.data.Questions;\r\n            let elements=[];\r\n            let json={};\r\n            json.title=response.data.data.QuestionnaireEnglishText;\r\n            for (let i=0;i<questions.length;i++){\r\n                let singleQuestion={};\r\n                singleQuestion.title=questions[i].QuestionText;\r\n                if (questions[i].Type === \"EQ5\"){\r\n                    singleQuestion.type=\"nouislider\";\r\n                    singleQuestion.name=response.data.data.QuestionnaireText;\r\n\r\n                }\r\n                else if (questions[i].Type === \"Single\"){\r\n                    singleQuestion.type= \"radiogroup\";\r\n                    singleQuestion.isRequired= true;\r\n                    let choices=[];\r\n                    for (let j=0;j<questions[i].Answers.length;j++){\r\n                        let answer={};\r\n                        answer.answerID= questions[i].Answers[j].answerID;\r\n                        answer.text=questions[i].Answers[j].answerText;\r\n                        choices.push(answer);\r\n                    }\r\n                    singleQuestion.choices=choices;\r\n                }\r\n\r\n                else if (questions[i].Type === \"multi\"){\r\n                    singleQuestion.type=\"checkbox\";\r\n                    singleQuestion.hasNone= true;\r\n                    singleQuestion.colCount= 5;\r\n                    let choices=[];\r\n                    for (let j=0;j<questions[i].Answers.length;j++){\r\n                        let answer={};\r\n                        answer.answerID= questions[i].Answers[j].answerID;\r\n                        answer.text=questions[i].Answers[j].answerText;\r\n                        choices.push(answer);\r\n                    }\r\n                    singleQuestion.choices=choices;\r\n                }\r\n                else if(questions[i].Type === \"VAS\"){\r\n                    singleQuestion.type= \"emotionsratings\";\r\n                    singleQuestion.choices= [ \"1\", \"2\", \"3\", \"4\", \"5\" ];\r\n                }\r\n\r\n                elements.push(singleQuestion);\r\n            }\r\n            json.elements=elements;\r\n            this.setState({json:json});\r\n            // console.log(json);\r\n\r\n        }\r\n\r\n        else{\r\n            console.alert(\"Problem accured. please try again later.\");\r\n        }\r\n\r\n    }\r\n\r\n    async sendParsedResultToServer(result){\r\n        let url = `  https://icc.ise.bgu.ac.il/njsw18auth/patients/answers/sendAnswers`;\r\n        const response = await axios.post(\r\n            url,\r\n\r\n            result\r\n            ,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n\r\n        var token = response.data.data;\r\n        if(!token){\r\n            this.setState({\r\n                wrongA: true\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                showID: false,\r\n                showWrongUser: false,\r\n                showQ: false,\r\n                showChange: true,\r\n                register: false,\r\n                token: token\r\n            })\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\nasync sendAnswersToServer(serveryResult){\r\n        if (serveryResult!=null){\r\n            const result={};\r\n            //to do fix dynamicly\r\n            result.UserID=localStorage.getItem(\"UserId\");   //not sure if needed\r\n            result.QuestionnaireID=parseInt(this.state.questionnaireId);\r\n            result.ValidTime=new Date().getTime();\r\n            let totalAnswers=[];\r\n            let counter=0;\r\n            for (var i in serveryResult) {\r\n                if (Object.prototype.hasOwnProperty.call(serveryResult, i)) {\r\n\r\n                    let question={};\r\n                    question.QuestionID=counter;\r\n                    counter++;\r\n                    let answers=[];\r\n\r\n                    if (Array.isArray(serveryResult[i])){\r\n                        for(let j=0; j<serveryResult[i].length;j++){\r\n                            answers.push(serveryResult[i][j].answerID);\r\n                        }\r\n\r\n\r\n                    }else {\r\n                        if (Object.prototype.hasOwnProperty.call(serveryResult[i], \"answerID\"))\r\n                            answers.push(serveryResult[i].answerID);\r\n\r\n                        else\r\n                            answers.push(parseInt(serveryResult[i]));\r\n                    }\r\n\r\n                    question.AnswerID=answers;\r\n                    totalAnswers.push(question);\r\n                }\r\n            }\r\n            result.Answers=totalAnswers;\r\n            console.log (result);\r\n            this.sendParsedResultToServer(result);\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        require(\"../Survey.css\");\r\n        widgets.nouislider(Survey1);\r\n        widgets.emotionsratings(Survey1);\r\n\r\n        const survey = new Survey1.Model(this.state.json);\r\n        survey.onComplete.add(\r\n            (result)=> {\r\n                console.log(JSON.stringify(result.data, null, 3));\r\n                this.sendAnswersToServer(result.data);\r\n                this.setState({isQuestionnaires: true})\r\n                // window.location.href = \"https://noyharar.github.io/projectWeb/questionnaires\";\r\n            });\r\n\r\n        return (\r\n// <body style={{alignRight: \"auto\", alignLeft: \"auto\"}}>\r\n            <div>\r\n            <Survey1.Survey\r\n                model={survey}\r\n                showQuestionNumbers={\"on\"}\r\n            />\r\n        {this.state.isQuestionnaires ? <Redirect to=\"/questionnaires\" /> : null}\r\n            </div>\r\n// </body>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SurveyComponent;\r\n","import React, {Component} from \"react\"\r\nimport axios from 'axios';\r\nimport \"../TableQuestionnaire.css\";\r\nimport { BrowserRouter, Route, Link } from \"react-router-dom\";\r\nimport SurveyComponent from './SurveyComponent';\r\nimport Table from 'react-bootstrap/Table';\r\nimport {borderColor} from \"@material-ui/system\";\r\n//   import 'bootstrap/dist/css/bootstrap.css';\r\n\r\n\r\nclass QuestionnaireManger extends Component {\r\n    constructor(props) {\r\n        super();\r\n        // this.extractQuestionnaires(props);\r\n        this.state = {\r\n            user: props.user,\r\n            showPopup: false,\r\n            showPopupQ: false,\r\n            new_date: \"\",\r\n            Questionnaires: [],\r\n            quest1: false,\r\n            // quest2: q2,\r\n            // quest3: q3,\r\n            // quest4: q4,\r\n            // quest5: q5,\r\n            quest6: false,\r\n            questionnairesArr: [],\r\n            questionnairesArrDoctor: [],\r\n            type: sessionStorage.getItem('type'),\r\n            firstTime: true\r\n        };\r\n        this.presentQuestionnaire = this.presentQuestionnaire.bind(this);\r\n        this.changeDate = this.changeDate.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.togglePopupQ = this.togglePopupQ.bind(this);\r\n        this.handleSubmitQ = this.handleSubmitQ.bind(this)\r\n        this.extractQuestionnaires = this.extractQuestionnaires.bind(this)\r\n    }\r\n\r\n    extractQuestionnaires(props) {\r\n        let questionnairesArrDoctor = [];\r\n        if(this.props.user) {\r\n            for (var i = 0; i < this.props.user[\"Questionnaires\"].length; i++) {\r\n                if (this.props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] !== 0 && this.props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] !== 6) {\r\n                    questionnairesArrDoctor.push(this.props.user[\"Questionnaires\"][i][\"QuestionnaireText\"]);\r\n                }\r\n            }\r\n        }\r\n        var q2 = false, q3 = false, q4 = false, q5 = false;\r\n        if (props.user && sessionStorage.getItem('doctor')) {\r\n            for (var i = 0; i < props.user[\"Questionnaires\"].length; i++) {\r\n                if (props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 1) {\r\n                    q2 = true;\r\n                } else if (props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 2) {\r\n                    q3 = true;\r\n                } else if (props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 3) {\r\n                    q4 = true;\r\n                } else if (props.user[\"Questionnaires\"][i][\"QuestionnaireID\"] === 5) {\r\n                    q5 = true;\r\n                }\r\n            }\r\n        }\r\n        this.setState({\r\n            user: props.user,\r\n            quest2: q2,\r\n            quest3: q3,\r\n            quest4: q4,\r\n            quest5: q5,\r\n            questionnairesArrDoctor: questionnairesArrDoctor\r\n        });\r\n        this.presentQuestionnaire();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if(this.props.user && this.props.user !== prevProps.user) {\r\n            this.extractQuestionnaires(this.props);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.extractQuestionnaires(this.props);\r\n    }\r\n\r\n    async presentQuestionnaire(){\r\n        if(sessionStorage.getItem('patient')) {\r\n            let url = '  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/getUserQuestionnaire';\r\n            let response = await axios.get(\r\n                url,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                });\r\n\r\n            if (response.data.data) {\r\n                //console.log (response.data.data);\r\n                let questionnairesArrTemp = [];\r\n                //run over questionareest\r\n                for (var i = 0; i < response.data.data.length; i++) {\r\n                    questionnairesArrTemp.push([response.data.data[i].QuestionnaireID, response.data.data[i].QuestionnaireText]);\r\n                }\r\n\r\n                this.setState({\r\n                    questionnairesArr: questionnairesArrTemp\r\n                });\r\n            }\r\n        }\r\n    }\r\n    handleSubmit(e){\r\n        e.preventDefault();\r\n        //     let date = (new Date(this.state.new_date)).getTime();\r\n        //     let id = this.props.user[\"UserID\"];\r\n        //     axios.post('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/changeDateOfSurgery',\r\n        //         {\r\n        //             UserID: id,\r\n        //             DateOfSurgery: date\r\n        //         },\r\n        //         {\r\n        //             headers: {\r\n        //                 'Content-Type': 'application/json',\r\n        //                 'x-auth-token': sessionStorage.getItem(\"token\")\r\n        //             }\r\n        //         }).then(res => {\r\n        //         window.alert(\"התאריך שונה בהצלחה\")\r\n        //         this.togglePopup();\r\n        //     });\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value });\r\n    }\r\n\r\n    handleSubmitQ(e){\r\n        e.preventDefault();\r\n        if(sessionStorage.getItem('doctor')) {\r\n            var Questionnaires = [];\r\n            if (this.state.quest2) {\r\n                Questionnaires.push({\r\n                    \"QuestionnaireID\": 1,\r\n                    \"QuestionnaireText\": \"תפקוד גב תחתון\"\r\n                })\r\n            }\r\n            if (this.state.quest3) {\r\n                Questionnaires.push({\r\n                    \"QuestionnaireID\": 2,\r\n                    \"QuestionnaireText\": \"תפקוד צוואר\"\r\n                })\r\n            }\r\n            if (this.state.quest4) {\r\n                Questionnaires.push({\r\n                    \"QuestionnaireID\": 3,\r\n                    \"QuestionnaireText\": \"תפקוד גף תחתון\"\r\n                })\r\n            }\r\n            if (this.state.quest5) {\r\n                Questionnaires.push({\r\n                    \"QuestionnaireID\": 5,\r\n                    \"QuestionnaireText\": \"איכות חיים\"\r\n                });\r\n            }\r\n            let id = this.props.user[\"UserID\"];\r\n            axios.post('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/changeUserQuestionnaire',\r\n                {\r\n                    UserID: id,\r\n                    Questionnaires: Questionnaires,\r\n                    changedQuestionnaires: true\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }).then(res => {\r\n                window.alert(\"השאלונים שונו בהצלחה\");\r\n                this.setState({\r\n                    questionnairesArrDoctor: Questionnaires.map(q => q.QuestionnaireText),\r\n                    showPopupQ: !this.state.showPopupQ\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    changeQuest(){\r\n        this.togglePopupQ();\r\n    }\r\n\r\n    changeDate(){\r\n        this.togglePopup();\r\n    }\r\n\r\n    togglePopupQ() {\r\n        this.setState({\r\n            showPopupQ: !this.state.showPopupQ\r\n        });\r\n\r\n    }\r\n\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    PopupQ() {\r\n        require(\"../PatientData.css\");\r\n        return (\r\n            <div className='popup'>\r\n                <div className='popup_innerCQ' >\r\n                    <div className=\"line_x\">\r\n                        <button onClick={this.togglePopupQ} id=\"x\">x</button>\r\n                    </div>\r\n                    <h4 id=\"h4C\">שינוי שאלונים</h4>\r\n                    <form id=\"formQ\" onSubmit={this.handleSubmitQ}>\r\n                        <div className=\"line\">\r\n                            <input type=\"checkbox\"\r\n                                   className=\"cInput\"\r\n                                   name=\"quest2\"\r\n                                   checked={this.state.quest2}\r\n                                   onChange={this.handleChange}\r\n                            />\r\n                            <label className=\"mLabel\">\r\n                                תפקוד גב תחתון\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"line\">\r\n                            <input type=\"checkbox\"\r\n                                   className=\"cInput\"\r\n                                   name=\"quest3\"\r\n                                   checked={this.state.quest3}\r\n                                   onChange={this.handleChange}\r\n                            />\r\n                            <label className=\"mLabel\">\r\n                                תפקוד צוואר\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"line\">\r\n                            <input type=\"checkbox\"\r\n                                   className=\"cInput\"\r\n                                   name=\"quest4\"\r\n                                   checked={this.state.quest4}\r\n                                   onChange={this.handleChange}\r\n                            />\r\n                            <label className=\"mLabel\">\r\n                                תפקוד גף תחתון\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"line\">\r\n                            <input type=\"checkbox\"\r\n                                   className=\"cInput\"\r\n                                   name=\"quest5\"\r\n                                   checked={this.state.quest5}\r\n                                   onChange={this.handleChange}\r\n                            />\r\n                            <label className=\"mLabel\">\r\n                                איכות חיים\r\n                            </label>\r\n                        </div>\r\n                        <button  id=\"changeQ\" type=\"sumbit\" >שינוי</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    render(){\r\n        require(\"../Table.css\");\r\n        // if (Questionnaires.charAt(Questionnaires.length - 1) === \" \") {\r\n        //     Questionnaires = Questionnaires.substring(0, Questionnaires.length - 2);\r\n        // }\r\n\r\n        return(\r\n            <div>\r\n                {this.state.type === 'patient' ?\r\n                    <div style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                        {/*<p style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>מטופל יקר, לפניך השאלונים המשוייכים אליך כחלק מטיפולך, אנא לחץ על השאלון המבוקש לצורך מענה.</p>*/}\r\n                        <table id='customers' style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                            <thead style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                            <h6><b>מטופל יקר,</b></h6>\r\n                            <h6><b>לפניך השאלונים המוגדרים כחלק מטיפולך. אנא לחץ על השאלון המבוקש לצורך מענה</b></h6>\r\n                            <h6><b>תודה על שיתוף הפעולה!</b></h6>\r\n                            </thead>\r\n                            <tr style={{width: \"50%\" , textWeight: \"large\"}}>\r\n                                {this.state.questionnairesArr.map(id => (\r\n                                    <th  id = \"mdd\" scope=\"row\" style={{width: \"100%\", textWeight: \"large\"  }} >\r\n                                        <u>\r\n                                            <Link to={`/userQuestionnaire/${id[0]}`} > {id[1]}\r\n                                            </Link></u>\r\n                                    </th>\r\n                                ))}\r\n                            </tr>\r\n                        </table>\r\n                        <br/>\r\n                        <div >\r\n                        </div>\r\n                    </div> : this.state.type === 'doctor' && this.props.user ?\r\n                        <div style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                            <thead style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                            <h4><b>לפניך השאלונים המותאמים למטופל הנ\"ל:</b></h4>\r\n                            </thead>\r\n                            <table id='customers' style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                                <thead style={{alignRight: \"auto\", alignLeft: \"auto\", textWeight: \"large\"}}>\r\n                                </thead>\r\n                                <tr style={{width: \"50%\" , textWeight: \"large\"}}>\r\n                                    {this.state.questionnairesArrDoctor.map(id => (\r\n                                        <th  id = \"mdd\" scope=\"row\" style={{width: \"100%\", textWeight: \"large\" }} >\r\n                                           <a> {id}</a>\r\n                                        </th>\r\n                                    ))}\r\n                                </tr>\r\n                            </table>\r\n                            {/*<label className=\"labelData\" >{Questionnaires} </label>*/}\r\n                            <button className=\"changeDate\" onClick={() => this.changeQuest()}>\r\n                                שינוי השאלונים\r\n                            </button>\r\n\r\n                        </div>: null}\r\n                <div>\r\n                    <img className={'imageBox'}\r\n                         src={\"https://image.freepik.com/free-photo/doctor-filling-up-life-insurance-form_53876-20493.jpg\"}\r\n                         style={{width: 450, borderColor: \"black\"}}></img>\r\n\r\n                </div>\r\n                {this.state.showPopupQ ?\r\n                    this.PopupQ() : null\r\n                }\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default QuestionnaireManger;","import React, {Component} from \"react\"\r\nimport axios from 'axios';\r\nimport DisplayButton from './DisplayButton';\r\nimport QuestionnaireManger from \"./Questionnaire/QuestionnaireManger\";\r\n\r\nfunction findBMIGroup(bmi) {\r\n    if (bmi>=0 && bmi<18.5) return \"BMI 0-18.5\";\r\n    else if (bmi>=18.5 && bmi<25) return \"BMI 18.5-25\";\r\n    else if (bmi>=25 && bmi<29.9) return \"BMI 25-29.9\";\r\n    else if (bmi>=29.9 && bmi<40) return \"BMI 29.9-40\";\r\n    else return \"BMI 40+\";\r\n}\r\n\r\nfunction findGenderGroup(gender) {\r\n    if (gender==\"נקבה\") return \"FemaleOnly\";\r\n    else return \"MaleOnly\";\r\n}\r\n\r\nfunction findSmokeGroup(smoke) {\r\n    if (smoke==\"מעשן\") return \"SmokeOnly\";\r\n    else return \"NoSmokeOnly\";\r\n}\r\n\r\n\r\nclass PatientSearchNew extends Component {\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        var date = new Date();\r\n        var first_date = new Date();\r\n        first_date.setMonth(first_date.getMonth() - 3)\r\n        var three_month = first_date.toISOString().split(\"T\")[0];\r\n        // var three_month = first_date.toLocaleDateString().replace('.', \"-\");\r\n        console.log(three_month);\r\n        var x = date.toISOString().split(\"T\")[0];\r\n        this.state = {\r\n            end_date: x,\r\n            start_date: three_month,\r\n            steps: true,\r\n            distance : true,\r\n            weather: true,\r\n            calories: true,\r\n            sleeping_hours: true,\r\n            dataArr: [],\r\n            periodicAnswers: [],\r\n            dailyA: [],\r\n            dailyQ: true,\r\n            perQ: true,\r\n            date: 0,\r\n            showDaily: true,\r\n            weekly: false,\r\n            monthly: false,\r\n            user: {},\r\n            ready: false,\r\n            todayDate: x,\r\n            className: \"normal\",\r\n            comp:\"\"\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.getRequest = this.getRequest.bind(this);\r\n        this.selectUser = this.selectUser.bind(this);\r\n        this.getCompereRequest = this.getCompereRequest.bind(this);\r\n        this.compAfterRequests=this.compAfterRequests.bind(this);\r\n        this.getStartAndEndTimeByInterval=this.getStartAndEndTimeByInterval.bind(this);\r\n        this.findHowManyDaysAfter=this.findHowManyDaysAfter.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        const {name, value, type, checked} = event.target\r\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value })\r\n       if (name === \"comp\")  this.setState({ comp: value });\r\n        if(name === \"showDaily\"){\r\n            this.setState({\r\n                showDaily: true,\r\n                weekly: false,\r\n                monthly: false\r\n            })\r\n        }\r\n        else if(name === \"weekly\"){\r\n            this.setState({\r\n                showDaily: false,\r\n                weekly: true,\r\n                monthly: false\r\n            })\r\n        }\r\n        else if(name === \"monthly\"){\r\n            this.setState({\r\n                showDaily: false,\r\n                weekly: false,\r\n                monthly: true\r\n            })\r\n        }\r\n    }\r\n\r\n    async getRequest(name,url){\r\n        if(sessionStorage.getItem('doctor')){\r\n            return this.getDoctorRequest(name, url);\r\n        }\r\n        if(sessionStorage.getItem('patient')){\r\n            return this.getPatientRequest(name, url);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    async getDoctorRequest(name, url) {\r\n        if (this.props.patientUserId) {\r\n            var userId = encodeURIComponent(this.props.patientUserId);\r\n            let getUrl = '  https://icc.ise.bgu.ac.il/njsw18auth/doctors/' + url + '?UserID=' + userId;\r\n            if (this.state.start_date !== \"\") {\r\n                var date = new Date(this.state.start_date)\r\n                let start_time = date.getTime();\r\n                getUrl += (\"&start_time=\" + start_time);\r\n            }\r\n            if (this.state.end_date !== \"\") {\r\n                date = new Date(this.state.end_date)\r\n                date = new Date(date.getTime() + 86400000);\r\n                let end_time = date.getTime();\r\n                getUrl += (\"&end_time=\" + end_time);\r\n            }\r\n            const response = await axios.get(\r\n                getUrl,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }\r\n            );\r\n            if (response.data.message === \"Not Found\") {\r\n                return null;\r\n            }\r\n            return ({\r\n                values: response.data.data,\r\n                name: name,\r\n                numOfUsers: response.data.data.length\r\n            });\r\n        }\r\n    }\r\n\r\n    async getCompereRequest(name, url,gender,smoke,bmi,beforeOrAfter,interval,surgeryDate) {\r\n\r\n            let getUrl = ' https://icc.ise.bgu.ac.il/njsw18auth/doctors' + url + '?' ;\r\n            let searchStartByInterval;\r\n            let searchEndByInterval;\r\n            let times=[];\r\n        if (beforeOrAfter==\"After\")  {\r\n            times =this.getStartAndEndTimeByInterval(surgeryDate,interval);\r\n            searchStartByInterval=times[0];\r\n            searchEndByInterval=times[1];\r\n        }\r\n            if (this.state.start_date !== \"\") {\r\n                var date = new Date(this.state.start_date)\r\n                let start_time = date.getTime();\r\n                let searchStart= beforeOrAfter==\"After\"?searchStartByInterval :start_time;\r\n                getUrl += (\"&start_time=\" + searchStart);\r\n            }\r\n            if (this.state.end_date !== \"\") {\r\n                date = new Date(this.state.end_date)\r\n                date = new Date(date.getTime() + 86400000);\r\n                let end_time = date.getTime();\r\n                let endSearch=beforeOrAfter==\"After\"? searchEndByInterval:surgeryDate;\r\n                getUrl += (\"&end_time=\" + endSearch);\r\n            }\r\n            if (this.state.comp == \"Gender\") {\r\n                getUrl += (\"&filter=Gender\" );\r\n                let genderGroup=findGenderGroup(gender);\r\n                getUrl += (\"&groupId=\"+genderGroup+interval+beforeOrAfter );\r\n\r\n            }\r\n            else if (this.state.comp == \"Smoke\") {\r\n                getUrl += (\"&filter=Smoke\" );\r\n                let smokeGroup=findSmokeGroup(gender);\r\n                getUrl += (\"&groupId=\"+smokeGroup+interval+beforeOrAfter);\r\n\r\n            }\r\n            else if (this.state.comp == \"BMI\") {\r\n                getUrl += (\"&filter=BMI\" );\r\n                let bmiGroup=findBMIGroup(bmi);\r\n                getUrl += (\"&groupId=\"+ bmiGroup+\" \"+interval+beforeOrAfter);\r\n\r\n            }\r\n            const response = await axios.get(\r\n                getUrl,\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': sessionStorage.getItem(\"token\")\r\n                    }\r\n                }\r\n            );\r\n            if (response.data.message === \"Not Found\") {\r\n                return null;\r\n            }\r\n            return ({\r\n                values: response.data.data,\r\n                name: name,\r\n                numOfUsers: response.data.data.length\r\n            });\r\n\r\n    }\r\n\r\n    getStartAndEndTimeByInterval(surgeryDate,interval){\r\n        let times=[];\r\n        let ranges=this.findHowManyDaysAfter(interval);\r\n        times.push(surgeryDate +ranges[0]*60*60*24*1000);\r\n        times.push (surgeryDate+ ranges[1]*60*60*24*1000 );\r\n        return times;\r\n    }\r\n\r\n    findHowManyDaysAfter(groupId) {\r\n        let range=  groupId.substring(\r\n            groupId.indexOf(\"/\") + 1,\r\n            groupId.lastIndexOf(\"/\")\r\n        );\r\n        let min=range.substr(0,range.indexOf('-'));\r\n        let max=range.substring(range.indexOf('-')+1);\r\n        return [min,max];\r\n    }\r\n\r\n    async getPatientRequest(name, url){\r\n        let getUrl = `  https://icc.ise.bgu.ac.il/njsw18auth/patients/${url}`;\r\n        let start_time;\r\n        if(this.state.start_date !== \"\"){\r\n            var date = new Date(this.state.start_date);\r\n            start_time = date.getTime();\r\n            // getUrl += (\"&start_time=\" + start_time);\r\n        }\r\n        let end_time;\r\n        if(this.state.end_date !== \"\"){\r\n            date = new Date(this.state.end_date)\r\n            date = new Date(date.getTime() + 86400000);\r\n            end_time = date.getTime();\r\n        }\r\n        console.log(getUrl)\r\n        const response = await axios.get(\r\n            getUrl,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                },\r\n                params: {\r\n                    start_time: start_time,\r\n                    end_time: end_time\r\n                }\r\n            }\r\n        );\r\n        return({\r\n            values: response.data.data,\r\n            name : name,\r\n            numOfUsers: response.data.data.length\r\n        });\r\n    }\r\n\r\n    async compAfterRequests(gender,smoke,bmi,arr,interval,surgeryDate){\r\n        let response = await this.getCompereRequest(\"השוואת קלוריות אחרי\", \"/comperePatients/getCaloriesCompere\", gender, smoke, bmi, \"After\",interval,surgeryDate);\r\n        if (response.values[0] != undefined && response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n\r\n        response = await this.getCompereRequest(\"השוואת מרחק אחרי\", \"/comperePatients/getDistanceCompere\", gender, smoke, bmi, \"After\",interval,surgeryDate);\r\n        if (response.values[0] != undefined && response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n\r\n        response = await this.getCompereRequest(\"השוואת צעדים אחרי\", \"/comperePatients/getStepsCompere\", gender, smoke, bmi, \"After\",interval,surgeryDate);\r\n        if (response.values[0] != undefined && response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    async selectUser(key) {\r\n        let arr = this.state.dataArr;\r\n        let d = this.state.dailyA;\r\n        var da = [];\r\n        var user;\r\n        var sDate;\r\n        for(var i = 0; i < this.state.numOfUsers; i++){\r\n            if(d[i] && d[i].UserID[\"BirthDate\"] === key){\r\n                da = d[i].docs;\r\n                sDate = d[i].UserID[\"DateOfSurgery\"];\r\n                user = d[i].UserID;\r\n            }\r\n        }\r\n        for(i = 0; i < this.state.questionnaire.values.length; i++){\r\n            if(this.state.questionnaire.values[i].UserID[\"BirthDate\"] === key){\r\n                this.state.periodicAnswers.push(this.state.questionnaire.values[i][\"docs\"]);\r\n                sDate = this.state.questionnaire.values[i].UserID[\"DateOfSurgery\"];\r\n                user = this.state.questionnaire.values[i].UserID;\r\n            }\r\n        }\r\n        for(i = 0; i < arr.length; i++){\r\n            if(arr[i].name.startsWith(\"השוואת\")) continue;\r\n            let values = [];\r\n            if(arr[i]){\r\n                for(var j = 0; j < arr[i].values.length; j++){\r\n                    if(arr[i].values[j].UserID[\"BirthDate\"] === key){\r\n                        values = arr[i].values[j].docs;\r\n                        sDate = arr[i].values[j].UserID[\"DateOfSurgery\"];\r\n                        user = arr[i].values[j].UserID;\r\n                    }\r\n                }\r\n                arr[i].values = values;\r\n            }\r\n        }\r\n        this.setState({\r\n            dataArr: arr,\r\n            dailyA: da,\r\n            date: sDate,\r\n            user: user,\r\n            ready: true,\r\n            className: \"normal\"\r\n        });\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        if (event) {\r\n            event.preventDefault()\r\n        }\r\n\r\n        this.setState({\r\n            ready: false,\r\n            className: \"waiting\",\r\n            periodicAnswers: []\r\n        });\r\n\r\n        var numOfUsers = 0;\r\n        var arr = [];\r\n        let response = await this.getRequest(\"צעדים\", \"metrics/getSteps\");\r\n        if (!response) {\r\n            window.alert(\"לא קיים מטופל\");\r\n            return;\r\n        }\r\n        if (response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n        if (response.numOfUsers > numOfUsers) {\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"מרחק\", \"metrics/getDistance\");\r\n        if (response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n        if (response.numOfUsers > numOfUsers) {\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n\r\n\r\n        if (response.values[0].UserID!=null && this.state.comp!==\"\"){\r\n            let gender = response.values[0].UserID.Gender;\r\n            let bmi = parseFloat(response.values[0].UserID.BMI);\r\n            let smoke = response.values[0].UserID.Smoke;\r\n            let dateOfSurgery= response.values[0].UserID.DateOfSurgery;\r\n           // **** before\r\n        response = await this.getCompereRequest(\"השוואת קלוריות לפני\", \"/comperePatients/getCaloriesCompere\", gender, smoke, bmi, \"Before\",\"\",dateOfSurgery);\r\n        if (response.values[0] != undefined && response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n\r\n        response = await this.getCompereRequest(\"השוואת מרחק לפני\", \"/comperePatients/getDistanceCompere\", gender, smoke, bmi, \"Before\",\"\",dateOfSurgery);\r\n        if (response.values[0] != undefined && response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n\r\n        response = await this.getCompereRequest(\"השוואת צעדים לפני\", \"/comperePatients/getStepsCompere\", gender, smoke, bmi, \"Before\",\"\",dateOfSurgery);\r\n        if (response.values[0] != undefined && response.values[0][\"docs\"].length > 0) {\r\n            arr.push(response);\r\n        }\r\n\r\n            //****after\r\n\r\n\r\n            let todayTimestamp = new Date().getTime();\r\n            if (dateOfSurgery!= undefined && dateOfSurgery!=0 && dateOfSurgery< new Date(this.state.end_date).getTime()){\r\n                let numOfDaysAfterSurgery= (todayTimestamp-dateOfSurgery)/(24*60*60*1000);\r\n                let after5Days= true;\r\n                let after5To10Days= numOfDaysAfterSurgery>=5? true:false;\r\n                let after10To35Days= numOfDaysAfterSurgery>=10 ? true:false;\r\n                let after35To90Days= numOfDaysAfterSurgery>=35 ? true:false;\r\n                let after90To1800Days= numOfDaysAfterSurgery>=90 ? true:false;\r\n                let after180Days= numOfDaysAfterSurgery>=180 ? true:false;\r\n\r\n\r\n                arr=await this.compAfterRequests( gender, smoke, bmi, arr,\"/0-5/\",dateOfSurgery);\r\n                if (after5To10Days)    arr= await this.compAfterRequests( gender, smoke, bmi, arr,\"/5-10/\",dateOfSurgery);\r\n                if (after10To35Days)    arr= await this.compAfterRequests( gender, smoke, bmi, arr,\"/10-35/\",dateOfSurgery);\r\n                if (after35To90Days)    arr= await this.compAfterRequests( gender, smoke, bmi, arr,\"/35-90/\",dateOfSurgery);\r\n                if (after90To1800Days)   arr=await  this.compAfterRequests( gender, smoke, bmi, arr,\"/90-180/\",dateOfSurgery);\r\n                if (after180Days)   arr=await this.compAfterRequests( gender, smoke, bmi, arr,\"/180/\",dateOfSurgery);\r\n\r\n            }\r\n\r\n    }\r\n        response = await this.getRequest(\"קלוריות\", \"metrics/getCalories\");\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"מזג האוויר\", \"metrics/getWeather\");\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"שעות שינה\", \"metrics/getSleep\");\r\n        if(response.values[0][\"docs\"].length > 0){\r\n            arr.push(response);\r\n        }\r\n\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n        response = await this.getRequest(\"תשובות יומיות\", \"answers/getDailyAnswers\");\r\n        if(response.numOfUsers > numOfUsers){\r\n            numOfUsers = response.numOfUsers;\r\n        }\r\n\r\n\r\n        let responseQ = await this.getRequest(\"שאלון תקופתי\", \"answers/getPeriodicAnswers\");\r\n\r\n        this.setState({\r\n            dataArr : arr,\r\n            dailyA: response.values,\r\n            numOfUsers: numOfUsers,\r\n            questionnaire: responseQ\r\n        });\r\n\r\n        if(numOfUsers === 1) {\r\n            let x = this.state.dailyA[0].UserID[\"BirthDate\"];\r\n            if(!x)\r\n                x = this.state.periodicAnswers[0].UserID[\"BirthDate\"];\r\n            if(!x)\r\n                x = this.state.dataArr[0][0].UserID[\"BirthDate\"];\r\n            this.selectUser(x)\r\n        } else {\r\n            alert(\"More than 1 user found!!!!!\")\r\n        }\r\n    }\r\n\r\n    render() {\r\n        require(\"./search.css\");\r\n        var today = (new Date()).toISOString().split(\"T\")[0];\r\n        return (\r\n            <div>\r\n                <div className=\"dates\">\r\n                    <label className=\"cSearch\">\r\n                        בחר תאריכים: מ\r\n                    </label>\r\n                    <input className=\"dSearch\"\r\n                           type=\"date\"\r\n                           name=\"start_date\"\r\n                           value={this.state.start_date}\r\n                           onChange={this.handleChange}\r\n                           max={this.state.end_date}\r\n                    />\r\n                    <label className=\"aSearch\">\r\n                        עד\r\n                    </label>\r\n                    <input className=\"dSearch\"\r\n                           type=\"date\"\r\n                           name=\"end_date\"\r\n                           value={this.state.end_date}\r\n                           onChange={this.handleChange}\r\n                           max={today}\r\n                    />\r\n                </div>\r\n                <div className=\"mdd\">\r\n                    <label className=\"mLabel\">\r\n                        בחר מדדים:\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"steps\"\r\n                           checked={this.state.steps}\r\n                           onChange={this.handleChange}\r\n                    /> <p class=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        צעדים\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"distance\"\r\n                           checked={this.state.distance}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        מרחק\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"weather\"\r\n                           checked={this.state.weather}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        מזג האוויר\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"calories\"\r\n                           checked={this.state.calories}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        קלוריות\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"sleeping_hours\"\r\n                           checked={this.state.sleeping_hours}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        שעות שינה\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"dailyQ\"\r\n                           checked={this.state.dailyQ}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        שאלון יומי\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"perQ\"\r\n                           checked={this.state.perQ}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        שאלונים תקופתיים\r\n                    </label>\r\n                </div>\r\n                <div className=\"mddShow\">\r\n                    <label className=\"mLabel\">\r\n                        בחר אופן הצגה:\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"showDaily\"\r\n                           checked={this.state.showDaily}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        יומי\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"weekly\"\r\n                           checked={this.state.weekly}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        שבועי\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"checkbox\"\r\n                           name=\"monthly\"\r\n                           checked={this.state.monthly}\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <p className=\"space\"></p>\r\n                    <label className=\"mLabel\">\r\n                        חודשי\r\n                    </label>\r\n                </div>\r\n                <div className=\"mddShow\" style={sessionStorage.getItem('doctor') ? {} : { display: 'none' }} >\r\n                    <label className=\"mLabel\">\r\n                        השוואת מטופלים לפי:\r\n                    </label>\r\n                    <input className=\"cInput\"\r\n                           type=\"radio\"\r\n                           name=\"comp\"\r\n                           value=\"Gender\"\r\n                           id=\"gender_comp\"\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <label htmlFor=\"gender_comp\">מין</label>\r\n                    <p className=\"space\"></p>\r\n                    <input className=\"cInput\"\r\n                           type=\"radio\"\r\n                           name=\"comp\"\r\n                           value=\"Smoke\"\r\n                           id=\"smoke_comp\"\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <label htmlFor=\"smoke_comp\">מעשן/ לא מעשן</label>\r\n                    <p className=\"space\"></p>\r\n                    <input className=\"cInput\"\r\n                           type=\"radio\"\r\n                           name=\"comp\"\r\n                           value=\"BMI\"\r\n                           id=\"BMI_comp\"\r\n                           onChange={this.handleChange}\r\n                    />\r\n                    <label htmlFor=\"BMI_comp\">BMI</label>\r\n\r\n                    <p className=\"space\"></p>\r\n                    <input className=\"cInput\"\r\n                           type=\"radio\"\r\n                           name=\"comp\"\r\n                           value=\"\"\r\n                           id=\"No_comp\"\r\n                           onChange={this.handleChange}\r\n                        \r\n                    />\r\n                    <label htmlFor=\"No_comp\">ללא השוואה</label>\r\n\r\n                </div>\r\n\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <button>הצג תוצאות</button>\r\n                </form>\r\n                <br />\r\n                <DisplayButton\r\n                    dataArr={this.state.dataArr}\r\n                    steps={this.state.steps}\r\n                    distance={this.state.distance}\r\n                    calories={this.state.calories}\r\n                    weather={this.state.weather}\r\n                    sleep={this.state.sleeping_hours}\r\n                    dailyA={this.state.dailyA}\r\n                    periodicAnswers={this.state.periodicAnswers}\r\n                    dailyQ={this.state.dailyQ}\r\n                    perQ={this.state.perQ}\r\n                    date={this.state.date}\r\n                    showDaily={this.state.showDaily}\r\n                    weekly={this.state.weekly}\r\n                    monthly={this.state.monthly}\r\n                    user={this.state.user}\r\n                    ready={this.state.ready}\r\n                />\r\n                {/*<QuestionnaireManger user={this.state.user}*/}\r\n                {/*/>*/}\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PatientSearchNew\r\n","import React, {Component} from \"react\"\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport axios from \"axios\";\r\nimport {Card} from \"react-bootstrap\";\r\n// ES5 require\r\nimport ImageMapper from \"react-image-mapper\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {BsDownload} from \"react-icons/bs\";\r\nimport {AiFillDelete} from \"react-icons/ai\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nvar MAP = {\r\n    name: \"my-map\",\r\n    areas: [\r\n        {\r\n            name: \"knee\",\r\n            shape: \"circle\",\r\n            coords: [330, 300, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        },\r\n        {\r\n            name: \"neck\",\r\n            shape: \"circle\",\r\n            coords: [350, 80, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        },\r\n        {\r\n            name: \"back\",\r\n            shape: \"circle\",\r\n            coords: [350, 170, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        },   {\r\n            name: \"shoulder\",\r\n            shape: \"circle\",\r\n            coords: [310, 95, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        }, {\r\n            name: \"elbow\",\r\n            shape: \"circle\",\r\n            coords: [255, 105, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        },{\r\n            name: \"ankle\",\r\n            shape: \"circle\",\r\n            coords: [333, 382, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        },{\r\n            name: \"hip\",\r\n            shape: \"circle\",\r\n            coords: [325, 200, 5],\r\n            preFillColor: \"#ff1313\",\r\n            fillColor: \"white\",\r\n            lineWidth: 1\r\n        }\r\n    ]\r\n};\r\n\r\n// var URL = \"https://cdn1.bbcode0.com/uploads/2021/3/12/44020e8f94bb6f1e1f5daefa99e5dbbd-full.jpg?__cf_chl_jschl_tk__=44f056c180321e3187e8e785fe9ebc8efea1a510-1615559897-0-AYcqoygPVQpfg88iWu4Xkb0s-sdo06kYRqVG_irUgjBbap22wgX3WGpiolYjKZ3M4cms0fNzEtJkKjy8vSgtWGXTBQYx1CVPQ2HdxLMw9kux4rfv_r3r6T7CHIQoP_1_g4WcuKAshfV-kpDefRb0Wq5IJzkr4_kg8jrupQA9PqkYDX7dGPNljLT11XxebURRt3Kkohj-Np1vmDnT8mg6laQlgLDEMHr-pWkZTODWrUDrvgjg0bOGM0XMBW21Rj4Jw7jaLYMEiCltPIKFGBj4fCjzi8ebMV6rnbLSE-uEa4OA7AzwnoZrbXOyWDOWPVYor3OFFCKQ9KS59WnIaaJ2gAAzKKPiux-8kKJIJAmXRvVze9NcyC7hFUtki1qJCiACjeh0OQBH-tR_yzk4yO3QlKk\";\r\nvar URL = \"https://modernorthonj.com/wp-content/uploads/2020/03/body-schematic-transparent-2048x1257.jpg\"\r\n\r\nclass InstructionsSurgery extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n        this.state = {\r\n            instructions: undefined,\r\n            instructionsForGrid: [],\r\n            // numPages: null,\r\n            // pageNumber: 1,\r\n\r\n            headerNames: {\r\n                \"knee\": \"פרוטוקולי שיקום - ברך\",\r\n                \"shoulder\": \"פרוטוקולי שיקום - כתף\",\r\n                \"hip\" : \"פרוטוקולי שיקום - ירך\",\r\n                \"ankle\" : \"פרוטוקולי שיקום - קרסול\",\r\n                \"elbow\" : \"פרוטוקולי שיקום - מרפק\",\r\n                \"back\" : \"פרוטוקולי שיקום - גב\",\r\n                \"neck\" : \"פרוטוקולי שיקום - צוואר\"\r\n            },\r\n            categoryToImage: {\r\n                \"knee\": require('./ImagesOrth/ACL.jpg'),\r\n                \"shoulder\": require('./ImagesOrth/REVERSETSR.jpg'),\r\n                \"hip\" : require('./ImagesOrth/Hip.png'),\r\n                \"ankle\" : require('./ImagesOrth/Ankle.jpg'),\r\n                \"elbow\" : require('./ImagesOrth/Elbow.jpg'),\r\n                \"back\" : require('./ImagesOrth/Back.jpg'),\r\n                \"neck\" : require('./ImagesOrth/Neck.jpg'),\r\n            },\r\n\r\n            instructionsByCategory: {},\r\n            showInstructions: false,\r\n            showPopup: false,\r\n            selectedFile: null,\r\n            newInstructionCategory: \"knee\",\r\n            newInstructionTitle: \"\",\r\n            categories: {\r\n                \"ברך\": \"knee\",\r\n                \"גב\": \"back\",\r\n                \"כתף\": \"shoulder\",\r\n                \"ירך\": \"hip\",\r\n                \"קרסול\":  \"ankle\",\r\n                \"מרפק\":\"elbow\",\r\n                \"צוואר\": \"neck\"\r\n            },\r\n            area:undefined\r\n        };\r\n\r\n        this.getInstructions = this.getInstructions.bind(this);\r\n        this.changePdfToShow = this.changePdfToShow.bind(this);\r\n        // this.nextPage = this.nextPage.bind(this);\r\n        // this.previousPage = this.previousPage.bind(this);\r\n        this.getInitialState = this.getInitialState.bind(this);\r\n        this.load = this.load.bind(this);\r\n        this.clicked = this.clicked.bind(this);\r\n        this.clickedOutside = this.clickedOutside.bind(this);\r\n        this.moveOnImage = this.moveOnImage.bind(this);\r\n        this.enterArea = this.enterArea.bind(this);\r\n        this.leaveArea = this.leaveArea.bind(this);\r\n        this.moveOnArea = this.moveOnArea.bind(this);\r\n        this.getTipPosition = this.getTipPosition.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.selectFile = this.selectFile.bind(this);\r\n        this.upload = this.upload.bind(this);\r\n        this.uploadFile = this.uploadFile.bind(this);\r\n        this.onSelectCategoryChosen =  this.onSelectCategoryChosen.bind(this)\r\n        this.handleChange =  this.handleChange.bind(this)\r\n        this.handleSubmit =  this.handleSubmit.bind(this)\r\n\r\n    }\r\n\r\n    getInitialState() {\r\n        return {hoveredArea: null, msg: null, moveMsg: null};\r\n    }\r\n\r\n    load() {\r\n        // this.setState({msg: \"Interact with image !\"});\r\n    }\r\n\r\n    clicked(area) {\r\n        if(area.name === this.state.category) {\r\n            this.setState({\r\n                showInstructions: !this.state.showInstructions,\r\n                category: \"\"\r\n            });\r\n        } else {\r\n            this.setState({\r\n                // msg: `You clicked on ${area.shape} at coords ${JSON.stringify(\r\n                //     area.coords\r\n                // )} !`,\r\n                category: area.name,\r\n                showInstructions: true,\r\n            }, this.focusOnInstructions);\r\n        }\r\n    }\r\n\r\n    focusOnInstructions() {\r\n        if(this.state.showInstructions) {\r\n            var elmnt = document.getElementById(\"inst\");\r\n            elmnt.scrollIntoView();\r\n        }\r\n    }\r\n\r\n    clickedOutside(evt) {\r\n        const coords = {x: evt.nativeEvent.layerX, y: evt.nativeEvent.layerY};\r\n        this.setState({\r\n            msg: `You clicked on the image at coords ${JSON.stringify(coords)} !`\r\n        });\r\n    }\r\n\r\n    moveOnImage(evt) {\r\n        const coords = {x: evt.nativeEvent.layerX, y: evt.nativeEvent.layerY};\r\n        this.setState({\r\n            moveMsg: ` `\r\n        });\r\n    }\r\n\r\n    enterArea(area) {\r\n        this.setState({\r\n            hoveredArea: area,\r\n            msg: `You entered ${area.shape} ${area.name} at coords ${JSON.stringify(\r\n                area.coords\r\n            )} !`\r\n        });\r\n    }\r\n\r\n    leaveArea(area) {\r\n        this.setState({\r\n            hoveredArea: null,\r\n            // msg: '',\r\n            // moveMsg: ''\r\n        });\r\n    }\r\n\r\n    moveOnArea(area, evt) {\r\n        const coords = {x: evt.nativeEvent.layerX, y: evt.nativeEvent.layerY};\r\n        this.setState({\r\n            moveMsg: ' לחץ להצגת ' + this.state.headerNames[`${area.name}`],\r\n            currArea: area,\r\n            hoveredArea: area\r\n        });\r\n    }\r\n\r\n    getTipPosition(area) {\r\n        return {top: `${area.center[1]}px`, left: `${area.center[0]}px`};\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.getInstructions();\r\n    }\r\n\r\n\r\n    async getInstructions() {\r\n        let respone = await axios.get('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/instructions',\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            });\r\n        if (respone.data.data) {\r\n            let instructionsArr = [];\r\n            for (var i = 0; i < respone.data.data.length; i++) {\r\n                instructionsArr.push(respone.data.data[i]);\r\n            }\r\n            let instructionsForGrid = [];\r\n            for (var i = 0; i < instructionsArr.length; i = i + 2) {\r\n                if (instructionsArr[i + 1]) {\r\n                    instructionsForGrid.push({\"obj1\": instructionsArr[i], \"obj2\": instructionsArr[i + 1]});\r\n                } else {\r\n                    instructionsForGrid.push({\"obj1\": instructionsArr[i], \"obj2\": {}});\r\n                }\r\n            }\r\n            this.setState({\r\n                instructions: instructionsArr,\r\n                instructionsForGrid: instructionsForGrid,\r\n                instructionsByCategory: this.groupArrayOfObjects(instructionsArr, \"Category\")\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    groupArrayOfObjects(list, key) {\r\n        return list.reduce(function (rv, x) {\r\n            (rv[x[key]] = rv[x[key]] || []).push(x);\r\n            return rv;\r\n        }, {});\r\n    };\r\n\r\n    changePdfToShow(e) {\r\n        console.log(e);\r\n        if (this.state.pdfToShow === e) {\r\n            this.setState({pdfToShow: null})\r\n        } else {\r\n            this.setState({pdfToShow: e, showPopup: true});\r\n        }\r\n    }\r\n\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    onSelectCategoryChosen(event) {\r\n        let value = this.state.categories[event.target.options[event.target.options.selectedIndex].label];\r\n        this.setState({\r\n            newInstructionCategory: value\r\n        });\r\n        // console.log(this.state.categories[event.target.options.selectedIndex])\r\n    }\r\n    // On file select (from the pop up)\r\n    onFileChange = event => {\r\n\r\n        // Update the state\r\n        this.setState({ selectedFile: event.target.files[0] });\r\n\r\n    };\r\n\r\n    downloadFile = (instruction) => {\r\n        axios({\r\n            url: ` https://icc.ise.bgu.ac.il/njsw18auth/usersAll/instructions/${instruction.InstructionId}`,\r\n            method: 'GET',\r\n            responseType: 'blob', // important\r\n            headers: {\r\n                'x-auth-token': sessionStorage.getItem(\"token\")\r\n            }\r\n        }).then((response) => {\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', `${instruction.Title}.pdf`); //or any other extension\r\n            document.body.appendChild(link);\r\n            link.click();\r\n        });\r\n    };\r\n\r\n    uploadFile(category, title, file, onUploadProgress) {\r\n        let formData = new FormData();\r\n        formData.append(\"Category\", category);\r\n        formData.append(\"Title\", title);\r\n        formData.append(\"pdf\", file);\r\n        return axios.post(\" https://icc.ise.bgu.ac.il/njsw18auth/doctors/instructions\", formData, {\r\n            headers: {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n                'x-auth-token': sessionStorage.getItem(\"token\")\r\n            },\r\n            onUploadProgress,\r\n        });\r\n    }\r\n\r\n    selectFile(event) {\r\n        this.setState({\r\n            selectedFiles: event.target.files,\r\n        });\r\n    }\r\n\r\n    upload() {\r\n        let currentFile = this.state.selectedFiles[0];\r\n        this.setState({\r\n            progress: 0,\r\n            currentFile: currentFile,\r\n        });\r\n\r\n        this.uploadFile(this.state.newInstructionCategory, this.state.newInstructionTitle, currentFile, (event) => {\r\n            this.setState({\r\n                progress: Math.round((100 * event.loaded) / event.total),\r\n            });\r\n        })\r\n            .then((response) => {\r\n                this.setState({\r\n                        message: response.data.message,\r\n                    }\r\n                );\r\n                window.alert(\"פרוטוקול הועלה בהצלחה!\")\r\n                this.setState({newInstructionTitle : '',  progress: 0, currentFile: undefined, selectedFiles:undefined});\r\n                this.getInstructions();\r\n            })\r\n            .catch(() => {\r\n                this.setState({\r\n                    progress: 0,\r\n                    message: \"Could not upload the file!\",\r\n                    currentFile: undefined,\r\n                    selectedFiles: undefined\r\n                });\r\n            });\r\n\r\n        this.setState({\r\n            selectedFiles: undefined,\r\n        });\r\n    }\r\n\r\n    // On file upload (click the upload button)\r\n    onFileUpload = () => {\r\n        // Create an object of formData\r\n        const formData = new FormData();\r\n        // Update the formData object\r\n        formData.append(\r\n            \"myFile\",\r\n            this.state.selectedFile,\r\n            this.state.selectedFile.name\r\n        );\r\n\r\n        // Details of the uploaded file\r\n        console.log(this.state.selectedFile);\r\n        // Request made to the backend api\r\n        // Send formData object\r\n        // axios.post(\"api/uploadfile\", formData);\r\n    };\r\n\r\n    // File content to be displayed after\r\n    // file upload is complete\r\n    fileData = () => {\r\n        if (this.state.selectedFile) {\r\n            return (\r\n                <div>\r\n                    <h2>File Details:</h2>\r\n                    <p>File Name: {this.state.selectedFile.name}</p>\r\n                    <p>File Type: {this.state.selectedFile.type}</p>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <br />\r\n                    <h4>Choose before Pressing the Upload button</h4>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    async removeInstruction(eId){\r\n        if(sessionStorage.getItem('doctor')) {\r\n            const r = window.confirm(\"האם אתה בטוח שאתה רוצה למחוק את הפרוטוקול?\");\r\n            if (r) {\r\n                await axios.delete(`  https://icc.ise.bgu.ac.il/njsw18auth/doctors/instructions/${eId}`,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            'x-auth-token': sessionStorage.getItem(\"token\")\r\n                        }\r\n                    });\r\n                window.alert(\"הפרוטוקול נמחק!\")\r\n                this.getInstructions()\r\n            }\r\n        }\r\n    }\r\n    handleChange(e) {\r\n        if (e.target.name === \"newInstructionTitle\") {\r\n            this.setState({[e.target.name]: e.target.value})}\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        this.upload();\r\n    }\r\n\r\n    renderUploadFile() {\r\n        const {\r\n            selectedFiles,\r\n            currentFile,\r\n            progress,\r\n            message,\r\n        } = this.state;\r\n        let optionItems = Object.keys(this.state.categories).map((category) =>\r\n            <option key={category} >{category}</option>\r\n        );\r\n        return <div>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <div className=\"divs_in_add_pdf\">\r\n                    <label className=\"labels_in_add_instructions\">כותרת הפרוטוקול: </label>\r\n                    <input className=\"inputs_in_add_instructions\" name=\"newInstructionTitle\" type=\"text\"\r\n                           value={this.state.newInstructionTitle} onChange={e => this.handleChange(e)} required/>\r\n                </div>\r\n                <div className=\"divs_in_add_pdf\">\r\n                    <label className=\"labels_in_add_instructions\">קטגוריית הפרוטוקול:    </label>\r\n                    <select  className=\"select_in_add_instructions\" onChange={this.onSelectCategoryChosen} required>\r\n                        {optionItems}\r\n                    </select>\r\n                </div>\r\n                <br/>\r\n                <br/>\r\n                {currentFile && (\r\n                    <div className=\"progress\">\r\n                        <div\r\n                            className=\"progress-bar progress-bar-info progress-bar-striped\"\r\n                            role=\"progressbar\"\r\n                            aria-valuenow={progress}\r\n                            aria-valuemin=\"0\"\r\n                            aria-valuemax=\"100\"\r\n                            style={{ width: progress + \"%\" }}\r\n                        >\r\n                            {progress}%\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                <br/>\r\n                <br/>\r\n                <label className=\"btn btn-default\">\r\n                    <input type=\"file\" onChange={this.selectFile} />\r\n                </label>\r\n                <button className=\"btn btn-primary\"\r\n                        disabled={!selectedFiles}\r\n                        type={\"submit\"}\r\n                >\r\n                    העלאת הפרוטוקל\r\n                </button>\r\n                <div className=\"alert alert-light\" role=\"alert\">\r\n                    {message}\r\n                </div>\r\n            </form>\r\n        </div>\r\n    }\r\n\r\n    render() {\r\n        // const { pageNumber, numPages } = this.state;\r\n        // require(\"./MessagesPage.css\");\r\n\r\n        require(\"./InstructionsSurgery.css\");\r\n        return (\r\n            <div className=\"presenter\">\r\n                <Grid container spacing={2} >\r\n                    <Grid item xs={6} >\r\n                        <br/>\r\n                        {sessionStorage.getItem('patient') &&\r\n                        <img style={{width: '100%', marginLeft:\"auto\"}} src={require('./ImagesOrth/INSTRUCTIONS.PNG')} />}\r\n                        {sessionStorage.getItem('doctor') && this.renderUploadFile()}\r\n                    </Grid>\r\n                    <Grid item xs={6} >\r\n                        <div>\r\n                            <pre className=\"message\">{this.state.msg ? this.state.msg : null}</pre>\r\n                            <pre>{this.state.moveMsg ? this.state.moveMsg : null}</pre>\r\n                            <div style={{ width: '100%', position: \"relative\"}}>\r\n                                <ImageMapper\r\n                                    src={URL}\r\n                                    map={MAP}\r\n                                    width={700}\r\n                                    // height={700}\r\n                                    onLoad={() => this.load()}\r\n                                    onClick={area => this.clicked(area)}\r\n                                    // onMouseEnter={area => this.enterArea(area)}\r\n                                    // onMouseLeave={area => this.leaveArea(area)}\r\n                                    onMouseMove={(area, _, evt) => this.moveOnArea(area, evt)}\r\n                                    // onImageClick={evt => this.clickedOutside(evt)}\r\n                                    onImageMouseMove={evt => this.moveOnImage(evt)}\r\n                                    lineWidth={4}\r\n                                    strokeColor={\"white\"}\r\n                                />\r\n                                {this.state.hoveredArea && (\r\n                                    <span\r\n                                        className=\"tooltip\"\r\n                                        style={{...this.getTipPosition(this.state.hoveredArea)}}\r\n                                    >\r\n\t\t\t\t\t\t\t\t{this.state.hoveredArea && this.state.hoveredArea.name}\r\n\t\t\t\t\t\t\t</span>\r\n                                )}\r\n                            </div>\r\n\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n                <div id=\"inst\">\r\n                    <br/>\r\n                    <br/>\r\n                    <br/>\r\n                    <h2 className=\"insth2\">{this.state.headerNames[this.state.category]}</h2>\r\n                </div>\r\n                <div >\r\n                    {this.state.category && !this.state.instructionsByCategory[this.state.category] && <div><h3>אין פרוטוקולים בתחום זה</h3></div>}\r\n                    <Grid container spacing={2} >\r\n                        {this.state.showInstructions && this.state.instructionsByCategory[this.state.category] &&\r\n                        this.state.instructionsByCategory[this.state.category].map((instruction) => {\r\n                            return <Grid item xs={5} style={{marginLeft:50}}>\r\n                                <Card id=\"cardInstruction\">\r\n                                    <CardMedia\r\n                                        component=\"img\"\r\n                                        alt=\"Contemplative Reptile\"\r\n                                        height=\"200\"\r\n                                        image={this.state.categoryToImage[instruction.Category]}\r\n                                        title=\"Contemplative Reptile\"\r\n                                        style={{borderColor: 'black'}}\r\n                                    />\r\n                                    <Card.Header>\r\n                                        <button onClick={() => this.downloadFile(instruction)}>\r\n                                            <b>{instruction.Title}</b>\r\n                                            <BsDownload style={{float:'left'}}/>\r\n                                        </button>\r\n                                    </Card.Header>\r\n                                </Card>\r\n                                {sessionStorage.getItem('doctor') &&\r\n                                <AiFillDelete type=\"button\" class=\"trushIcon\" style={{color: 'black'}} size={20}\r\n                                              onClick={() => this.removeInstruction(instruction.InstructionId)}/>\r\n                                }\r\n                            </Grid>\r\n                        })\r\n                        }\r\n                    </Grid>\r\n                </div>\r\n            </div>)\r\n\r\n    }\r\n}\r\n\r\nexport default InstructionsSurgery;\r\n\r\n","import React, {Component} from \"react\"\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport axios from \"axios\";\r\nimport YouTube from \"react-youtube\";\r\n//\r\n// import makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {AiFillDelete} from \"react-icons/ai\";\r\n\r\nclass ExercisesPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            exercises: undefined,\r\n            exercisesGrid: undefined,\r\n            newExerciseUrl: '',\r\n            newExerciseCategory: 'ברך',\r\n            categories: ['ברך','גב','כתף','קרסול','ירך','מרפק','גב']};\r\n        this.getExercises = this.getExercises.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.onSelectCategoryChosen = this.onSelectCategoryChosen.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getExercises();\r\n    }\r\n\r\n    async getExercises(){\r\n        let respone = await axios.get('  https://icc.ise.bgu.ac.il/njsw18auth/usersAll/exercises',\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                },\r\n            });\r\n        this.setState({exercises: respone.data.data})\r\n\r\n        let exercisesForGrid = [];\r\n        for (var i = 0; i < this.state.exercises.length; i = i + 2) {\r\n            if (this.state.exercises[i + 1]) {\r\n                exercisesForGrid.push({\"obj1\": this.state.exercises[i], \"obj2\": this.state.exercises[i + 1]});\r\n            } else {\r\n                exercisesForGrid.push({\"obj1\": this.state.exercises[i], \"obj2\": {}});\r\n            }\r\n            // }\r\n            this.setState({exercisesGrid: exercisesForGrid})\r\n        }\r\n    }\r\n\r\n    handleSubmit(e){\r\n        e.preventDefault();\r\n        this.addExercise();\r\n        this.setState({newExerciseUrl : ''})\r\n        this.getExercises()\r\n        // if(response.data.data === null){\r\n        //     window.alert('אנא מלא את הטופס כראוי')\r\n        // }\r\n    }\r\n\r\n     addExercise(){\r\n        const urlExe = new URL(this.state.newExerciseUrl);\r\n        var urlId = urlExe.searchParams.get('v');\r\n        for(var i=0; i<this.state.exercises.length; i++){\r\n            if (this.state.exercises[i].Video === urlId){\r\n                window.alert('הסרטון כבר קיים במאגר');\r\n                this.setState({newExerciseUrl : ''})\r\n                return;\r\n            }\r\n        }\r\n        let url = `  https://icc.ise.bgu.ac.il/njsw18auth/doctors/exercises`;\r\n        axios.post(url,\r\n            {\r\n                category: this.state.newExerciseCategory,\r\n                url : urlId\r\n            },{\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }});\r\n        window.alert(\"הסרטון נוסף בהצלחה!\")\r\n         this.getExercises()\r\n     }\r\n    handleChange(e) {\r\n        if (e.target.name === \"newExerciseUrl\") {\r\n            this.setState({[e.target.name]: e.target.value})}\r\n    }\r\n\r\n    onSelectCategoryChosen(event) {\r\n        this.setState({\r\n            newExerciseCategory  : this.state.categories[event.target.options.selectedIndex]\r\n        });\r\n    }\r\n\r\n    async removeExercise(eId){\r\n        if(sessionStorage.getItem('doctor')) {\r\n            const r = window.confirm(\"האם אתה בטוח שאתה רוצה למחוק את הסרטון?\");\r\n            if (r == true) {\r\n                await axios.delete(`  https://icc.ise.bgu.ac.il/njsw18auth/doctors/exercises/removeExercise/${eId}`,\r\n                    {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            'x-auth-token': sessionStorage.getItem(\"token\")\r\n                        }\r\n                    });\r\n                window.alert(\"הסרטון נמחק!\")\r\n                this.getExercises()\r\n            }\r\n        }\r\n    }\r\n\r\n    render(){\r\n        require(\"./ExercisesPage.css\");\r\n        let group = undefined;\r\n        var forPatient = \"מטופל/ת יקר/ה!\\nלפניך מאגר תרגולי פיזיותרפיה המחולקים לקטגוריות.\\nשים לב! יש להתייעץ עם הרופא המטפל לפני ביצוע התרגולים הביתיים.\\n החלמה מהירה ובריאות שלמה!\"\r\n        if (this.state.exercises) {\r\n            group = this.state.exercises.reduce((r, a) => {\r\n                r[a.Category] = [...r[a.Category] || [], a];\r\n                return r;\r\n            }, {});\r\n        }\r\n        const opts = {\r\n            height: '350',\r\n            width: '400',\r\n            playerVars: {\r\n                // https://developers.google.com/youtube/player_parameters\r\n                autoplay: 0,\r\n            },\r\n        };\r\n        let optionItems = this.state.categories.map((category) =>\r\n            <option key={category} >{category}</option>\r\n        );\r\n        return (\r\n            <div>\r\n                {sessionStorage.getItem('doctor') && <div>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <div className=\"divs_in_add\">\r\n                            <h5>מטפל/ת יקר/ה,</h5>\r\n                            <h5>על מנת להוסיף סרטון למאגר, אנא העתק את קישור ה-Youtube לחלון הנכון ובחר את האיבר השייך לטיפול בסרטון זה.</h5>\r\n                            <h5>על מנת למחוק סרטון, יש ללחוץ על כפתור המחיקה תחת הסרטון הרלוונטי.</h5>\r\n                            <label className=\"labels_in_add_user\">כתובת הסרטון:</label>\r\n                            <input className=\"inputs_in_add_user\" name=\"newExerciseUrl\" type=\"url\"\r\n                                   value={this.state.newExerciseUrl} onChange={e => this.handleChange(e)} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">קטגוריית הסרטון: </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectCategoryChosen}>\r\n                                {optionItems}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <input type=\"submit\" value=\"הוסף\" className=\"submit_and_reset_buttons\"/>\r\n                        </div>\r\n                    </form>\r\n                </div>}\r\n                {sessionStorage.getItem('patient') && <div>\r\n                    <a><b>מטופל/ת יקר/ה!</b></a><br/>\r\n                    <a><b>לפניך מאגר תרגולי פיזיותרפיה המחולקים לקטגוריות.</b></a><br/>\r\n                    <a><b>שים לב! יש להתייעץ עם הרופא המטפל לפני ביצוע התרגולים הביתיים.</b></a><br/>\r\n                    <a><b>החלמה מהירה ובריאות שלמה!</b></a>\r\n                </div>}\r\n\r\n                <hr style={{color: \"darkgrey\", backgroundColor: \"darkgrey\", height: 3}}/>\r\n                {group && Object.keys(group).map((keyName, keyIndex) => (\r\n                    <div>\r\n                        <div>\r\n                            <Grid item xs={7} >\r\n                                <div>\r\n                                    <h2 className=\"exh2\"><b>תרגילי {keyName}</b></h2>\r\n                                </div>\r\n                            </Grid>\r\n                            <Grid container spacing={3} style={{width: '100%', height:'100%'}} >\r\n                                {group[keyName].map(exercise => <Grid item xs={6} style={{width: '100%', height:'100%'}}>\r\n                                        <YouTube  videoId={exercise.Video} opts={opts} onReady={this._onReady}/>\r\n                                        {sessionStorage.getItem('doctor') &&\r\n                                        <AiFillDelete type=\"button\" class=\"trushIcon\" style={{color: 'black'}} size={20}\r\n                                                      onClick={() => this.removeExercise(exercise.ExerciseId)}/>\r\n                                        }\r\n                                    </Grid>\r\n                                )}\r\n                            </Grid>\r\n                            <hr style={{color: \"darkgrey\", backgroundColor: \"darkgrey\", height: 3}}/>\r\n                        </div>\r\n                    </div>))}\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ExercisesPage;\r\n\r\n\r\n","import React, {Component} from 'react';\r\nimport \"./Logo\";\r\nimport \"./Search\";\r\nimport \"./PatientSearch\";\r\n\r\n\r\nimport Logo from './Logo';\r\nimport NavBar from \"./NavBar\";\r\nimport axios from \"axios\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport MessagesPage from \"./MessagesPage\";\r\nimport PatientSearchNew from \"./PatientSearchNew\";\r\nimport QuestionnairesManger from \"./Questionnaire/QuestionnaireManger\";\r\nimport {Route} from \"react-router-dom\";\r\nimport SurveyComponent from \"./Questionnaire/SurveyComponent\";\r\nimport InstructionsSurgery from \"./InstructionsSurgery\";\r\nimport ExercisesPage from \"./ExercisesPage\";\r\n\r\nimport { Document, Page, pdfjs } from \"react-pdf\";\r\npdfjs.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            optionsPName: [],\r\n            namesDiv: [],\r\n            isFetchingNames: false,\r\n            users: [],\r\n            pName:'',\r\n            encrypName:'',\r\n            showPopup: false,\r\n        };\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.fetchNamesForResearch = this.fetchNamesForResearch.bind(this);\r\n        this.handlePName = this.handlePName.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.isDoctor()) {\r\n            this.fetchNamesForResearch()\r\n                .then(() => console.log(\"Fetch names successfully\"));\r\n        }\r\n    }\r\n\r\n    async fetchNamesForResearch(){\r\n        var list = [];\r\n        var users = [];\r\n        var namesDiv = [];\r\n        this.setState({isFetchingNames: true});\r\n        var response = await axios.get(\r\n            \"  https://icc.ise.bgu.ac.il/njsw18auth/doctors/metrics/getUsers\",\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n        if(response.data.data){\r\n            var names = [];\r\n            for(var i = 0; i < response.data.data.length; i++){\r\n                let user = response.data.data[i];\r\n                namesDiv.push({UserID: user.UserID});\r\n                users.push(user);\r\n                // names.push(user.UserID)\r\n            }\r\n            // names = names.sort();\r\n            // var uniqueNames = Array.from(new Set(names));\r\n            // for(i = 0; i < uniqueNames.length; i++){\r\n            //     list.push(<option key={uniqueNames[i]}>{uniqueNames[i]}</option>);\r\n            // }\r\n        }\r\n        this.setState({\r\n            isFetchingNames: false,\r\n            // optionsPName: list,\r\n            namesDiv: namesDiv,\r\n            users: users\r\n        });\r\n    }\r\n    async fetchNames(){\r\n        var list = [];\r\n        var users = [];\r\n        var namesDiv = [];\r\n        this.setState({isFetchingNames: true});\r\n        var response = await axios.get(\r\n            \"  https://icc.ise.bgu.ac.il/njsw18auth/doctors/metrics/getUsers\",\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }\r\n        );\r\n        if(response.data.data){\r\n            var names = [];\r\n            for(var i = 0; i < response.data.data.length; i++){\r\n                let user = response.data.data[i];\r\n                namesDiv.push({first: user.First_Name, last: user.Last_Name});\r\n                users.push(user);\r\n                names.push(user.First_Name.trim() + \" \" + user.Last_Name.trim())\r\n            }\r\n            names = names.sort();\r\n            var uniqueNames = Array.from(new Set(names));\r\n            for(i = 0; i < uniqueNames.length; i++){\r\n                list.push(<option key={uniqueNames[i]}>{uniqueNames[i]}</option>);\r\n            }\r\n        }\r\n        this.setState({\r\n            isFetchingNames: false,\r\n            optionsPName: list,\r\n            namesDiv: namesDiv,\r\n            users: users\r\n        });\r\n    }\r\n\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n\r\n    handlePName(event) {\r\n        this.setState({pName: event.target.value});\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        if(event){\r\n            event.preventDefault()\r\n        }\r\n         await axios.post( `  https://icc.ise.bgu.ac.il/njsw18auth/doctors/metrics/userId`,\r\n            {\r\n                UserID: this.state.pName,\r\n            },\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': sessionStorage.getItem(\"token\")\r\n                }\r\n            }).then(res => {\r\n            this.setState({encrypName: res.data.data})\r\n        });\r\n        let usersByName = [];\r\n        this.state.users.forEach(user => {\r\n            if(this.state.encrypName === user.UserID) {\r\n                console.log(`found user ${user}`);\r\n                usersByName.push(user);\r\n            }\r\n        });\r\n        let cards = [];\r\n        for(let i = 0; i < usersByName.length; i++){\r\n            let user = usersByName[i];\r\n            let dateC = new Date(user.BirthDate).toLocaleDateString('en-GB', {day: 'numeric', month: 'numeric', year:\"numeric\"});\r\n            cards.push(\r\n                <Card className=\"cardApp\" key={user.UserID}  onClick={() => {\r\n                    this.setState({patientUserId: user.UserID, user: user});\r\n                    this.togglePopup();\r\n                }}>\r\n                    <Card.Body className=\"cardBody\">מזהה מטופל: {this.state.pName.trim()} </Card.Body>\r\n                    {/*<Card.Body className=\"cardBody\">שם מלא: {this.state.pName.trim()} </Card.Body>*/}\r\n                    {/*<Card.Body className=\"cardBody\">תאריך לידה: {dateC}</Card.Body>*/}\r\n                </Card>\r\n            );\r\n        }\r\n        this.setState({\r\n            text: cards\r\n        });\r\n        this.togglePopup();\r\n    }\r\n\r\n    isDoctor() {\r\n        return sessionStorage.getItem('doctor');\r\n    }\r\n\r\n    searchPatient() {\r\n        require(\"./search.css\");\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    {/*<datalist id=\"first-list\">{this.state.optionsPName}</datalist>*/}\r\n                    <div className=\"search\">\r\n                        <label className=\"lSearch\">\r\n                            חפש מטופל:\r\n                        </label>\r\n                        <input className=\"iSearch\"\r\n                               id=\"pname\"\r\n                               type=\"text\"\r\n                               name=\"pName\"\r\n                               value={this.state.pName}\r\n                               placeholder=\"מספר מטופל\"\r\n                               onChange={this.handlePName}\r\n                               list=\"first-list\"\r\n                               required\r\n                        />\r\n                        <button type=\"submit\" className=\"bSearch\">\r\n                            חפש\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n                <br />\r\n                {this.state.showPopup ?\r\n                    <Popup\r\n                        text={this.state.text}\r\n                        closePopup={this.togglePopup.bind(this)}\r\n                    /> : null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    getActiveComponent() {\r\n        if(this.props.component === 'search') {\r\n            return <PatientSearchNew patientUserId={this.state.patientUserId}/>;\r\n        } else if(this.props.component === 'messages') {\r\n            return <MessagesPage patientUserId={this.state.patientUserId}/>\r\n        } else if(this.props.component === 'questionnaires'){\r\n            return <QuestionnairesManger user = {this.state.user}/>\r\n        } else if(this.props.component === 'survey'){\r\n            return <SurveyComponent {...this.props}/>\r\n        } else if(this.props.component === 'instructions'){\r\n            return <InstructionsSurgery {...this.props}/>\r\n        } else if(this.props.component === 'exercises'){\r\n            return <ExercisesPage {...this.props}/>\r\n        }\r\n        return null;\r\n    }\r\n\r\n    checkIfNotSearchNeeded(){\r\n        if(this.props.component === 'instructions' || this.props.component === 'exercises'){\r\n            return false;\r\n        }\r\n        return true\r\n    }\r\n\r\n    render() {\r\n        require(\"./App.css\");\r\n        return (\r\n            <div>\r\n                <NavBar />\r\n                <div className=\"App\">\r\n                    <header className=\"App-header\">\r\n                        <Logo />\r\n                        {this.isDoctor() && this.checkIfNotSearchNeeded() && this.searchPatient()}\r\n                        {this.getActiveComponent()}\r\n                        <br />\r\n                    </header>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n\r\nclass Popup extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className='popupApp'>\r\n                <div className='popup_inner_App' >\r\n                    <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                    <h4>אנא בחר מבין הרשומות הבאות:</h4>\r\n                    {this.props.text}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport axios from 'axios';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Select from 'react-select';\r\nimport DropdownMultiselect from \"react-multiselect-dropdown-bootstrap\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport {FcInfo} from \"react-icons/fc\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport MultiSelect from \"react-multi-select-component\";\r\n\r\n\r\nconst initialState = {\r\n    userName: \"\",\r\n    fName: \"\",\r\n    lName: \"\",\r\n    password: \"\",\r\n    bday: new Date(),\r\n    questionsID: [],\r\n    questionsText: [],\r\n    questions :[],\r\n    answerUserQuestion: \"\",\r\n    quesionChosen: 0,\r\n    code: \"\",\r\n    type: '',\r\n    questionnairesID:[],\r\n    questionnairesText:[],\r\n    gender: \"\",\r\n    smoke: \"\",\r\n    dateOfSurgery:\"\",\r\n    surgeryType: \"\",\r\n    education: \"\",\r\n    height: \"\",\r\n    weight: \"\",\r\n    bmi:\"\",\r\n    // questionnaires: [],\r\n    questionnairesChosen:0,\r\n};\r\n\r\nclass AddUser extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"\",\r\n            fName: \"\",\r\n            lName: \"\",\r\n            password: \"\",\r\n            bday: new Date(),\r\n            phone: \"\",\r\n            questionsID: [],\r\n            questionsText: [],\r\n            questions :[],\r\n            answerUserQuestion: \"\",\r\n            code: \"\",\r\n            questionnaires: [],\r\n            questionnairesID:[],\r\n            questionnairesText:[],\r\n            questionnairesChosen:0,\r\n            quesionChosen: 0,\r\n            gender: \"\",\r\n            smoke: \"\",\r\n            dateOfSurgery:\"\",\r\n            surgeryType: \"\",\r\n            education: \"\",\r\n            height: \"\",\r\n            weight: \"\",\r\n            bmi:\"\",\r\n            surgeryDateDisplay: false,\r\n            selected: []\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleReset = this.handleReset.bind(this);\r\n        this.onSelectQuesionChosen = this.onSelectQuesionChosen.bind(this);\r\n        this.onSelectGender = this.onSelectGender.bind(this);\r\n        this.onSelectSmoke = this.onSelectSmoke.bind(this);\r\n        this.onSelectSurgeryType = this.onSelectSurgeryType.bind(this);\r\n        this.onSelectEducation = this.onSelectEducation.bind(this);\r\n        this.onSelectQuestionnairesChosen = this.onSelectQuestionnairesChosen.bind(this);\r\n        this.setSelected = this.setSelected.bind(this);\r\n    }\r\n\r\n    onSelectQuesionChosen(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        this.setState({\r\n            quesionChosen: selectedIndex\r\n        });\r\n    }\r\n    onSelectGender(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        this.setState({\r\n            gender: selectedIndex\r\n        });\r\n    }\r\n    onSelectSmoke(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        this.setState({\r\n            smoke: selectedIndex\r\n        });\r\n    }\r\n    onSelectEducation(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        this.setState({\r\n            education: selectedIndex\r\n        });\r\n    }\r\n\r\n    onSelectSurgeryType(event) {\r\n        const selectedIndex = event.target.options.selectedIndex;\r\n        console.log(selectedIndex)\r\n        this.setState({\r\n            surgeryType: selectedIndex\r\n        });\r\n        if( selectedIndex !== 3 && selectedIndex !==0){\r\n            this.setState({\r\n                surgeryDateDisplay: true\r\n            });\r\n        }else{\r\n            this.setState({\r\n                surgeryDateDisplay: false\r\n            });\r\n        }\r\n\r\n    }\r\n    onSelectQuestionnairesChosen(selected) {\r\n        console.log(selected)\r\n        // const selectedIndex = event.target.options.selectedIndex;\r\n        let chosen = [];\r\n        let questionnaires = this.state.questionnaires;\r\n        selected.forEach(selectQuestionnaire => {\r\n            questionnaires.forEach(questionnaire => {\r\n                if(selectQuestionnaire.value === questionnaire.QuestionnaireText){\r\n                    chosen.push(questionnaire)\r\n                }\r\n            })\r\n        });\r\n        this.setState({\r\n            selected: selected,\r\n            questionnairesChosen: Array.from(new Set(chosen))\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        let initialQuestions = [];\r\n        let initQuestionsID = [];\r\n        let initQuestionsText = [];\r\n\r\n        fetch('  https://icc.ise.bgu.ac.il/njsw18users/getVerifications')\r\n            .then(response => {\r\n                return response.json();\r\n            }).then(results => {\r\n\r\n            initialQuestions = results.data;\r\n\r\n            for(var i = 0; i < initialQuestions.length; i++) {\r\n                var obj = initialQuestions[i];\r\n                initQuestionsID.push(obj.QuestionID);\r\n                initQuestionsText.push(obj.QuestionText);\r\n\r\n            }\r\n\r\n            this.setState({\r\n                questionsID: initQuestionsID,\r\n                questionsText: initQuestionsText,\r\n                questions: initialQuestions,\r\n            });\r\n        });\r\n        // if(this.state.type === \"patient\"){\r\n        let initQuestionnairesID = [];\r\n        let initQuestionnairesText = [];\r\n        let initQuestionnaires = [];\r\n        fetch('  https://icc.ise.bgu.ac.il/njsw18questionnaires/all')\r\n            .then(response => {\r\n                return response.json();\r\n            }).then(results => {\r\n\r\n            initQuestionnaires = results.data;\r\n\r\n            for(var i = 0; i < initQuestionnaires.length; i++) {\r\n                var obj = initQuestionnaires[i];\r\n                if(obj.QuestionnaireID !== 0 && obj.QuestionnaireID !==6 && obj.QuestionnaireID !== 5) {\r\n                    initQuestionnairesID.push(obj.QuestionnaireID);\r\n                    initQuestionnairesText.push(obj.QuestionnaireText);\r\n                }\r\n            }\r\n            this.setState({\r\n                questionnaires: initQuestionnaires,\r\n                questionnairesID: initQuestionnairesID,\r\n                questionnairesText: initQuestionnairesText\r\n            });\r\n        });\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        var bDay = new Date(this.state.bday);\r\n        var now = new Date();\r\n        // var regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/;\r\n        // if(!regex.test(this.state.password)){\r\n        //     window.alert('הסיסמא צריכה להכיל לפחות 8 תווים,אות אנגלית קטנה, אות אנגלית גדולה ומספר')\r\n        //     return\r\n        // }\r\n        if(this.state.type === 'doctor') {\r\n            axios.post('  https://icc.ise.bgu.ac.il/njsw18users/doctorRegister', {\r\n                UserID: this.state.userName,\r\n                Password: this.state.password,\r\n                First_Name: this.state.fName,\r\n                Last_Name: this.state.lName,\r\n                Phone_Number: this.state.phone,\r\n                BirthDate: bDay.getTime(),\r\n                Code: this.state.code,\r\n                VerificationQuestion: this.state.quesionChosen,\r\n                VerificationAnswer: this.state.answerUserQuestion,\r\n                ValidTime: now.getTime()\r\n            }).then(res => {\r\n                if (res.data.message === \"Wrong Code\") {\r\n                    window.alert(\"קוד האימות אינו נכון\");\r\n                } else if (res.data.message === \"Taken Email\") {\r\n                    window.alert(\"כתובת הדואל כבר רשומה במערכת\");\r\n                } else {\r\n                    window.alert(\"ההרשמה בוצעה בהצלחה נא לבצע התחברות\");\r\n                    window.location.reload(false);\r\n                }\r\n            })\r\n        }\r\n        if(this.state.type === 'patient') {\r\n            var dateOfSurgery = new Date(this.state.dateOfSurgery);\r\n            let gender;\r\n            if (this.state.gender == 1) {\r\n                gender = \"נקבה\"\r\n            } else if (this.state.gender == 2) {\r\n                gender = \"זכר\"\r\n            }\r\n            let smoke;\r\n            if (this.state.smoke == 1) {\r\n                smoke = \"מעשן\"\r\n            } else if (this.state.smoke == 2) {\r\n                smoke = \"לא מעשן\"\r\n            }\r\n            let sType;\r\n            if (this.state.surgeryType ==1) {\r\n                sType = \"ניתוח דחוף\"\r\n            }else if (this.state.surgeryType == 2)\r\n            {\r\n                sType = \"ניתוח מתוכנן\"\r\n\r\n            }else if (this.state.surgeryType == 3) {\r\n                sType = \"ללא ניתוח\"\r\n            }\r\n            let education;\r\n            let educationOptions = {1 :\"השכלה אקדמאית\", 2: \"השכלה תיכונית\", 3:\"10-12 שנות לימוד\", 4: \"6-9 שנות לימוד\", 5: \"5 שנות לימוד או פחות\", 6:\"לא מעוניין לענות\"};\r\n            for (var key in educationOptions) {\r\n                if(key == this.state.education){\r\n                    education = educationOptions[key]\r\n                }\r\n            }\r\n            let height_double = Number(this.state.height / 100);\r\n            let bmi = String((Number(this.state.weight)/Math.pow(height_double,2)));\r\n            axios.post('  https://icc.ise.bgu.ac.il/njsw18users/patientRegister', {\r\n                UserID: this.state.userName,\r\n                Password: this.state.password,\r\n                First_Name: \"מטופל\",\r\n                Last_Name: this.state.userName,\r\n                Phone_Number: \"\",\r\n                Gender:gender,\r\n                Smoke: smoke,\r\n                DateOfSurgery: dateOfSurgery.getTime(),\r\n                SurgeryType: sType,\r\n                Education: education,\r\n                Height: this.state.height,\r\n                Weight: this.state.weight,\r\n                BMI: bmi,\r\n                BMI_NUMBER: parseFloat(bmi),\r\n                BirthDate: bDay.getTime(),\r\n                Code: this.state.code,\r\n                Questionnaires: this.state.questionnairesChosen,\r\n                VerificationQuestion: this.state.quesionChosen,\r\n                VerificationAnswer: this.state.answerUserQuestion,\r\n                ValidTime: now.getTime()\r\n            }).then(res => {\r\n                if (res.data.message === \"Wrong Code\") {\r\n                    window.alert(\"קוד האימות אינו נכון\");\r\n                } else if (res.data.message === \"Taken Email\") {\r\n                    window.alert(\"כתובת הדואל כבר רשומה במערכת\");\r\n                } else {\r\n                    window.alert(\"ההרשמה בוצעה בהצלחה נא לבצע התחברות\");\r\n                    window.location.reload(false);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    handleReset(event) {\r\n        this.setState (initialState);\r\n        let initialQuestions = [];\r\n        let initQuestionsID = [];\r\n        let initQuestionsText = [];\r\n        fetch('  https://icc.ise.bgu.ac.il/njsw18users/getVerifications')\r\n            .then(response => {\r\n                return response.json();\r\n            }).then(results => {\r\n\r\n            initialQuestions = results.data;\r\n            console.log(initialQuestions);\r\n\r\n            for(var i = 0; i < initialQuestions.length; i++) {\r\n                var obj = initialQuestions[i];\r\n\r\n                initQuestionsID.push(obj.QuestionID);\r\n                initQuestionsText.push(obj.QuestionText);\r\n            }\r\n\r\n            this.setState({\r\n                questionsID: initQuestionsID,\r\n                questionsText: initQuestionsText,\r\n                questions: initialQuestions\r\n            });\r\n        });\r\n\r\n        let initQuestionnairesID = [];\r\n        let initQuestionnairesText = [];\r\n        let initQuestionnaires = [];\r\n        fetch('  https://icc.ise.bgu.ac.il/njsw18questionnaires/all')\r\n            .then(response => {\r\n                return response.json();\r\n            }).then(results => {\r\n\r\n            initQuestionnaires = results.data;\r\n\r\n            for(var i = 0; i < initQuestionnaires.length; i++) {\r\n                var obj = initQuestionnaires[i];\r\n\r\n                initQuestionnairesID.push(obj.QuestionnaireID);\r\n                initQuestionnairesText.push(obj.QuestionnaireText);\r\n            }\r\n            this.setState({\r\n                questionnaires: initQuestionnaires,\r\n                questionnairesID: initQuestionnairesID,\r\n                questionnairesText: initQuestionnairesText\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    isDoctor(){\r\n        this.setState({type: 'doctor'})\r\n    }\r\n    isPatient(){\r\n        this.setState({type: 'patient'})\r\n    }\r\n\r\n    setSelected(selected) {\r\n        this.onSelectQuestionnairesChosen(selected)\r\n    }\r\n    render() {\r\n        require(\"./AddUser.css\");\r\n        let quesions = this.state.questionsText;\r\n        let optionItems = quesions.map((question) =>\r\n            <option key={question} >{question}</option>\r\n        );\r\n        let questionnaires = this.state.questionnairesText;\r\n        if (questionnaires.length === 0){\r\n            this.componentDidMount();\r\n            questionnaires = this.state.questionnairesText;\r\n        }\r\n        // let questionnairesOption = questionnaires.map((questionnaire) =>\r\n        //     <option key={questionnaire} >{questionnaire}</option>\r\n        // );\r\n        let questionnairesOption =[];\r\n        questionnaires.forEach(questionnaire => {\r\n            questionnairesOption.push(questionnaire)\r\n            // questionnairesOption.push({value: questionnaire, label: questionnaire})\r\n        });\r\n        let options = [];\r\n        questionnaires.forEach(q => {\r\n            options.push({ label: q, value: q });\r\n        });\r\n        // let questionnairesOption = questionnaires.map((questionnaire) => {value: {questionnaire}, label: {questionnaire}});\r\n        let genderOptions = [<option></option>,<option>נקבה</option>,<option>זכר</option>];\r\n        let surgeryOptions = [<option/>,<option>ניתוח דחוף</option>,<option>ניתוח מתוכנן</option>,<option>ללא ניתוח</option>];\r\n        let smokeOptions = [<option/>,<option>מעשן</option>,<option>לא מעשן</option>];\r\n        let educationOptions = [<option/>,<option>השכלה אקדמאית</option>,<option>השכלה תיכונית</option>,<option>10-12 שנות לימוד</option>,<option>6-9 שנות לימוד</option>,<option>5 שנות לימוד או פחות</option>,<option>לא מעוניין לענות</option>];\r\n        var today = (new Date()).toISOString().split(\"T\")[0];\r\n        return (\r\n            <div>\r\n                <label className=\"buttonsChoose\">\r\n                    <Button style={{width: 150, floatButtom:'auto'}} className=\"docbutton\" variant=\"info\" onClick={() => this.isDoctor()}> דוקטור </Button>\r\n                    {'                                                                '}\r\n                    <Button style={{width: 150}} className=\"docbutton\" variant=\"info\" onClick={() => this.isPatient()}> מטופל </Button>\r\n                </label>\r\n                {this.state.type === 'doctor' ?\r\n                    <form onSubmit={this.handleSubmit} onReset={this.handleReset} id=\"new_user_form\">\r\n                        <div className=\"divs_in_add\">\r\n                            <label for= \"email\" className=\"labels_in_add_user\">כתובת דוא\"ל</label>\r\n                            <input className=\"inputs_in_add_user\" name=\"userName\" type=\"email\"\r\n                                   value={this.state.userName} onChange={e => this.handleChange(e)} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">שם פרטי</label>\r\n                            <input className=\"inputs_in_add_user\" name=\"fName\" type=\"text\" value={this.state.fName}\r\n                                   minLength=\"2\" maxLength=\"20\" onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">שם משפחה </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"lName\" type=\"text\" value={this.state.lName}\r\n                                   minLength=\"2\" maxLength=\"20\" onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">סיסמה </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"password\" type=\"password\" minlength=\"8\"\r\n                                   maxLength=\"12\" pattern=\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$\" value={this.state.password} onChange={this.handleChange} message={\"הסיסמא צריכה להכיל לפחות 8 תווים, לפחות תו אחד באות אנגלית קטנה, תו אחד באות אנגלית אות אנגלית גדולה ותו אחד כמספר.\"} required/>\r\n                            <Tooltip title=\"הסיסמא צריכה להכיל לפחות 8 תווים,אות אנגלית קטנה, אות אנגלית גדולה ומספר\">\r\n                                <IconButton >\r\n                                    <FcInfo></FcInfo>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">מספר טלפון</label>\r\n                            <input className=\"inputs_in_add_user\" name=\"phone\" type=\"tel\" id=\"phone\" pattern=\"[0-9]{10}\"\r\n                                   value={this.state.phone} onChange={this.handleChange} required/>\r\n                            <Tooltip title=\"מספר טלפון המכיל מספרים בלבד\">\r\n                                <IconButton >\r\n                                    <FcInfo></FcInfo>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">תאריך לידה</label>\r\n                            <input className=\"inputs_in_add_user\" name=\"bday\" type=\"date\" max={today}\r\n                                   value={this.state.bday} onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">קוד אימות </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"code\" type=\"text\" value={this.state.code}\r\n                                   onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">שאלת אימות </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectQuesionChosen}>\r\n                                {optionItems}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">תשובה </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"answerUserQuestion\" type=\"text\"\r\n                                   value={this.state.answerUserQuestion} onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <input type=\"submit\" value=\"הירשם\" className=\"submit_and_reset_buttons\"/>\r\n                        </div>\r\n                        <br/>\r\n                        <br/>\r\n                    </form>\r\n                    : null}\r\n                {this.state.type === 'patient' ?\r\n                    <form onSubmit={this.handleSubmit} onReset={this.handleReset} id=\"new_user_form\">\r\n                        <div className=\"divs_in_add\">\r\n                            <label for=\"email\" className=\"labels_in_add_user\">מזהה מטופל: </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"userName\" type=\"text\"\r\n                                   value={this.state.userName} onChange={e => this.handleChange(e)} required/>\r\n                        </div>\r\n                        {/*<div className=\"divs_in_add\">*/}\r\n                        {/*    <label className=\"labels_in_add_user\">שם פרטי</label>*/}\r\n                        {/*    <input className=\"inputs_in_add_user\" name=\"fName\" type=\"text\" value={this.state.fName}  minLength=\"2\" maxLength=\"20\"*/}\r\n                        {/*           onChange={this.handleChange} required/>*/}\r\n                        {/*</div>*/}\r\n                        {/*<div className=\"divs_in_add\">*/}\r\n                        {/*    <label className=\"labels_in_add_user\">שם משפחה </label>*/}\r\n                        {/*    <input className=\"inputs_in_add_user\" name=\"lName\" type=\"text\" value={this.state.lName}  minLength=\"2\" maxLength=\"20\"*/}\r\n                        {/*           onChange={this.handleChange} required/>*/}\r\n                        {/*</div>*/}\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">סיסמה </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"password\" type=\"password\" minlength=\"8\"\r\n                                   maxLength=\"12\" pattern=\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$\"\r\n                                   value={this.state.password} onChange={this.handleChange} required/>\r\n                            <Tooltip title=\"הסיסמא צריכה להכיל לפחות 8 תווים,אות אנגלית קטנה, אות אנגלית גדולה ומספר\">\r\n                                <IconButton >\r\n                                    <FcInfo></FcInfo>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </div>\r\n                        {/*<div className=\"divs_in_add\">*/}\r\n                        {/*    <label className=\"labels_in_add_user\">מספר טלפון</label>*/}\r\n                        {/*    <input className=\"inputs_in_add_user\" name=\"phone\" type=\"tel\" id=\"phone\" pattern=\"[0-9]{10}\"*/}\r\n                        {/*           value={this.state.phone} onChange={this.handleChange} required/>*/}\r\n                        {/*    <Tooltip title=\"מספר טלפון המכיל מספרים בלבד\">*/}\r\n                        {/*        <IconButton >*/}\r\n                        {/*            <FcInfo></FcInfo>*/}\r\n                        {/*        </IconButton>*/}\r\n                        {/*    </Tooltip>*/}\r\n                        {/*</div>*/}\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">תאריך לידה</label>\r\n                            <input className=\"inputs_in_add_user\" name=\"bday\" type=\"date\" max={today}\r\n                                   value={this.state.bday} onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">משקל (ק\"ג) </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"weight\" type=\"number\" value={this.state.weight}\r\n                                   onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">גובה (ס\"מ) </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"height\" type=\"number\" minLength=\"3\" value={this.state.height}\r\n                                   onChange={this.handleChange} required/>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">מין </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectGender}>\r\n                                {genderOptions}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"divs_in_add\">\r\n                            <label className=\"labels_in_add_user\">מעשן </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectSmoke}>\r\n                                {smokeOptions}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"divs_in_add_user\">\r\n                            <label className=\"labels_in_add_user\">השכלה </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectEducation}>\r\n                                {educationOptions}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"divs_in_add_user\">\r\n                            <label className=\"labels_in_add_user\">סוג ניתוח </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectSurgeryType}>\r\n                                {surgeryOptions}\r\n                            </select>\r\n                        </div>{this.state.surgeryDateDisplay &&\r\n                    <div className=\"divs_in_add_user\">\r\n                        <label className=\"labels_in_add_user\">תאריך ניתוח</label>\r\n                        <input className=\"inputs_in_add_user\" name=\"dateOfSurgery\" type=\"date\"\r\n                               value={this.state.DateOfSurgery} onChange={this.handleChange} required/>\r\n                    </div>}\r\n\r\n                        <div className=\"divs_in_add_user\">\r\n                            <label className=\"labels_in_add_user\">שאלת אימות </label>\r\n                            <select className=\"select_in_add_user\" onChange={this.onSelectQuesionChosen}>\r\n                                {optionItems}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"divs_in_add_user\">\r\n                            <label className=\"labels_in_add_user\">תשובה </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"answerUserQuestion\" type=\"text\"\r\n                                   value={this.state.answerUserQuestion} onChange={this.handleChange} required/>\r\n                        </div>\r\n                        {/*<div className=\"divs_in_add_try\">*/}\r\n                        {/*    <label className=\"labels_in_add_user\">שאלונים רפואיים </label>*/}\r\n                        {/*    <DropdownMultiselect id=\"add_user_dropdown\" options={questionnairesOption} handleOnChange={(selected) => {*/}\r\n                        {/*        this.onSelectQuestionnairesChosen(selected)*/}\r\n                        {/*    }} selectDeselectLabel={undefined} name=\"questionnaires\" placeholder=\"לא נבחר שאלון\"  style={{borderColor: 'black', width:80}}/>*/}\r\n                        {/*</div>*/}\r\n\r\n                        <div className=\"divs_in_add_try\">\r\n                            <label className=\"labels_in_add_user\">שאלונים רפואיים </label>\r\n                            <MultiSelect\r\n                                className=\"inputs_in_add_user\"\r\n                                options={options}\r\n                                value={this.state.selected}\r\n                                onChange={this.setSelected}\r\n                                labelledBy=\"Select\"\r\n                            />\r\n                        </div>\r\n                        <br/>\r\n                        <div className=\"divs_in_add_code\">\r\n                            <label className=\"labels_in_add_user\">קוד אימות </label>\r\n                            <input className=\"inputs_in_add_user\" name=\"code\" type=\"text\" value={this.state.code}\r\n                                   onChange={this.handleChange} required/>\r\n                            <Tooltip title=\"קוד האימות שהוגדר מבית החולים המטפל\">\r\n                                <IconButton >\r\n                                    <FcInfo></FcInfo>\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </div>\r\n                        <div style={{width:50, height:300}}>\r\n                            <input type=\"submit\" value=\"הירשם\" className=\"submit_and_reset_buttons\" required/>\r\n                        </div>\r\n                        <br/>\r\n                        <br/>\r\n                    </form>\r\n                    : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddUser;","import React, {Component} from 'react';\r\n\r\nimport './Login.css';\r\nimport axios from 'axios';\r\nimport Adduser from'./AddUser';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nclass Login extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            ID: '',\r\n            password: '',\r\n            wrong: false,\r\n            showPopup: false,\r\n            name: \"\",\r\n            doctor: false,\r\n            patient: false,\r\n            showID: false,\r\n            showWrongUser: false,\r\n            showQ: false,\r\n            showChange: false,\r\n            id: \"\",\r\n            question: \"\",\r\n            answer: \"\",\r\n            date: \"\",\r\n            wrongA: false,\r\n            diff: false,\r\n            token: \"\",\r\n            pass: \"\",\r\n            pass2: \"\",\r\n            remember: false,\r\n            register: false\r\n        };\r\n        if(localStorage.getItem(\"doctor\")){\r\n            sessionStorage.setItem(\"token\", localStorage.getItem(\"token\"));\r\n            sessionStorage.setItem(\"name\", localStorage.getItem(\"name\"));\r\n            sessionStorage.setItem(\"type\", localStorage.getItem(\"type\"));\r\n            sessionStorage.setItem(\"doctor\", localStorage.getItem(\"doctor\"));\r\n        }\r\n        else if(localStorage.getItem(\"patient\")){\r\n            sessionStorage.setItem(\"token\", localStorage.getItem(\"token\"));\r\n            sessionStorage.setItem(\"name\", localStorage.getItem(\"name\"));\r\n            sessionStorage.setItem(\"type\", localStorage.getItem(\"type\"));\r\n            sessionStorage.setItem(\"patient\", localStorage.getItem(\"patient\"));\r\n        }\r\n        this.change = this.change.bind(this);\r\n        this.sumbit = this.sumbit.bind(this);\r\n        this.togglePopup = this.togglePopup.bind(this);\r\n        this.forget = this.forget.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handle = this.handle.bind(this);\r\n        this.changePass = this.changePass.bind(this);\r\n        this.register = this.register.bind(this);\r\n    }\r\n\r\n    change(e) {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    togglePopup() {\r\n        this.setState({\r\n            showPopup: !this.state.showPopup,\r\n            wrongA: false,\r\n            diff: false\r\n        });\r\n    }\r\n\r\n    forget(e){\r\n        e.preventDefault();\r\n        this.setState({\r\n            showID: true,\r\n            showWrongUser: false,\r\n            showQ: false,\r\n            showChange: false,\r\n            register: false\r\n        })\r\n        this.togglePopup();\r\n    }\r\n\r\n    async handleSubmit(e){\r\n        e.preventDefault();\r\n        let url = '  https://icc.ise.bgu.ac.il/njsw18users/forgotPassword';\r\n        const response = await axios.post(\r\n            url,\r\n            {\r\n                UserID: this.state.id\r\n            }\r\n        );\r\n        if(response.data.data === null){\r\n            this.setState({\r\n                wrongA: true\r\n            })\r\n        }\r\n        else{\r\n            var qID = response.data.data;\r\n            const response1 = await axios.get(\"  https://icc.ise.bgu.ac.il/njsw18users/getVerificationQuestion?QuestionID=\" + qID);\r\n            this.setState({\r\n                showID: false,\r\n                showWrongUser: false,\r\n                showQ: true,\r\n                showChange: false,\r\n                register: false,\r\n                wrongA: false,\r\n                question: response1.data.data[\"QuestionText\"]\r\n            });\r\n        }\r\n    }\r\n\r\n    async handle(e){\r\n        e.preventDefault();\r\n        var date = new Date(this.state.date);\r\n        var dateLong = date.getTime();\r\n        let url = '  https://icc.ise.bgu.ac.il/njsw18users/checkVerification';\r\n        const response = await axios.post(\r\n            url,\r\n            {\r\n                UserID: this.state.id,\r\n                VerificationAnswer: this.state.answer,\r\n                BirthDate: dateLong\r\n            }\r\n        );\r\n        var token = response.data.data;\r\n        if(!token){\r\n            this.setState({\r\n                wrongA: true\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                showID: false,\r\n                showWrongUser: false,\r\n                showQ: false,\r\n                showChange: true,\r\n                register: false,\r\n                token: token\r\n            })\r\n        }\r\n    }\r\n\r\n    async changePass(event){\r\n        event.preventDefault();\r\n        if(this.state.pass !== this.state.pass2){\r\n            this.setState({\r\n                diff: true\r\n            });\r\n        }\r\n        else{\r\n            var token = this.state.token;\r\n            var url = '  https://icc.ise.bgu.ac.il/njsw18users/passwordChangeCheck/changePassword';\r\n            const response = await axios.post(\r\n                url,\r\n                {\r\n                    \"NewPassword\":this.state.pass\r\n                },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'x-auth-token': token\r\n                    }\r\n                }\r\n            );\r\n            if(response.data.message){\r\n                window.alert(\"הסיסמא שונתה בהצלחה\");\r\n                this.togglePopup();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    register(e){\r\n        this.setState({\r\n            register: true,\r\n            showID: false,\r\n            showWrongUser: false,\r\n            showQ: false,\r\n            showChange: false,\r\n        })\r\n        this.togglePopup();\r\n    }\r\n\r\n    sumbit(e){\r\n        e.preventDefault();\r\n        axios.post('  https://icc.ise.bgu.ac.il/njsw18users/login', {\r\n            UserID: this.state.ID,\r\n            Password: this.state.password\r\n        }).then(res => {\r\n            if(res.data.data == null){\r\n                this.setState({wrong: true})\r\n            }\r\n            else if(res.data.data.type[0] === \"patient\"){\r\n                sessionStorage.setItem(\"token\", res.data.data.token);\r\n                sessionStorage.setItem(\"name\", res.data.data.name);\r\n                sessionStorage.setItem(\"type\", res.data.data.type);\r\n                this.setState({\r\n                    patient: sessionStorage.getItem(\"type\").includes(\"patient\")\r\n                });\r\n                sessionStorage.setItem(\"patient\", this.state.patient);\r\n                window.location.reload(false);\r\n                if(this.state.remember){\r\n                    localStorage.setItem(\"token\", res.data.data.token);\r\n                    localStorage.setItem(\"name\", res.data.data.name);\r\n                    localStorage.setItem(\"type\", res.data.data.type);\r\n                    localStorage.setItem(\"patient\", this.state.patient);\r\n                }\r\n                // this.setState({name: res.data.data.name,\r\n                //     ID: \"\",\r\n                //     password: \"\",\r\n                //     wrong: false,\r\n                //     showID: false,\r\n                //     showWrongUser: true,\r\n                //     showQ: false,\r\n                //     showChange: false,\r\n                //     register: false\r\n                // });\r\n                // this.togglePopup();\r\n            }\r\n            else{\r\n                sessionStorage.setItem(\"token\", res.data.data.token);\r\n                sessionStorage.setItem(\"name\", res.data.data.name);\r\n                sessionStorage.setItem(\"type\", res.data.data.type);\r\n                this.setState({\r\n                    doctor: sessionStorage.getItem(\"type\").includes(\"doctor\")\r\n                });\r\n                sessionStorage.setItem(\"doctor\", this.state.doctor);\r\n                window.location.reload(false);\r\n                if(this.state.remember){\r\n                    localStorage.setItem(\"token\", res.data.data.token);\r\n                    localStorage.setItem(\"name\", res.data.data.name);\r\n                    localStorage.setItem(\"type\", res.data.data.type);\r\n                    localStorage.setItem(\"doctor\", this.state.doctor);\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    render(){\r\n        require(\"./Login.css\");\r\n        return(\r\n            <div>\r\n                <form onSubmit={e => this.sumbit(e)}>\r\n                    {/*<label>כתובת דוא\"ל:</label>*/}\r\n                    <label>שם משתמש:</label>\r\n                    <input type=\"text\" className=\"inputs\" name=\"ID\" onChange={e => this.change(e)} value={this.state.ID} required/>\r\n                    <label>סיסמה:</label>\r\n                    <input type=\"password\"  className=\"inputs\" name=\"password\"  onChange={e => this.change(e)} value={this.state.password} required/>\r\n                    {this.state.wrong ? <label id=\"wrong\">שם המשתמש או הסיסמה לא נכונים</label> :  <label></label> }\r\n                    <input type=\"checkbox\" id=\"remember\" name=\"remember\" onChange={e => this.change(e)} value={this.state.remember}/>\r\n                    <label>זכור אותי</label>\r\n                    <button type=\"submit\">התחבר</button>\r\n                    <label id=\"forget\"  onClick={(e) => this.forget(e)}>שכחת סיסמה?</label>\r\n                    <label id=\"register\"  onClick={(e) => this.register(e)}>הירשם</label>\r\n                </form>\r\n\r\n                {this.state.showPopup ?\r\n                    <Popup\r\n                        text={this.state.name}\r\n                        closePopup={this.togglePopup.bind(this)}\r\n                        showID={this.state.showID}\r\n                        showWrongUser={this.state.showWrongUser}\r\n                        showQ={this.state.showQ}\r\n                        showChange={this.state.showChange}\r\n                        handleSubmit={this.handleSubmit.bind(this)}\r\n                        change={this.change.bind(this)}\r\n                        handle={this.handle.bind(this)}\r\n                        question={this.state.question}\r\n                        wrongA={this.state.wrongA}\r\n                        diff={this.state.diff}\r\n                        changePass={this.changePass.bind(this)}\r\n                        register={this.state.register}\r\n                    /> : null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login;\r\n\r\nclass Popup extends React.Component {\r\n    render() {\r\n        var today = (new Date()).toISOString().split(\"T\")[0];\r\n        return (\r\n            <div>\r\n                {/*{ this.props.showWrongUser ?*/}\r\n                {/*    <div className='popup'>*/}\r\n                {/*        <div className='popup_innerWrong' >*/}\r\n                {/*            <button onClick={this.props.closePopup} id=\"x\">x</button>*/}\r\n                {/*            <h3>,שלום {this.props.text}</h3>*/}\r\n                {/*            <p id=\"wrongType\"> אין לך את ההרשאות המתאימות על מנת להיכנס לאתר</p>*/}\r\n                {/*        </div>*/}\r\n                {/*    </div> : null*/}\r\n                {/*}*/}\r\n                { this.props.showID ?\r\n                    <div className='popup'>\r\n                        <div className='popup_innerEmail' >\r\n                            <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                            <h3 id=\"h3\">שכחתי סיסמא</h3>\r\n                            <form onSubmit={this.props.handleSubmit}>\r\n                                <label  id=\"lid\">\r\n                                    אנא הזן שם משתמש:\r\n                                </label>\r\n                                <input type=\"text\" className=\"inputs\" name=\"id\" id=\"id\" onChange={this.props.change} required/>\r\n                                {this.props.wrongA ? <label className=\"error\">שם המשתמש לא קיימת</label> : null}\r\n                                <div className=\"lineC\">\r\n                                    <input type=\"submit\" value=\"המשך\" id=\"con\"/>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div> : null\r\n                }\r\n                { this.props.showQ ?\r\n                    <div className='popup'>\r\n                        <div className='popup_innerEmail' >\r\n                            <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                            <h3 id=\"h3\">שכחתי סיסמא</h3>\r\n                            <form onSubmit={this.props.handle}>\r\n                                <div className=\"lineC\">\r\n                                    <label  id=\"lq\">\r\n                                        {this.props.question}\r\n                                    </label>\r\n                                </div>\r\n                                <div className=\"lineC\">\r\n                                    <input type=\"text\"  name=\"answer\" id=\"answer\" onChange={this.props.change} required/>\r\n                                </div>\r\n                                <div className=\"lineC\">\r\n                                    <label  id=\"ldate\">\r\n                                        הכנס את תאריך יום הולדת שלך:\r\n                                    </label>\r\n                                </div>\r\n                                <div className=\"lineC\">\r\n                                    <input type=\"date\" name=\"date\" id=\"date\" max={today} onChange={this.props.change} required/>\r\n                                </div>\r\n                                <div className=\"lineC\">\r\n                                    {this.props.wrongA ? <label className=\"error\">שאלת אימות לא נכונה או תאריך לידה שגוי</label> : null}\r\n                                </div>\r\n                                <div className=\"lineC\">\r\n                                    <input type=\"submit\" value=\"המשך\" id=\"con\"/>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div> : null\r\n                }\r\n                { this.props.showChange ?\r\n                    <div className='popup'>\r\n                        <div className='popup_innerEmail' >\r\n                            <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                            <h3 id=\"h3\">שכחתי סיסמא</h3>\r\n                            <form onSubmit={this.props.changePass}>\r\n                                <label  id=\"lpass\">\r\n                                    סיסמא חדשה:\r\n                                </label>\r\n                                <input type=\"password\" className=\"inputs\" name=\"pass\" id=\"pass\" onChange={this.props.change} required/>\r\n                                <label id=\"lpass2\">\r\n                                    הקלד את הסיסמא מחדש:\r\n                                </label>\r\n                                <input type=\"password\" className=\"inputs\" name=\"pass2\" id=\"pass2\" onChange={this.props.change} required/>\r\n                                {this.props.diff ? <label className=\"error\">הסיסמאות שונות</label> : null}\r\n                                <input type=\"submit\" value=\"שלח\" id=\"send\"/>\r\n                            </form>\r\n                        </div>\r\n                    </div> : null\r\n                }\r\n                { this.props.register ?\r\n                    <div className='popup'>\r\n                        <div className='popup_innerAdd' >\r\n                            <button onClick={this.props.closePopup} id=\"x\">x</button>\r\n                            <br/>\r\n                            <h3>הרשמה</h3>\r\n                            <Adduser />\r\n                        </div>\r\n                    </div> : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport \"./HomeLogin.css\"\r\nimport Login from \"./Login\"\r\nimport Logo from \"./Logo\"\r\nimport {\r\n    Redirect\r\n} from \"react-router-dom\";\r\n\r\n\r\nclass HomeLogin extends Component{\r\n\r\n    render(){\r\n        var path = window.location.pathname;\r\n        if(path.includes(\"search\")){\r\n            window.location.pathname = path.replace(\"search\", \"\");\r\n        }\r\n        return(\r\n            <div>\r\n\r\n                <div className=\"Home\">\r\n                    {sessionStorage.getItem(\"token\") ?  <Redirect from={path} to=\"/search\" /> : null  }\r\n                    <br />\r\n                    <header className=\"Home-header\">\r\n                        <Logo />\r\n                        <Login />\r\n                    </header>\r\n                </div>\r\n              </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default HomeLogin;","import React, {Component} from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route\r\n} from \"react-router-dom\";\r\nimport App from './App';\r\nimport HomeLogin from './HomeLogin';\r\nimport Questionnaire from './Questionnaire/SurveyComponent';\r\nimport QuestionnairesManger from './Questionnaire/QuestionnaireManger';\r\nimport SurveyComponent from './Questionnaire/SurveyComponent';\r\n\r\nclass Home extends Component{\r\n    /*\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    */\r\n\r\n    render(){\r\n\r\n        document.body.setAttribute('dir', 'rtl')\r\n        return(\r\n            <Router basename={window.location.pathname || ''}>\r\n                <Switch>\r\n                    <Route exact path=\"/\">\r\n                        <HomeLogin />\r\n                    </Route>\r\n                    <Route exact path=\"/search\">\r\n                        <App component='search'/>\r\n                    </Route>\r\n                    <Route exact path=\"/messages\">\r\n                        <App component='messages'/>\r\n                    </Route>\r\n                    <Route exact path=\"/questionnaires\">\r\n                        <App component='questionnaires'/>\r\n                    </Route>\r\n                    <Route exact path=\"/instructions\">\r\n                        <App component='instructions'/>\r\n                    </Route>\r\n                    <Route exact path=\"/exercises\">\r\n                        <App component='exercises'/>\r\n                    </Route>\r\n                    <Route path='/userQuestionnaire/:QuestionnaireID' render={(props) => <App component='survey' {...props}/>}>\r\n                        {/*<App component='survey'/>*/}\r\n                    </Route>\r\n                </Switch>\r\n              </Router>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Home from './Home';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<Home />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}